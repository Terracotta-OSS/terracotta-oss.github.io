<!DOCTYPE html ><html xml:lang="en" lang="en" xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html;charset=utf-8"><meta http-equiv="Content-Style-Type" content="text/css"><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"><meta http-equiv="X-UA-Compatible" content="IE=edge"><title>Example 3 - Cron-based Triggers</title><link rel="Prev" href="re-exp_example1.html" title="Previous"><link rel="Next" href="re-exp_example4.html" title="Next"><link rel="StyleSheet" href="css/_qs_all.css" type="text/css" media="all"><link rel="StyleSheet" href="css/skin.css" type="text/css" media="all"><link rel="StyleSheet" href="css/social.css" type="text/css" media="all"><link rel="StyleSheet" href="css/webworks.css" type="text/css" media="all"><!--[if IE 7]><link rel="StyleSheet" href="css/_qs_all_IE7.css" type="text/css" media="all"><![endif]--><link rel="StyleSheet" href="css/print.css" type="text/css" media="print"><script type="text/javascript">
    'use strict';

    var redirect_url, page_hash;

    if (window === window.top) {
        // Redirect
        //
        redirect_url = "../index.html#page/quartz-scheduler-webhelp/re-exp_example3.html";
        if (window.document.location.hash.length > 1) {
            // Sanitize and append it
            //
            page_hash = window.document.location.hash.substring(1);
            page_hash = page_hash.replace(/[\\><:;"]|%5C|%3C|%3E|%3A|%3B|%22/gi, '');
            redirect_url += '#' + page_hash;
        }
        window.document.location.replace(redirect_url);
    }
</script><script type="text/javascript" src="scripts/common.js"></script><script type="text/javascript" src="scripts/page.js"></script><script type="text/javascript" src="scripts/search-client.js"></script><script type="text/javascript" src="scripts/unidata.js"></script><script type="text/javascript" src="scripts/unibreak.js"></script></head><body id="pDm2eVRSOfVzei2Adth2q6Q" class="ww_skin_page_body" onload="Page.OnLoad('../index.html#page/quartz-scheduler-webhelp/re-exp_example3.html');"><header id="wwconnect_header"><div class="ww_skin_breadcrumbs"><span class="ww_skin_breadcrumbs_parent"><a href="../quartz-scheduler-webhelp/_qs_all.1.058.html#wwconnect_header">Quartz Scheduler Example Programs and Sample Code</a></span><span class="ww_skin_breadcrumbs_divider"> : </span><span class="ww_skin_breadcrumbs_parent"><a href="../quartz-scheduler-webhelp/to-exp_the_quartz_example_programs.html#wwconnect_header">The Quartz Example Programs</a></span><span class="ww_skin_breadcrumbs_divider"> : </span><span class="ww_skin_breadcrumbs_current">Example 3 - Cron-based Triggers</span></div><div class="ww_skin_page_toolbar"></div></header><div id="ww3_11_3_11_1" class="Heading_2">Example 3 - Cron-based Triggers</div><div id="ww3_11_3_11_3_2_2" class="Body">This example is designed to demonstrate how you can use CronTriggers to schedule jobs. This example will fire off several simple jobs that say "Hello World" and display the date and time that the job was executed.</div><div id="ww3_11_3_11_3_2_4" class="Body">The program will perform the following actions:</div><div id="ww3_11_3_11_3_2_6_2" class="List_1"><span class="WebWorks_Number" style="width: 18pt"><span><img src="bullet.gif" alt="*" border="0" width="10" height="10"></span></span>Start up the Quartz Scheduler</div><div id="ww3_11_3_11_3_2_6_4" class="List_1"><span class="WebWorks_Number" style="width: 18pt"><span><img src="bullet.gif" alt="*" border="0" width="10" height="10"></span></span>Schedule several jobs using various features of CronTrigger</div><div id="ww3_11_3_11_3_2_6_6" class="List_1"><span class="WebWorks_Number" style="width: 18pt"><span><img src="bullet.gif" alt="*" border="0" width="10" height="10"></span></span>Wait for 300 seconds (5 minutes) to give Quartz a chance to run the jobs</div><div id="ww3_11_3_11_3_2_6_8" class="List_1"><span class="WebWorks_Number" style="width: 18pt"><span><img src="bullet.gif" alt="*" border="0" width="10" height="10"></span></span>Shut down the scheduler</div><div class="ww_skin_page_overflow"><table class="note1" summary=""><tr><td class="Table_Cell" style="padding-right: 6px; vertical-align: top"><div id="ww3_11_3_11_3_2_8_1_3_1_1_1" class="Note"><span style="font-weight: bold">Note:  </span>&nbsp;</div></td><td class="Table_Cell" style="padding-right: 6px; vertical-align: top"><div id="ww3_11_3_11_3_2_8_1_3_1_2" class="Table_Cell">Refer to the Quartz Javadoc for a thorough explanation of CronTrigger.</div></td></tr></table></div><div id="ww3_11_3_11_3_4_2" class="Section_Title">Running the Example</div><div id="ww3_11_3_11_3_4_4" class="Body">This example can be executed from the <span class="filepath">examples/example3</span> directory. There are two ways to run this example</div><div id="ww3_11_3_11_3_4_6_2" class="List_1"><span class="WebWorks_Number" style="width: 18pt"><span><img src="bullet.gif" alt="*" border="0" width="10" height="10"></span></span>example3.sh - A UNIX/Linux shell script</div><div id="ww3_11_3_11_3_4_6_4" class="List_1"><span class="WebWorks_Number" style="width: 18pt"><span><img src="bullet.gif" alt="*" border="0" width="10" height="10"></span></span>example3.bat - A Windows batch file</div><div id="ww3_11_3_11_3_6_2" class="Section_Title">The Code</div><div id="ww3_11_3_11_3_6_4" class="Body">The code for this example resides in the package org.quartz.examples.example3.</div><div id="ww3_11_3_11_3_6_6" class="Body">The code in this example is made up of the following classes:</div><div class="ww_skin_page_overflow"><table class="NoRules1" summary=""><tr><td class="norules-head" style="padding-bottom: 0px; padding-right: 8px; padding-top: 0px; width: 90pt"><div id="ww3_11_3_11_3_6_8_2_2_6_2_2" class="norules-head">Class Name</div></td><td class="norules-head" style="padding-bottom: 0px; padding-right: 8px; padding-top: 0px; width: 342pt"><div id="ww3_11_3_11_3_6_8_2_2_6_2_4" class="norules-head">Description</div></td></tr><tr><td class="Table_Cell" style="padding-bottom: 0px; padding-right: 8px; padding-top: 0px; vertical-align: top"><div id="ww3_11_3_11_3_6_8_2_2_8_2_2" class="Table_Cell">CronTriggerExample</div></td><td class="Table_Cell" style="padding-bottom: 0px; padding-right: 8px; padding-top: 0px; vertical-align: top"><div id="ww3_11_3_11_3_6_8_2_2_8_2_4" class="Table_Cell">The main program.</div></td></tr><tr><td class="Table_Cell" style="padding-bottom: 0px; padding-right: 8px; padding-top: 0px; vertical-align: top"><div id="ww3_11_3_11_3_6_8_2_2_8_4_2" class="Table_Cell">SimpleJob</div></td><td class="Table_Cell" style="padding-bottom: 0px; padding-right: 8px; padding-top: 0px; vertical-align: top"><div id="ww3_11_3_11_3_6_8_2_2_8_4_4" class="Table_Cell">A simple job that says Hello World and displays the date/time.</div></td></tr></table></div><div id="ww3_11_3_11_3_8_2" class="Section_Title">SimpleJob</div><div id="ww3_11_3_11_3_8_4" class="Body">SimpleJob is a simple job that implements the Job interface and logs a message to the log (by default, this will simply go to the screen). The current date and time is printed in the job so that you can see exactly when the job was executed.</div><div id="ww3_11_3_11_3_8_6" class="Preformatted">public void execute(JobExecutionContext context) throws JobExecutionException {  <br>    JobKey jobKey = context.getJobDetail().getKey();  <br>    _log.info("SimpleJob says: " + jobKey + " executing at " + new Date());  <br>}</div><div id="ww3_11_3_11_3_10_2" class="Section_Title">CronTriggerExample</div><div id="ww3_11_3_11_3_10_4" class="Body">The program starts by getting an instance of the Scheduler. This is done by creating a StdSchedulerFactory and then using it to create a scheduler. This will create a simple, RAM-based scheduler.</div><div id="ww3_11_3_11_3_10_6" class="Preformatted">SchedulerFactory sf = new StdSchedulerFactory();  <br>Scheduler sched = sf.getScheduler();</div><div id="ww3_11_3_11_3_10_8" class="Body">Job #1 is scheduled to run every 20 seconds</div><div id="ww3_11_3_11_3_10_10" class="Preformatted">JobDetail job = newJob(SimpleJob.class)  <br>    .withIdentity("job1", "group1")  <br>    .build();  <br>CronTrigger trigger = newTrigger()  <br>    .withIdentity("trigger1", "group1")  <br>    .withSchedule(cronSchedule("0/20 * * * * ?"))  <br>    .build();  <br>sched.scheduleJob(job, trigger);</div><div id="ww3_11_3_11_3_10_12" class="Body">Job #2 is scheduled to run every other minute starting at 15 seconds past the minute.</div><div id="ww3_11_3_11_3_10_14" class="Preformatted">job = newJob(SimpleJob.class)  <br>    .withIdentity("job2", "group1")  <br>    .build();  <br>trigger = newTrigger()  <br>    .withIdentity("trigger2", "group1")  <br>    .withSchedule(cronSchedule("15 0/2 * * * ?"))  <br>    .build();  <br>sched.scheduleJob(job, trigger);</div><div id="ww3_11_3_11_3_10_16" class="Body">Job #3 is scheduled to run every other minute between 8am and 5pm (17 :00).</div><div id="ww3_11_3_11_3_10_18" class="Preformatted">job = newJob(SimpleJob.class)  <br>    .withIdentity("job3", "group1")  <br>    .build();  <br>trigger = newTrigger()  <br>    .withIdentity("trigger3", "group1")  <br>    .withSchedule(cronSchedule("0 0/2 8-17 * * ?"))  <br>    .build();  <br>sched.scheduleJob(job, trigger);</div><div id="ww3_11_3_11_3_10_20" class="Body">Job #4 is scheduled to run every three minutes, but only between 5pm and 11pm</div><div id="ww3_11_3_11_3_10_22" class="Preformatted">job = newJob(SimpleJob.class)  <br>    .withIdentity("job4", "group1")  <br>    .build();  <br>trigger = newTrigger()  <br>    .withIdentity("trigger4", "group1")  <br>    .withSchedule(cronSchedule("0 0/3 17-23 * * ?"))  <br>    .build();  <br>sched.scheduleJob(job, trigger);</div><div id="ww3_11_3_11_3_10_24" class="Body">Job #5 is scheduled to run at 10am on the 1st and 15th days of the month</div><div id="ww3_11_3_11_3_10_26" class="Preformatted">job = newJob(SimpleJob.class)  <br>    .withIdentity("job5", "group1")  <br>    .build();  <br>trigger = newTrigger()  <br>    .withIdentity("trigger5", "group1")  <br>    .withSchedule(cronSchedule("0 0 10am 1,15 * ?"))  <br>    .build();  <br>sched.scheduleJob(job, trigger);</div><div id="ww3_11_3_11_3_10_28" class="Body">Job #6 is scheduled to run every 30 seconds on weekdays (Monday through Friday)</div><div id="ww3_11_3_11_3_10_30" class="Preformatted">job = newJob(SimpleJob.class)  <br>    .withIdentity("job6", "group1")  <br>    .build();  <br>trigger = newTrigger()  <br>    .withIdentity("trigger6", "group1")  <br>    .withSchedule(cronSchedule("0,30 * * ? * MON-FRI"))  <br>    .build();  <br>sched.scheduleJob(job, trigger);</div><div id="ww3_11_3_11_3_10_32" class="Body">Job #7 is scheduled to run every 30 seconds on weekends (Saturday and Sunday)</div><div id="ww3_11_3_11_3_10_34" class="Preformatted">job = newJob(SimpleJob.class)  <br>    .withIdentity("job7", "group1")  <br>    .build();  <br>trigger = newTrigger()  <br>    .withIdentity("trigger7", "group1")  <br>    .withSchedule(cronSchedule("0,30 * * ? * SAT,SUN"))  <br>    .build();  <br>sched.scheduleJob(job, trigger);</div><div id="ww3_11_3_11_3_10_36" class="Body">The scheduler is then started (it also would have been fine to start it before scheduling the jobs).</div><div id="ww3_11_3_11_3_10_38" class="Preformatted">sched.start();</div><div id="ww3_11_3_11_3_10_40" class="Body">To let the scheduler have an opportunity to run the job, our program sleeps for five minutes (300 seconds). The scheduler is running in the background and should fire off several jobs during that time.</div><div class="ww_skin_page_overflow"><table class="note1" summary=""><tr><td class="Table_Cell" style="padding-right: 6px; vertical-align: top"><div id="ww3_11_3_11_3_10_42_1_3_1_1_1" class="Note"><span style="font-weight: bold">Note:  </span>&nbsp;</div></td><td class="Table_Cell" style="padding-right: 6px; vertical-align: top"><div id="ww3_11_3_11_3_10_42_1_3_1_2" class="Table_Cell">Because many of the jobs have hourly and daily restrictions on them, not all of the jobs will run in this example. For example: Job #6 only runs on weekdays while Job #7 only runs on weekends.</div></td></tr></table></div><div id="ww3_11_3_11_3_10_46" class="Preformatted">Thread.sleep(300L * 1000L);</div><div id="ww3_11_3_11_3_10_48" class="Body">Finally, the program gracefully shuts down the scheduler:</div><div id="ww3_11_3_11_3_10_50" class="Preformatted">sched.shutdown(true);</div><div class="ww_skin_page_overflow"><table class="note1" summary=""><tr><td class="Table_Cell" style="padding-right: 6px; vertical-align: top"><div id="ww3_11_3_11_3_10_52_1_3_1_1_1" class="Note"><span style="font-weight: bold">Note:  </span>&nbsp;</div></td><td class="Table_Cell" style="padding-right: 6px; vertical-align: top"><div id="ww3_11_3_11_3_10_52_1_3_1_2" class="Table_Cell">Passing "true" into the shutdown() method tells the Quartz Scheduler to wait until all jobs have completed running before returning from the method call.</div></td></tr></table></div><footer><!-- Related Topics --><!--                --><!-- Back to Top --><!--             --><!-- Disqus --><!--        --><!-- Google Translation --><!--                    --><br></footer><div><div style="font-family: Arial, Verdana, Helvetica, Sans-Serif; font-size: 11px; margin-top: 20px; margin-bottom: 20px;"><span class="xref"><a href="http://documentation.softwareag.com/legal/" target="external_window">Copyright © <span>2010</span><span>-2016</span><span></span><span></span> Software AG, Darmstadt, Germany</a></span>.</div><hr></div><div style="font-family: Arial, Verdana, Helvetica, Sans-Serif; font-size: 13px; font-weight: bold; margin-top: 20px;"><span><img style="vertical-align:middle" src="../connect/quartz_online.png" alt="Product Logo"><!--	     <a href="https://empower.softwareag.com/ContactSupport/default.asp" target="_blank" >Contact&#160;Support</a> --><!--         &#160;&#160;|&#160;&#160;  --><!--         <a href="http://www.softwareag.com/corporate/community/default.asp" target="_blank" >Community</a>  --><!--         &#160;&#160;  -->
          |&nbsp;&nbsp;
        <a href="mailto://documentation@softwareag.com" target="_blank">Feedback&nbsp;&nbsp;</a></span></div></body></html>