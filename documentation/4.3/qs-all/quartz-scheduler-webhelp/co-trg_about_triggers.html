<!DOCTYPE html ><html xml:lang="en" lang="en" xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html;charset=utf-8"><meta http-equiv="Content-Style-Type" content="text/css"><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"><meta http-equiv="X-UA-Compatible" content="IE=edge"><title>Triggers</title><link rel="Prev" href="to-trg_working_with_triggers.html" title="Previous"><link rel="Next" href="co-trg_simple_triggers.html" title="Next"><link rel="StyleSheet" href="css/_qs_all.css" type="text/css" media="all"><link rel="StyleSheet" href="css/skin.css" type="text/css" media="all"><link rel="StyleSheet" href="css/social.css" type="text/css" media="all"><link rel="StyleSheet" href="css/webworks.css" type="text/css" media="all"><!--[if IE 7]><link rel="StyleSheet" href="css/_qs_all_IE7.css" type="text/css" media="all"><![endif]--><link rel="StyleSheet" href="css/print.css" type="text/css" media="print"><script type="text/javascript">
    'use strict';

    var redirect_url, page_hash;

    if (window === window.top) {
        // Redirect
        //
        redirect_url = "../index.html#page/quartz-scheduler-webhelp/co-trg_about_triggers.html";
        if (window.document.location.hash.length > 1) {
            // Sanitize and append it
            //
            page_hash = window.document.location.hash.substring(1);
            page_hash = page_hash.replace(/[\\><:;"]|%5C|%3C|%3E|%3A|%3B|%22/gi, '');
            redirect_url += '#' + page_hash;
        }
        window.document.location.replace(redirect_url);
    }
</script><script type="text/javascript" src="scripts/common.js"></script><script type="text/javascript" src="scripts/page.js"></script><script type="text/javascript" src="scripts/search-client.js"></script><script type="text/javascript" src="scripts/unidata.js"></script><script type="text/javascript" src="scripts/unibreak.js"></script></head><body id="pciQt4IpvL47NfZ5yEpBSAQ" class="ww_skin_page_body" onload="Page.OnLoad('../index.html#page/quartz-scheduler-webhelp/co-trg_about_triggers.html');"><header id="wwconnect_header"><div class="ww_skin_breadcrumbs"><span class="ww_skin_breadcrumbs_parent"><a href="../quartz-scheduler-webhelp/_qs_all.1.009.html#wwconnect_header">Quartz Scheduler Developer Guide</a></span><span class="ww_skin_breadcrumbs_divider"> : </span><span class="ww_skin_breadcrumbs_parent"><a href="../quartz-scheduler-webhelp/to-trg_working_with_triggers.html#wwconnect_header">Working with Triggers</a></span><span class="ww_skin_breadcrumbs_divider"> : </span><span class="ww_skin_breadcrumbs_current">Triggers</span></div><div class="ww_skin_page_toolbar"></div></header><div id="ww3_9_11_7_1" class="Heading_2">Triggers</div><div id="ww3_9_11_7_3_2" class="Body">Like jobs, triggers are easy to work with, however they have a variety of customizable options that you need to understand before you can make full use of Quartz.</div><div id="ww3_9_11_7_3_4" class="Body">There are different types of triggers that you can select from to meet different scheduling needs. The two most common types are <span class="emphasis">simple triggers</span> and <span class="emphasis">cron triggers</span>. Details about these specific trigger types are provided in <span class="heading-page"><a href="../quartz-scheduler-webhelp/to-trg_working_with_triggers.html#wwconnect_header" title="Working with Triggers">Working with Triggers</a></span>.</div><div id="ww3_9_11_7_3_6_2" class="Section_Title">Common Trigger Attributes</div><div id="ww3_9_11_7_3_6_4" class="Body">Aside from the fact that all trigger types have TriggerKey properties for tracking their identities, there are a number of other properties that are common to all trigger types. You set these common properties using the TriggerBuilder when you are building the trigger definition (examples of that will follow).</div><div id="ww3_9_11_7_3_6_6" class="Body">Here is a listing of properties common to all trigger types:</div><div id="ww3_9_11_7_3_6_8_2" class="List_1"><span class="WebWorks_Number" style="width: 18pt"><span><img src="bullet.gif" alt="*" border="0" width="10" height="10"></span></span>The <span class="parmname">jobKey</span> property indicates the identity of the job that should be executed when the trigger fires.</div><div id="ww3_9_11_7_3_6_8_4" class="List_1"><span class="WebWorks_Number" style="width: 18pt"><span><img src="bullet.gif" alt="*" border="0" width="10" height="10"></span></span>The <span class="parmname">startTime</span> property indicates when the trigger's schedule first comes into effect. The value is a java.util.Date object that defines a moment in time on a given calendar date. For some trigger types, the trigger will actually fire at the start time. For others it simply marks the time that the schedule should start being followed. This means you can store a trigger with a schedule such as "every 5th day of the month" during January, and if the <span class="parmname">startTime</span> property is set to April 1st, it will be a few months before the first firing.</div><div id="ww3_9_11_7_3_6_8_6" class="List_1"><span class="WebWorks_Number" style="width: 18pt"><span><img src="bullet.gif" alt="*" border="0" width="10" height="10"></span></span>The <span class="parmname">endTime</span> property indicates when the trigger's schedule should no longer be in effect. In other words, a trigger with a schedule of "every 5th day of the month" and with an end time of July 1st will fire for its last time on June 5th.</div><div id="ww3_9_11_7_3_6_10" class="Body">Other properties, which take a bit more explanation, are discussed in the following sections.</div><div id="ww3_9_11_7_3_8_2" class="Section_Title">Priority</div><div id="ww3_9_11_7_3_8_4" class="Body">Sometimes, when you have many Triggers (or few worker threads in your Quartz thread pool), Quartz may not have enough resources to immediately fire all of the Triggers that are scheduled to fire at the same time. In this case, you may want to control which of your Triggers get first crack at the available Quartz worker threads. For this purpose, you can set the <span class="parmname">priority</span> property on a Trigger. If N Triggers are to fire at the same time, but there are only Z worker threads currently available, then the first Z Triggers with the <span class="emphasis">highest</span> priority will be executed first.</div><div id="ww3_9_11_7_3_8_6" class="Body">Any integer value is allowed for priority, positive or negative. If you do not set a priority on a Trigger, then it will use the default priority of 5.</div><div class="ww_skin_page_overflow"><table class="note1" summary=""><tr><td class="Table_Cell" style="padding-right: 6px; vertical-align: top"><div id="ww3_9_11_7_3_8_8_1_3_1_1_1" class="Note"><span style="font-weight: bold">Note:  </span>&nbsp;</div></td><td class="Table_Cell" style="padding-right: 6px; vertical-align: top"><div id="ww3_9_11_7_3_8_8_1_3_1_2" class="Table_Cell">Priorities are only compared when triggers have the same fire time. A trigger scheduled to fire at 10:59 will always fire before one scheduled to fire at 11:00.</div></td></tr></table></div><div class="ww_skin_page_overflow"><table class="note1" summary=""><tr><td class="Table_Cell" style="padding-right: 6px; vertical-align: top"><div id="ww3_9_11_7_3_8_10_1_3_1_1_1" class="Note"><span style="font-weight: bold">Note:  </span>&nbsp;</div></td><td class="Table_Cell" style="padding-right: 6px; vertical-align: top"><div id="ww3_9_11_7_3_8_10_1_3_1_2" class="Table_Cell">When a trigger's job is detected to require recovery, its recovery is scheduled with the same priority as the original trigger.</div></td></tr></table></div><div id="ww3_9_11_7_3_10_2" class="Section_Title">Misfire Instructions</div><div id="ww3_9_11_7_3_10_4" class="Body">Another important property of a Trigger is its "misfire instruction". A misfire occurs if a persistent trigger misses its firing time because of the scheduler being shutdown, or because there are no available threads in Quartz's thread pool for executing the job.</div><div id="ww3_9_11_7_3_10_6" class="Body">The different trigger types have different misfire instructions available to them. By default they use a 'smart policy' instruction - which has dynamic behavior based on trigger type and configuration. When the scheduler starts, it searches for any persistent triggers that have misfired, and it then updates each of them based on their individually configured misfire instructions.</div><div id="ww3_9_11_7_3_10_8" class="Body">When you start using Quartz in your own projects, make sure to familiarize yourself with the misfire instructions that are defined on the given trigger types, and explained in their Javadoc. Addition information about misfire instructions for specific trigger types is also provided in <span class="heading-page"><a href="../quartz-scheduler-webhelp/to-trg_working_with_triggers.html#wwconnect_header" title="Working with Triggers">Working with Triggers</a></span>.</div><div id="ww3_9_11_7_3_12_2" class="Section_Title">Calendars</div><div id="ww3_9_11_7_3_12_4" class="Body">Quartz Calendar objects (<span class="emphasis">not</span> java.util.Calendar objects) can be associated with triggers at the time the trigger is defined and stored in the scheduler.</div><div id="ww3_9_11_7_3_12_6" class="Body">Calendars are useful for excluding blocks of time from the trigger's firing schedule. For instance, you could create a trigger that fires a job every weekday at 9:30 am, but then add a Calendar that excludes all of the business's holidays.</div><div id="ww3_9_11_7_3_12_8" class="Body">Calendar's can be any serializable object that implements the Calendar interface {shown below).</div><div id="ww3_9_11_7_3_12_10" class="Preformatted">package org.quartz;    <br>public interface Calendar {    <br>  public boolean isTimeIncluded(long timeStamp);    <br>  public long getNextIncludedTime(long timeStamp);    <br>}</div><div id="ww3_9_11_7_3_12_12" class="Body">Notice that the parameters to these methods are of the long type. These are timestamps in millisecond format. This means that calendars can 'block out' sections of time as narrow as a millisecond. Most likely, you'll be interested in 'blocking-out' entire days. As a convenience, Quartz includes the class org.quartz.impl.HolidayCalendar, which does just that.</div><div id="ww3_9_11_7_3_12_14" class="Body">Calendars must be instantiated and registered with the scheduler via the addCalendar(..) method. If you use HolidayCalendar, after instantiating it, you should use its addExcludedDate(Date date) method in order to populate it with the days you wish to have excluded from scheduling. The same calendar instance can be used with multiple triggers as shown in the example below:</div><div id="ww3_9_11_7_3_12_16" class="Preformatted">HolidayCalendar cal = new HolidayCalendar();    <br>cal.addExcludedDate( someDate );    <br>cal.addExcludedDate( someOtherDate );    <br>sched.addCalendar("myHolidays", cal, false);    <br>Trigger t = newTrigger()    <br>    .withIdentity("myTrigger")    <br>    .forJob("myJob")    <br>    .withSchedule(dailyAtHourAndMinute(9, 30)) // execute job daily at 9:30    <br>    .modifiedByCalendar("myHolidays") // but not on holidays    <br>    .build();    <br>// .. schedule job with trigger    <br>Trigger t2 = newTrigger()    <br>    .withIdentity("myTrigger2")    <br>    .forJob("myJob2")    <br>    .withSchedule(dailyAtHourAndMinute(11, 30)) // execute job daily at 11:30    <br>    .modifiedByCalendar("myHolidays") // but not on holidays    <br>    .build();    <br>// .. schedule job with trigger2</div><div id="ww3_9_11_7_3_12_18" class="Body">The code above creates two triggers, each scheduled to fire daily. However, any of the firings that would have occurred during the period excluded by the calendar will be skipped.</div><div id="ww3_9_11_7_3_12_20" class="Body">The org.quartz.impl.calendar package provides a number of Calendar implementations that may suit your needs.</div><footer><!-- Related Topics --><!--                --><!-- Back to Top --><!--             --><!-- Disqus --><!--        --><!-- Google Translation --><!--                    --><br></footer><div><div style="font-family: Arial, Verdana, Helvetica, Sans-Serif; font-size: 11px; margin-top: 20px; margin-bottom: 20px;"><span class="xref"><a href="http://documentation.softwareag.com/legal/" target="external_window">Copyright Â© <span>2010</span><span>-2016</span><span></span><span></span> Software AG, Darmstadt, Germany</a></span>.</div><hr></div><div style="font-family: Arial, Verdana, Helvetica, Sans-Serif; font-size: 13px; font-weight: bold; margin-top: 20px;"><span><img style="vertical-align:middle" src="../connect/quartz_online.png" alt="Product Logo"><!--	     <a href="https://empower.softwareag.com/ContactSupport/default.asp" target="_blank" >Contact&#160;Support</a> --><!--         &#160;&#160;|&#160;&#160;  --><!--         <a href="http://www.softwareag.com/corporate/community/default.asp" target="_blank" >Community</a>  --><!--         &#160;&#160;  -->
          |&nbsp;&nbsp;
        <a href="mailto://documentation@softwareag.com" target="_blank">Feedback&nbsp;&nbsp;</a></span></div></body></html>