<!DOCTYPE html ><html xml:lang="en" lang="en" xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html;charset=utf-8"><meta http-equiv="Content-Style-Type" content="text/css"><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"><meta http-equiv="X-UA-Compatible" content="IE=edge"><title>Questions About the JDBCJobStore</title><link rel="Prev" href="co-faq_trigger_questions.html" title="Previous"><link rel="Next" href="co-faq_transaction_questions.html" title="Next"><link rel="StyleSheet" href="css/_qs_all.css" type="text/css" media="all"><link rel="StyleSheet" href="css/skin.css" type="text/css" media="all"><link rel="StyleSheet" href="css/social.css" type="text/css" media="all"><link rel="StyleSheet" href="css/webworks.css" type="text/css" media="all"><!--[if IE 7]><link rel="StyleSheet" href="css/_qs_all_IE7.css" type="text/css" media="all"><![endif]--><link rel="StyleSheet" href="css/print.css" type="text/css" media="print"><script type="text/javascript">
    'use strict';

    var redirect_url, page_hash;

    if (window === window.top) {
        // Redirect
        //
        redirect_url = "../index.html#page/quartz-scheduler-webhelp/co-faq_jdbc_jobstore_questions.html";
        if (window.document.location.hash.length > 1) {
            // Sanitize and append it
            //
            page_hash = window.document.location.hash.substring(1);
            page_hash = page_hash.replace(/[\\><:;"]|%5C|%3C|%3E|%3A|%3B|%22/gi, '');
            redirect_url += '#' + page_hash;
        }
        window.document.location.replace(redirect_url);
    }
</script><script type="text/javascript" src="scripts/common.js"></script><script type="text/javascript" src="scripts/page.js"></script><script type="text/javascript" src="scripts/search-client.js"></script><script type="text/javascript" src="scripts/unidata.js"></script><script type="text/javascript" src="scripts/unibreak.js"></script></head><body id="pFNgr8QysVv2SC1195Xy35A" class="ww_skin_page_body" onload="Page.OnLoad('../index.html#page/quartz-scheduler-webhelp/co-faq_jdbc_jobstore_questions.html');"><header id="wwconnect_header"><div class="ww_skin_breadcrumbs"><span class="ww_skin_breadcrumbs_parent"><a href="../quartz-scheduler-webhelp/to-faqs.html#wwconnect_header">FAQ</a></span><span class="ww_skin_breadcrumbs_divider"> : </span><span class="ww_skin_breadcrumbs_current">Questions About the JDBCJobStore</span></div><div class="ww_skin_page_toolbar"></div></header><div id="ww3_18_15_1" class="Heading_1">Questions About the JDBCJobStore</div><div id="ww3_18_15_3_2_2" class="Section_Title">How do I improve the performance of JDBC-JobStore?</div><div id="ww3_18_15_3_2_4" class="Body">There are a few ways to speed up JDBC-JobStore, only one of which is very practical.</div><div id="ww3_18_15_3_2_6" class="Body">First, the obvious, but not-so-practical:</div><div id="ww3_18_15_3_2_8_2" class="List_1"><span class="WebWorks_Number" style="width: 18pt"><span><img src="bullet.gif" alt="*" border="0" width="10" height="10"></span></span>Buy a faster network between the machine that runs Quartz, and the machine that runs your RDBMS.</div><div id="ww3_18_15_3_2_8_4" class="List_1"><span class="WebWorks_Number" style="width: 18pt"><span><img src="bullet.gif" alt="*" border="0" width="10" height="10"></span></span>Buy a more powerful machine to run your database on.</div><div id="ww3_18_15_3_2_8_6" class="List_1"><span class="WebWorks_Number" style="width: 18pt"><span><img src="bullet.gif" alt="*" border="0" width="10" height="10"></span></span>Buy a different RDBMS.</div><div id="ww3_18_15_3_2_10" class="Body">Now for something simple, but effective: build indexes on the Quartz tables.</div><div id="ww3_18_15_3_2_12" class="Body">Most database systems automatically index the primary-key fields. Many will also index a foreign-key field. Make sure yours does this, or make the indexes on all key fields of every table manually.</div><div id="ww3_18_15_3_2_14" class="Body">Next, manually add some additional indexes to the Quartz tables. Most important to index are the TRIGGER table's "next_fire_time" and "state" fields. Last (but not as important), add indexes to every column on the FIRED_TRIGGERS table.</div><div id="ww3_18_15_3_2_16" class="Preformatted">create index idx_qrtz_t_next_fire_time on qrtz_triggers(NEXT_FIRE_TIME);   <br>create index idx_qrtz_t_state on qrtz_triggers(TRIGGER_STATE);   <br>create index idx_qrtz_t_nf_st on qrtz_triggers(TRIGGER_STATE,NEXT_FIRE_TIME);   <br>create index idx_qrtz_ft_trig_name on qrtz_fired_triggers(TRIGGER_NAME);   <br>create index idx_qrtz_ft_trig_group on qrtz_fired_triggers(TRIGGER_GROUP);   <br>create index idx_qrtz_ft_trig_name on qrtz_fired_triggers(TRIGGER_NAME);   <br>create index idx_qrtz_ft_trig_n_g on \   <br>    qrtz_fired_triggers(TRIGGER_NAME,TRIGGER_GROUP);   <br>create index idx_qrtz_ft_trig_inst_name on qrtz_fired_triggers(INSTANCE_NAME);   <br>create index idx_qrtz_ft_job_name on qrtz_fired_triggers(JOB_NAME);   <br>create index idx_qrtz_ft_job_group on qrtz_fired_triggers(JOB_GROUP);   <br>create index idx_qrtz_t_next_fire_time_misfire on \   <br>    qrtz_triggers(MISFIRE_INSTR,NEXT_FIRE_TIME);   <br>create index idx_qrtz_t_nf_st_misfire on \   <br>    qrtz_triggers(MISFIRE_INSTR,NEXT_FIRE_TIME,TRIGGER_STATE);   <br>create index idx_qrtz_t_nf_st_misfire_grp on \   <br>    qrtz_triggers(MISFIRE_INSTR,NEXT_FIRE_TIME,TRIGGER_GROUP,TRIGGER_STATE);</div><div id="ww3_18_15_3_2_18" class="Body">The clustering feature works best for scaling out long-running and/or CPU-intensive jobs (distributing the work-load over multiple nodes). If you need to scale out to support thousands of short-running (1 second) jobs, consider partitioning the set of jobs by using multiple distinct schedulers (and hence multiple sets of tables, with distinct prefixes). Using one scheduler forces the use of a cluster-wide lock, a pattern that degrades performance as you add more clients.</div><div id="ww3_18_15_3_4_2" class="Section_Title">My DB Connections do not recover properly if the database server is restarted.</div><div id="ww3_18_15_3_4_4" class="Body">If you're having Quartz create the connection DataSource (by specifying the connection parameters in the quartz properties file) make sure you have a connection validation query specified, such as:</div><div id="ww3_18_15_3_4_6" class="Preformatted">org.quartz.dataSource.myDS.validationQuery=select 0 from dual</div><div id="ww3_18_15_3_4_8" class="Body">This particular query is extremely efficient for Oracle. For other databases, you'll need to think of an efficient query that always works as long as the connection is good.</div><div id="ww3_18_15_3_4_10" class="Body">If you're DataSource is managed by your application server, make sure the DataSource is configured in such a way that it can detect failed connections.</div><footer><!-- Related Topics --><!--                --><!-- Back to Top --><!--             --><!-- Disqus --><!--        --><!-- Google Translation --><!--                    --><br></footer><div><div style="font-family: Arial, Verdana, Helvetica, Sans-Serif; font-size: 11px; margin-top: 20px; margin-bottom: 20px;"><span class="xref"><a href="http://documentation.softwareag.com/legal/" target="external_window">Copyright Â© <span>2010</span><span>-2016</span><span></span><span></span> Software AG, Darmstadt, Germany</a></span>.</div><hr></div><div style="font-family: Arial, Verdana, Helvetica, Sans-Serif; font-size: 13px; font-weight: bold; margin-top: 20px;"><span><img style="vertical-align:middle" src="../connect/quartz_online.png" alt="Product Logo"><!--	     <a href="https://empower.softwareag.com/ContactSupport/default.asp" target="_blank" >Contact&#160;Support</a> --><!--         &#160;&#160;|&#160;&#160;  --><!--         <a href="http://www.softwareag.com/corporate/community/default.asp" target="_blank" >Community</a>  --><!--         &#160;&#160;  -->
          |&nbsp;&nbsp;
        <a href="mailto://documentation@softwareag.com" target="_blank">Feedback&nbsp;&nbsp;</a></span></div></body></html>