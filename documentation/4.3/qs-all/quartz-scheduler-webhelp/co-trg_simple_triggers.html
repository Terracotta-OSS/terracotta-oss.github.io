<!DOCTYPE html ><html xml:lang="en" lang="en" xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html;charset=utf-8"><meta http-equiv="Content-Style-Type" content="text/css"><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"><meta http-equiv="X-UA-Compatible" content="IE=edge"><title>SimpleTrigger</title><link rel="Prev" href="co-trg_about_triggers.html" title="Previous"><link rel="Next" href="co-trg_crontriggers.html" title="Next"><link rel="StyleSheet" href="css/_qs_all.css" type="text/css" media="all"><link rel="StyleSheet" href="css/skin.css" type="text/css" media="all"><link rel="StyleSheet" href="css/social.css" type="text/css" media="all"><link rel="StyleSheet" href="css/webworks.css" type="text/css" media="all"><!--[if IE 7]><link rel="StyleSheet" href="css/_qs_all_IE7.css" type="text/css" media="all"><![endif]--><link rel="StyleSheet" href="css/print.css" type="text/css" media="print"><script type="text/javascript">
    'use strict';

    var redirect_url, page_hash;

    if (window === window.top) {
        // Redirect
        //
        redirect_url = "../index.html#page/quartz-scheduler-webhelp/co-trg_simple_triggers.html";
        if (window.document.location.hash.length > 1) {
            // Sanitize and append it
            //
            page_hash = window.document.location.hash.substring(1);
            page_hash = page_hash.replace(/[\\><:;"]|%5C|%3C|%3E|%3A|%3B|%22/gi, '');
            redirect_url += '#' + page_hash;
        }
        window.document.location.replace(redirect_url);
    }
</script><script type="text/javascript" src="scripts/common.js"></script><script type="text/javascript" src="scripts/page.js"></script><script type="text/javascript" src="scripts/search-client.js"></script><script type="text/javascript" src="scripts/unidata.js"></script><script type="text/javascript" src="scripts/unibreak.js"></script></head><body id="pMDYnROYjsTeWOCJ1jh4dcQ" class="ww_skin_page_body" onload="Page.OnLoad('../index.html#page/quartz-scheduler-webhelp/co-trg_simple_triggers.html');"><header id="wwconnect_header"><div class="ww_skin_breadcrumbs"><span class="ww_skin_breadcrumbs_parent"><a href="../quartz-scheduler-webhelp/_qs_all.1.009.html#wwconnect_header">Quartz Scheduler Developer Guide</a></span><span class="ww_skin_breadcrumbs_divider"> : </span><span class="ww_skin_breadcrumbs_parent"><a href="../quartz-scheduler-webhelp/to-trg_working_with_triggers.html#wwconnect_header">Working with Triggers</a></span><span class="ww_skin_breadcrumbs_divider"> : </span><span class="ww_skin_breadcrumbs_current">SimpleTrigger</span></div><div class="ww_skin_page_toolbar"></div></header><div id="ww3_9_11_9_1" class="Heading_2">SimpleTrigger</div><div id="ww3_9_11_9_3_2" class="Body">SimpleTrigger should meet your scheduling needs if you need to have a job execute exactly once at a specific moment in time, or at a specific moment in time followed by repeats at a specific interval. For example, if you want the trigger to fire at exactly 11:23:54 AM on January 13, 2015, or if you want it to fire at that time, and then fire five more times, every ten seconds.</div><div id="ww3_9_11_9_3_4" class="Body">With this description, you may not find it surprising to find that the properties of a SimpleTrigger include: a start-time, and end-time, a repeat count, and a repeat interval. All of these properties are exactly what you'd expect them to be, with only a couple special notes related to the end-time property.</div><div id="ww3_9_11_9_3_6" class="Body">The repeat count can be zero, a positive integer, or the constant value SimpleTrigger.REPEAT_INDEFINITELY. The repeat interval property must be zero, or a positive long value, and represents a number of milliseconds. Note that a repeat interval of zero will cause 'repeat count' firings of the trigger to happen concurrently (or as close to concurrently as the scheduler can manage).</div><div id="ww3_9_11_9_3_8" class="Body">If you're not already familiar with Quartz's DateBuilder class, you may find it helpful for computing your trigger fire-times, depending on the <span class="parmname">startTime</span> (or <span class="parmname">endTime</span>) that you're trying to create.</div><div id="ww3_9_11_9_3_10" class="Body">The <span class="parmname">endTime</span> property (if it is specified) overrides the repeat count property. This can be useful if you wish to create a trigger such as one that fires every 10 seconds until a given moment in time. Rather than having to compute the number of times it would repeat between the start-time and the end-time, you can simply specify the end-time and then use a repeat count of REPEAT_INDEFINITELY (you could even specify a repeat count of some huge number that is sure to be more than the number of times the trigger will actually fire before the end-time arrives).</div><div id="ww3_9_11_9_3_12" class="Body">SimpleTrigger instances are built using TriggerBuilder (for the trigger's main properties) and SimpleScheduleBuilder (for the SimpleTrigger-specific properties). To use these builders in a DSL-style, use static imports:</div><div id="ww3_9_11_9_3_14" class="Preformatted">import static org.quartz.TriggerBuilder.*; <br>import static org.quartz.SimpleScheduleBuilder.*; <br>import static org.quartz.DateBuilder.*:</div><div id="ww3_9_11_9_3_16_2" class="Section_Title">Examples of Defining Triggers with Different Schedules</div><div id="ww3_9_11_9_3_16_4" class="Body">The following are various examples of defining triggers with simple schedules. Review them all, as they each show at least one new/different point.</div><div id="ww3_9_11_9_3_16_6" class="Body">Also, spend some time looking at all of the available methods in the language defined by TriggerBuilder and SimpleScheduleBuilder so that you can be familiar with options available to you that may not have been demonstrated in the examples shown here.</div><div class="ww_skin_page_overflow"><table class="note1" summary=""><tr><td class="Table_Cell" style="padding-right: 6px; vertical-align: top"><div id="ww3_9_11_9_3_16_8_1_3_1_1_1" class="Note"><span style="font-weight: bold">Note:  </span>&nbsp;</div></td><td class="Table_Cell" style="padding-right: 6px; vertical-align: top"><div id="ww3_9_11_9_3_16_8_1_3_1_2" class="Table_Cell">Note that TriggerBuilder (and Quartz's other builders) generally choose a reasonable value for properties that you do not explicitly set. For examples, if you don't call one of the withIdentity(..) methods, TriggerBuilder will generate a random name for your trigger. Similarly, if you don’t call startAt(..), then the current time (immediately) is assumed.</div></td></tr></table></div><div id="ww3_9_11_9_3_16_10" class="Section_Title">Build a trigger for a specific moment in time, with no repeats</div><div id="ww3_9_11_9_3_16_12" class="Preformatted">  SimpleTrigger trigger = (SimpleTrigger) newTrigger()  <br>    .withIdentity("trigger1", "group1") <br>    .startAt(myStartTime) // some Date  <br>    .forJob("job1", "group1") // identify job with name, group strings <br>    .build();</div><div id="ww3_9_11_9_3_16_14" class="Section_Title">Build a trigger for a specific moment in time, then repeating every ten seconds ten times:</div><div id="ww3_9_11_9_3_16_16" class="Preformatted">  trigger = newTrigger() <br>    .withIdentity("trigger3", "group1") <br>    .startAt(myTimeToStartFiring)  // if a start time is not given (if this line <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;// were omitted), "now" is implied <br>    .withSchedule(simpleSchedule() <br>        .withIntervalInSeconds(10) <br>        .withRepeatCount(10)) // note that 10 repeats will give a total of <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;// 11 firings <br>    .forJob(myJob) // identify job with handle to its JobDetail itself                    <br>    .build();</div><div id="ww3_9_11_9_3_16_18" class="Section_Title">Build a trigger that will fire once, five minutes in the future</div><div id="ww3_9_11_9_3_16_20" class="Preformatted">  trigger = (SimpleTrigger) newTrigger()  <br>    .withIdentity("trigger5", "group1") <br>    .startAt(futureDate(5, IntervalUnit.MINUTE)) // use DateBuilder to create <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;// a date in the future <br>    .forJob(myJobKey) // identify job with its JobKey <br>    .build();</div><div id="ww3_9_11_9_3_16_22" class="Section_Title">Build a trigger that will fire now, then repeat every five minutes, until the hour 22:00</div><div id="ww3_9_11_9_3_16_24" class="Preformatted">  trigger = newTrigger() <br>    .withIdentity("trigger7", "group1") <br>    .withSchedule(simpleSchedule() <br>        .withIntervalInMinutes(5) <br>        .repeatForever()) <br>    .endAt(dateOf(22, 0, 0)) <br>    .build();</div><div id="ww3_9_11_9_3_16_26" class="Section_Title">Build a trigger that will fire at the top of the next hour, then repeat every 2 hours, forever</div><div id="ww3_9_11_9_3_16_28" class="Preformatted">  trigger = newTrigger() <br>    .withIdentity("trigger8") // because group is not specified, "trigger8" <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;// will be in the default group <br>    .startAt(evenHourDate(null)) // get the next even-hour (minutes and <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;// seconds zero ("00:00")) <br>    .withSchedule(simpleSchedule() <br>        .withIntervalInHours(2) <br>        .repeatForever()) <br>    // note that in this example, 'forJob(..)' is not called  <br>    //  - which is valid if the trigger is passed to the scheduler along with the job   <br>    .build(); <br>             <br>    scheduler.scheduleJob(trigger, job);</div><div id="ww3_9_11_9_3_18_2" class="Section_Title">SimpleTrigger Misfire Instructions</div><div id="ww3_9_11_9_3_18_4" class="Body">SimpleTrigger has several instructions that can be used to inform Quartz what it should do when a misfire occurs. (For information about misfires, see the About Triggers topic.) These instructions are defined as constants on SimpleTrigger itself (including Javadoc that describes their behavior). These constants include:</div><div id="ww3_9_11_9_3_18_6" class="Preformatted">MISFIRE_INSTRUCTION_IGNORE_MISFIRE_POLICY <br>MISFIRE_INSTRUCTION_FIRE_NOW <br>MISFIRE_INSTRUCTION_RESCHEDULE_NOW_WITH_EXISTING_REPEAT_COUNT <br>MISFIRE_INSTRUCTION_RESCHEDULE_NOW_WITH_REMAINING_REPEAT_COUNT <br>MISFIRE_INSTRUCTION_RESCHEDULE_NEXT_WITH_REMAINING_COUNT <br>MISFIRE_INSTRUCTION_RESCHEDULE_NEXT_WITH_EXISTING_COUNT</div><div id="ww3_9_11_9_3_18_8" class="Body">All triggers have the MISFIRE_INSTRUCTION_SMART_POLICY instruction available for use, and this instruction is the default for all trigger types.</div><div id="ww3_9_11_9_3_18_10" class="Body">If the 'smart policy' instruction is used, SimpleTrigger dynamically chooses between its various misfile instructions, based on the configuration and state of the given SimpleTrigger instance. The Javadoc for the SimpleTrigger.updateAfterMisfire() method explains the details of this dynamic behavior.</div><div id="ww3_9_11_9_3_18_12" class="Body">When building SimpleTriggers, you specify the misfire instruction as part of the simple schedule (via SimpleSchedulerBuilder):</div><div id="ww3_9_11_9_3_18_14" class="Preformatted">  trigger = newTrigger() <br>    .withIdentity("trigger7", "group1") <br>    .withSchedule(simpleSchedule() <br>        .withIntervalInMinutes(5) <br>        .repeatForever() <br>        .withMisfireHandlingInstructionNextWithExistingCount()) <br>    .build();</div><footer><!-- Related Topics --><!--                --><!-- Back to Top --><!--             --><!-- Disqus --><!--        --><!-- Google Translation --><!--                    --><br></footer><div><div style="font-family: Arial, Verdana, Helvetica, Sans-Serif; font-size: 11px; margin-top: 20px; margin-bottom: 20px;"><span class="xref"><a href="http://documentation.softwareag.com/legal/" target="external_window">Copyright © <span>2010</span><span>-2016</span><span></span><span></span> Software AG, Darmstadt, Germany</a></span>.</div><hr></div><div style="font-family: Arial, Verdana, Helvetica, Sans-Serif; font-size: 13px; font-weight: bold; margin-top: 20px;"><span><img style="vertical-align:middle" src="../connect/quartz_online.png" alt="Product Logo"><!--	     <a href="https://empower.softwareag.com/ContactSupport/default.asp" target="_blank" >Contact&#160;Support</a> --><!--         &#160;&#160;|&#160;&#160;  --><!--         <a href="http://www.softwareag.com/corporate/community/default.asp" target="_blank" >Community</a>  --><!--         &#160;&#160;  -->
          |&nbsp;&nbsp;
        <a href="mailto://documentation@softwareag.com" target="_blank">Feedback&nbsp;&nbsp;</a></span></div></body></html>