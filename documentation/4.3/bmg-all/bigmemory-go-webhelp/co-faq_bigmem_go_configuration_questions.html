<!DOCTYPE html ><html xml:lang="en" lang="en" xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html;charset=utf-8"><meta http-equiv="Content-Style-Type" content="text/css"><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"><meta http-equiv="X-UA-Compatible" content="IE=edge"><title>Configuration Questions</title><link rel="Prev" href="co-faq_bigmem_go_general_questions.html" title="Previous"><link rel="Next" href="co-faq_bigmem_go_operations_questions.html" title="Next"><link rel="StyleSheet" href="css/aaa_bigmem_go_all.css" type="text/css" media="all"><link rel="StyleSheet" href="css/skin.css" type="text/css" media="all"><link rel="StyleSheet" href="css/social.css" type="text/css" media="all"><link rel="StyleSheet" href="css/webworks.css" type="text/css" media="all"><!--[if IE 7]><link rel="StyleSheet" href="css/aaa_bigmem_go_all_IE7.css" type="text/css" media="all"><![endif]--><link rel="StyleSheet" href="css/print.css" type="text/css" media="print"><script type="text/javascript">
    'use strict';

    var redirect_url, page_hash;

    if (window === window.top) {
        // Redirect
        //
        redirect_url = "../index.html#page/bigmemory-go-webhelp/co-faq_bigmem_go_configuration_questions.html";
        if (window.document.location.hash.length > 1) {
            // Sanitize and append it
            //
            page_hash = window.document.location.hash.substring(1);
            page_hash = page_hash.replace(/[\\><:;"]|%5C|%3C|%3E|%3A|%3B|%22/gi, '');
            redirect_url += '#' + page_hash;
        }
        window.document.location.replace(redirect_url);
    }
</script><script type="text/javascript" src="scripts/common.js"></script><script type="text/javascript" src="scripts/page.js"></script><script type="text/javascript" src="scripts/search-client.js"></script><script type="text/javascript" src="scripts/unidata.js"></script><script type="text/javascript" src="scripts/unibreak.js"></script></head><body id="prqdkua4BF_002baKVSm9C_002f_002bOwg" class="ww_skin_page_body" onload="Page.OnLoad('../index.html#page/bigmemory-go-webhelp/co-faq_bigmem_go_configuration_questions.html');"><header id="wwconnect_header"><div class="ww_skin_breadcrumbs"><span class="ww_skin_breadcrumbs_parent"><a href="../bigmemory-go-webhelp/to-title_bigmemory_go_faq.html#wwconnect_header">FAQ</a></span><span class="ww_skin_breadcrumbs_divider"> : </span><span class="ww_skin_breadcrumbs_current">Configuration Questions</span></div><div class="ww_skin_page_toolbar"></div></header><div id="ww3_19_8_1" class="Heading_1">Configuration Questions</div><div id="ww3_19_8_3_2_2" class="Section_Title">Where is the source code?</div><div id="ww3_19_8_3_2_4" class="Body">BigMemory Go is not an open-source product. See  for an open-source caching project.</div><div id="ww3_19_8_3_4_2" class="Section_Title">Can you use more than one instance of BigMemory Go in a single JVM?</div><div id="ww3_19_8_3_4_4" class="Body">Yes. Create a CacheManager using <span class="codeph">new CacheManager(...)</span> and keep hold of the reference. The singleton approach, accessible with the <span class="codeph">getInstance(...)</span> method, is still available too. However, hundreds of caches can be supported with one CacheManager, so use separate CacheManagers where different configurations are needed. The Hibernate Provider has also been updated to support this behavior.</div><div id="ww3_19_8_3_6_2" class="Section_Title">What elements are mandatory in <span class="filepath">ehcache.xml</span>?</div><div id="ww3_19_8_3_6_4" class="Body">See the file <span class="filepath">ehcache.xsd</span> in the BigMemory Go kit for the latest information on required configuration elements.</div><div id="ww3_19_8_3_8_2" class="Section_Title">How is auto-versioning of elements handled?</div><div id="ww3_19_8_3_8_4" class="Body">Automatic element versioning works only with memory-store caches only. BigMemory Go does not use auto-versioning.</div><div id="ww3_19_8_3_8_6" class="Body">To enable auto-versioning, set the system property <span class="codeph">net.sf.ehcache.element.version.auto</span> to true (it is false by default). Manual (user provided) versioning of cache elements is ignored when auto-versioning is in effect. Note that if this property is turned on for one of the ineligible caches, auto-versioning will silently fail.</div><div id="ww3_19_8_3_10_2" class="Section_Title">How do I get a memory-only store to persist to disk between JVM restarts?</div><div id="ww3_19_8_3_10_4" class="Body">BigMemory Go offers fast, robust disk persistence set through configuration. For details, see the FRS description at About Fast Restart (FRS) in the <span class="Citation">BigMemory Go Configuration Guide</span>.</div><div id="ww3_19_8_3_12_2" class="Section_Title">What is the recommended way to write to a database?</div><div id="ww3_19_8_3_12_4" class="Body">There are two patterns available: write-through and write-behind caching. In write-through caching, writes to the cache cause writes to an underlying resource. The cache acts as a facade to the underlying resource. With this pattern, it often makes sense to read through the cache too. Write-behind caching uses the same client API; however, the write happens asynchronously. For details, see <span class="local"><a href="../bigmemory-go-webhelp/co-write_about_write_through_behind.html#wwconnect_header" title="About Write-Through and Write-Behind Caches">About Write-Through and Write-Behind Caches</a></span> in the <span class="Citation">BigMemory Go Developer Guide</span>.</div><div id="ww3_19_8_3_12_6" class="Body">While file systems or a web-service clients can underlie the facade of a write-through cache, the most common underlying resource is a database.</div><div id="ww3_19_8_3_14_2" class="Section_Title">Can I use BigMemory Go as a memory store only?</div><div id="ww3_19_8_3_14_4" class="Body">Yes. Just set the persistence strategy (in the &lt;cache&gt; configuration element) to "none":</div><div id="ww3_19_8_3_14_6" class="Preformatted">&lt;cache&gt; <br>  ... <br>  &lt;persistence strategy="none"/&gt; <br>  ... <br>&lt;/cache&gt;</div><div id="ww3_19_8_3_16_2" class="Section_Title">Can I use BigMemory Go as a disk store only?</div><div id="ww3_19_8_3_16_4" class="Body">No. However, you can minimize the usage of memory using sizing configuration. For details, see <span class="local"><a href="../bigmemory-go-webhelp/to-size_sizing_storage_tiers.html#wwconnect_header" title="Sizing Storage Tiers">Sizing Storage Tiers</a></span> in the <span class="Citation">BigMemory Go Configuration Guide</span>.</div><div id="ww3_19_8_3_18_2" class="Section_Title">Is it thread-safe to modify element values after retrieval from a store?</div><div id="ww3_19_8_3_18_4" class="Body">Remember that a value in an element is globally accessible from multiple threads. It is inherently not thread-safe to modify the value. It is safer to retrieve a value, delete the element and then reinsert the value.</div><div id="ww3_19_8_3_18_6" class="Body">The UpdatingCacheEntryFactory does work by modifying the contents of values in place in the cache. This is outside of the core of BigMemory Go and is targeted at high performance CacheEntryFactories for SelfPopulatingCaches. For details, see the Ehcache Javadoc at <span class="external"><a href="http://ehcache.org/apidocs/2.10.1/net/sf/ehcache/Cache.html#getQuiet%28java.io.Serializable%29" target="external_window">http://ehcache.org/apidocs/2.10.1/net/sf/ehcache/Cache.html#getQuiet%28java.io.Serializable%29</a></span>.</div><div id="ww3_19_8_3_20_2" class="Section_Title">Can non-serializable objects be stored?</div><div id="ww3_19_8_3_20_4" class="Body">Non-serializable object can be stored only in the BigMemory Go memory store (heap). If an attempt is made to overflow a non-serializable element to the BigMemory Go off-heap or disk stores, the element is removed and a warning is logged.</div><div id="ww3_19_8_3_22_2" class="Section_Title">What is the difference between TTL, TTI, and eternal?</div><div id="ww3_19_8_3_22_4" class="Body">These three configuration attributes can be used to design effective data lifetimes. Their assigned values should be tested and tuned to help optimize performance. <span class="codeph">timeToIdleSeconds</span> (TTI) is the maximum number of seconds that an element can exist in the store without being accessed, while <span class="codeph">timeToLiveSeconds</span> (TTL) is the maximum number of seconds that an element can exist in the store whether or not is has been accessed. If the <span class="codeph">eternal</span> flag is set, elements are allowed to exist in the store eternally and none are evicted. The eternal setting overrides any TTI or TTL settings. For details, see <span class="local"><a href="../bigmemory-go-webhelp/to-life_managing_data_life.html#wwconnect_header" title="Managing Data Life">Managing Data Life</a></span> in the <span class="Citation">BigMemory Go Configuration Guide</span>.</div><div id="ww3_19_8_3_22_6" class="Body">These attributes are set in the configuration file per cache. To set them per element, you must do so programmatically. For information, see the Javadoc for the Element class at <span class="external"><a href="http://ehcache.org/apidocs/2.10.1/net/sf/ehcache/Element" target="external_window">http://ehcache.org/apidocs/2.10.1/net/sf/ehcache/Element</a></span>.</div><div id="ww3_19_8_3_24_2" class="Section_Title">If null values are stored in the cache, how can my code tell the difference between "intentional" nulls and non-existent entries?</div><div id="ww3_19_8_3_24_4" class="Body">Your application is querying the database excessively only to find that there is no result. Since there is no result, there is nothing to cache. To prevent the query from being executed unnecessarily, cache a null value, signaling that a particular key doesn't exist.</div><div id="ww3_19_8_3_24_6" class="Body">In code, checking for intentional nulls versus non-existent cache entries may look like:</div><div id="ww3_19_8_3_24_8" class="Preformatted">// cache an explicit null value: <br>cache.put(new Element("key", null)); <br>Element element = cache.get("key"); <br>if (element == null) { <br>  // nothing in the cache for "key" (or expired) ... <br>} else { <br>  // there is a valid element in the cache, however getObjectValue() may be null: <br>  Object value = element.getObjectValue(); <br>  if (value == null) { <br>    // a null value is in the cache ... <br>  } else { <br>    // a non-null value is in the cache ... <br>  } <br>}</div><div id="ww3_19_8_3_24_10" class="Body">The cache configuration in <span class="filepath">ehcache.xml</span> may look similar to the following:</div><div id="ww3_19_8_3_24_12" class="Preformatted">&lt;cache <br>  name="some.cache.name" <br>  maxEntriesLocalHeap="10000" <br>  eternal="false" <br>  timeToIdleSeconds="300" <br>  timeToLiveSeconds="600" <br>/&gt;</div><div id="ww3_19_8_3_24_14" class="Body">Use a finite timeToLiveSeconds setting to force an occasional update.</div><div id="ww3_19_8_3_26_2" class="Section_Title">How many threads does BigMemory Go use, and how much memory does that consume?</div><div id="ww3_19_8_3_26_4" class="Body">The amount of memory consumed per thread is determined by the Stack Size. This is set using -Xss.</div><div id="ww3_19_8_3_28_2" class="Section_Title">What happens when maxEntriesLocalHeap is reached? Are the oldest items expired when new ones come in?</div><div id="ww3_19_8_3_28_4" class="Body">When the maximum number of elements in memory is reached, the Least Recently Used (LRU) element is removed. "Used" in this case means inserted with a <span class="apiname">put</span> or accessed with a <span class="apiname">get</span>. The LRU element is flushed asynchronously to the off-heap store.</div><div id="ww3_19_8_3_30_2" class="Section_Title">Why is there an expiry thread for the disk store but not for the other stores?</div><div id="ww3_19_8_3_30_4" class="Body">Because the in-memory data is allowed a fixed maximum number of elements or bytes, it will have a maximum memory use equal to the number of elements multiplied by the average size. When an element is added beyond the maximum size, the LRU element gets flushed to the disk store. Running an expiry thread in memory turns out to be a very expensive operation and potentially contentious. It is far more efficient to only check expiry when need rather than explicitly search for it. The tradeoff is higher average memory use.</div><div id="ww3_19_8_3_30_6" class="Body">The disk-store expiry thread keeps the disk clean. There is hopefully less contention for the disk store's locks because commonly used values are in memory. If you are concerned about CPU utilization and locking in the disk store, you can set the diskExpiryThreadIntervalSeconds to a high number, such as 1 day. Or, you can effectively turn it off by setting the diskExpiryThreadIntervalSeconds to a very large value.</div><div id="ww3_19_8_3_32_2" class="Section_Title">What eviction strategies are supported?</div><div id="ww3_19_8_3_32_4" class="Body">LRU, LFU and FIFO eviction strategies are supported.</div><div id="ww3_19_8_3_34_2" class="Section_Title">How does element equality work in serialization mode?</div><div id="ww3_19_8_3_34_4" class="Body">An element (key and value) in BigMemory is guaranteed to <span class="apiname">.equals()</span> another as it moves between stores.</div><div id="ww3_19_8_3_36_2" class="Section_Title">Can you use BigMemory Go as a second-level cache in Hibernate and BigMemory Go outside of Hibernate at the same time?</div><div id="ww3_19_8_3_36_4" class="Body">Yes. You use one instance of BigMemory Go with one ehcache.xml. You configure your caches with Hibernate names for use by Hibernate. You can have other caches which you interact with directly, outside of Hibernate.</div><footer><!-- Related Topics --><!--                --><!-- Back to Top --><!--             --><!-- Disqus --><!--        --><!-- Google Translation --><!--                    --><br></footer><div><div style="font-family: Arial, Verdana, Helvetica, Sans-Serif; font-size: 11px; margin-top: 20px; margin-bottom: 20px;"><span class="xref"><a href="http://documentation.softwareag.com/legal/" target="external_window">Copyright © <span>2010</span><span>-2016</span><span></span><span></span> Software AG, Darmstadt, Germany</a></span>.</div><hr></div><div style="font-family: Arial, Verdana, Helvetica, Sans-Serif; font-size: 13px; font-weight: bold; margin-top: 20px;"><span><img style="vertical-align:middle" src="../connect/terracotta_online.png" alt="Product Logo"><a href="https://empower.softwareag.com/ContactSupport/default.asp" target="_blank">Contact&nbsp;Support</a>
         &nbsp;&nbsp;|&nbsp;&nbsp;
       <a href="http://www.softwareag.com/corporate/community/default.asp" target="_blank">Community</a>
         &nbsp;&nbsp;|&nbsp;&nbsp;
       <a href="mailto://documentation@softwareag.com" target="_blank">Feedback&nbsp;&nbsp;</a></span></div></body></html>