<!DOCTYPE html ><html xml:lang="en" lang="en" xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html;charset=utf-8"><meta http-equiv="Content-Style-Type" content="text/css"><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"><meta http-equiv="X-UA-Compatible" content="IE=edge"><title>Pooling Resources Versus Sizing Individual Data Sets</title><link rel="Prev" href="co-size_sizing_attributes.html" title="Previous"><link rel="Next" href="co-size_sizing_examples.html" title="Next"><link rel="StyleSheet" href="css/aaa_bigmem_go_all.css" type="text/css" media="all"><link rel="StyleSheet" href="css/skin.css" type="text/css" media="all"><link rel="StyleSheet" href="css/social.css" type="text/css" media="all"><link rel="StyleSheet" href="css/webworks.css" type="text/css" media="all"><!--[if IE 7]><link rel="StyleSheet" href="css/aaa_bigmem_go_all_IE7.css" type="text/css" media="all"><![endif]--><link rel="StyleSheet" href="css/print.css" type="text/css" media="print"><script type="text/javascript">
    'use strict';

    var redirect_url, page_hash;

    if (window === window.top) {
        // Redirect
        //
        redirect_url = "../index.html#page/bigmemory-go-webhelp/co-size_pooling_resources.html";
        if (window.document.location.hash.length > 1) {
            // Sanitize and append it
            //
            page_hash = window.document.location.hash.substring(1);
            page_hash = page_hash.replace(/[\\><:;"]|%5C|%3C|%3E|%3A|%3B|%22/gi, '');
            redirect_url += '#' + page_hash;
        }
        window.document.location.replace(redirect_url);
    }
</script><script type="text/javascript" src="scripts/common.js"></script><script type="text/javascript" src="scripts/page.js"></script><script type="text/javascript" src="scripts/search-client.js"></script><script type="text/javascript" src="scripts/unidata.js"></script><script type="text/javascript" src="scripts/unibreak.js"></script></head><body id="pN_002fvxtEUzVvp_002bIpoE7IGavJw" class="ww_skin_page_body" onload="Page.OnLoad('../index.html#page/bigmemory-go-webhelp/co-size_pooling_resources.html');"><header id="wwconnect_header"><div class="ww_skin_breadcrumbs"><span class="ww_skin_breadcrumbs_parent"><a href="../bigmemory-go-webhelp/to-title_product_documentation.html#wwconnect_header">Product Documentation</a></span><span class="ww_skin_breadcrumbs_divider"> : </span><span class="ww_skin_breadcrumbs_parent"><a href="../bigmemory-go-webhelp/to-title_bigmemory_go_config_guide.html#wwconnect_header">BigMemory Go Configuration Guide</a></span><span class="ww_skin_breadcrumbs_divider"> : </span><span class="ww_skin_breadcrumbs_parent"><a href="../bigmemory-go-webhelp/to-size_sizing_storage_tiers.html#wwconnect_header">Sizing Storage Tiers</a></span><span class="ww_skin_breadcrumbs_divider"> : </span><span class="ww_skin_breadcrumbs_current">Pooling Resources Versus Sizing Individual Data Sets</span></div><div class="ww_skin_page_toolbar"></div></header><div id="ww3_15_10_11_8_1" class="Heading_3">Pooling Resources Versus Sizing Individual <span class="ph">Data Sets</span></div><div id="ww3_15_10_11_8_3_2_2" class="Body"> You can constrain the size of any data set on a specific tier in that data set's configuration. You can also constrain the size of all of a CacheManager's data sets in a specific tier by configuring an overall size at the CacheManager level.</div><div id="ww3_15_10_11_8_3_2_4" class="Body">If there is no CacheManager-level pool specified for a tier, an individual data set claims the amount of that tier specified in its configuration. If there is a CacheManager-level pool specified for a tier, an individual data set claims that amount <span class="emphasis">from the pool</span>. In this case, data sets with no size configuration for that tier receive an equal share of the remainder of the pool (after data sets with explicit sizing configuration have claimed their portion).</div><div id="ww3_15_10_11_8_3_2_6" class="Body">For example, if a CacheManager with eight data sets pools one gigabyte of heap, and two data sets each explicitly specify 200MB of heap while the remaining data sets do not specify a size, the remaining data sets will share 600MB of heap equally. Note that data sets must use bytes-based attributes to claim a portion of a pool; entries-based attributes such as <span class="parmname">maxEntriesLocal</span> cannot be used with a pool.</div><div id="ww3_15_10_11_8_3_2_8" class="Body">On startup, the sizes specified by data sets are checked to ensure that any CacheManager-level pools are not over-allocated. If over-allocation occurs for any pool, an InvalidConfigurationException is thrown. Note that percentages should not add up to more than 100% of a single pool.</div><div id="ww3_15_10_11_8_3_2_10" class="Body">If the sizes specified by data sets for any tier take exactly the entire CacheManager-level pool specified for that tier, a warning is logged. In this case, data sets that do not specify a size for that tier cannot use the tier, as nothing is left over.</div><div id="ww3_15_10_11_8_3_4_2" class="Section_Title">Memory Store (Heap)</div><div id="ww3_15_10_11_8_3_4_4" class="Body">A size must be provided for the heap, either in the CacheManager (<span class="parmname">maxBytesLocalHeap</span> only) or in each individual cache (<span class="parmname">maxBytesLocalHeap</span> or <span class="parmname">maxEntriesLocalHeap</span>). Not doing so causes an InvalidConfigurationException.</div><div id="ww3_15_10_11_8_3_4_6" class="Body">If a pool is configured, it can be combined with a heap setting in an individual cache. This allows the cache to claim a specified portion of the heap setting configured in the pool. However, in this case the cache setting must use <span class="parmname">maxBytesLocalHeap</span> (same as the CacheManager).</div><div id="ww3_15_10_11_8_3_4_8" class="Body">In any case, every cache <span class="emphasis">must</span> have a heap setting, either configured explicitly or taken from the pool configured in the CacheManager.</div><div id="ww3_15_10_11_8_3_6_2" class="Section_Title">Off-Heap Store</div><div id="ww3_15_10_11_8_3_6_4" class="Body">Off-heap sizing can be configured in bytes only, never by entries.</div><div id="ww3_15_10_11_8_3_6_6" class="Body">If a CacheManager has a pool configured for off-heap, your application cannot add caches dynamically that have off-heap configuration — doing so generates an error. In addition, if any caches that used the pool are removed programmatically or through the Terracotta Management Console (TMC), other caches in the pool cannot claim the unused portion. To allot the entire off-heap pool to the remaining caches, remove the unwanted cache from the Ehcache configuration and then reload the configuration.</div><div id="ww3_15_10_11_8_3_6_8" class="Body">To use off-heap as a data tier, a cache must have <span class="parmname">overflowToOffHeap</span> set to "true". If a CacheManager has a pool configured for using off-heap, the <span class="parmname">overflowToOffHeap</span> attribute is automatically set to "true" for all caches. In this case, you can prevent a specific cache from overflowing to off-heap by explicitly setting its <span class="parmname">overflowToOffHeap</span> attribute to "false".</div><div id="ww3_15_10_11_8_3_6_10" class="Body">Note that an exception is thrown if any cache using an off-heap store attempts to put an element that will cause the off-heap store to exceed its allotted size. The exception will contain a message similar to the following:</div><div id="ww3_15_10_11_8_3_6_12" class="Preformatted">The element '[ key = 25274, value=[B@3ebb2a91, version=1, hitCount=0, <br>CreationTime = 1367966069431, LastAccessTime = 1367966069431 ]' <br>is too large to be stored in this offheap store.</div><div id="ww3_15_10_11_8_3_8_2" class="Section_Title">Local Disk Store</div><div id="ww3_15_10_11_8_3_8_4" class="Body">The local disk can be used as a data tier, either for temporary storage or for disk persistence, but not both at once.</div><div id="ww3_15_10_11_8_3_8_6" class="Body">To use the disk as a temporary tier during BigMemory operation, set the <span class="parmname">persistenceStrategy</span> to "localTempSwap", and use the <span class="parmname">maxBytesLocalDisk</span> setting to configure the size of this tier. For more information about using the disk as a temporary tier, see <span class="heading-page"><a href="../bigmemory-go-webhelp/co-tiers_configuring_disk_store.html#wwconnect_header" title="Configuring Disk Store">Configuring Disk Store</a></span>.</div><div id="ww3_15_10_11_8_3_8_8" class="Body">For information about using the disk store for data persistence, see <span class="heading-page"><a href="../bigmemory-go-webhelp/co-fast_data_persistence_implementation.html#wwconnect_header" title="Data Persistence Implementation">Data Persistence Implementation</a></span>.</div><footer><!-- Related Topics --><!--                --><!-- Back to Top --><!--             --><!-- Disqus --><!--        --><!-- Google Translation --><!--                    --><br></footer><div><div style="font-family: Arial, Verdana, Helvetica, Sans-Serif; font-size: 11px; margin-top: 20px; margin-bottom: 20px;"><span class="xref"><a href="http://documentation.softwareag.com/legal/" target="external_window">Copyright © <span>2010</span><span>-2016</span><span></span><span></span> Software AG, Darmstadt, Germany</a></span>.</div><hr></div><div style="font-family: Arial, Verdana, Helvetica, Sans-Serif; font-size: 13px; font-weight: bold; margin-top: 20px;"><span><img style="vertical-align:middle" src="../connect/terracotta_online.png" alt="Product Logo"><a href="https://empower.softwareag.com/ContactSupport/default.asp" target="_blank">Contact&nbsp;Support</a>
         &nbsp;&nbsp;|&nbsp;&nbsp;
       <a href="http://www.softwareag.com/corporate/community/default.asp" target="_blank">Community</a>
         &nbsp;&nbsp;|&nbsp;&nbsp;
       <a href="mailto://documentation@softwareag.com" target="_blank">Feedback&nbsp;&nbsp;</a></span></div></body></html>