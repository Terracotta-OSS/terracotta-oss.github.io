<!DOCTYPE html ><html xml:lang="en" lang="en" xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html;charset=utf-8"><meta http-equiv="Content-Style-Type" content="text/css"><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"><meta http-equiv="X-UA-Compatible" content="IE=edge"><title>Automatic Recovery Scenarios</title><link rel="Prev" href="co-admin_overview_fault_recovery.html" title="Previous"><link rel="Next" href="co-admin_manual_recovery.html" title="Next"><link rel="StyleSheet" href="css/aaa_bigmem_max_all.css" type="text/css" media="all"><link rel="StyleSheet" href="css/skin.css" type="text/css" media="all"><link rel="StyleSheet" href="css/social.css" type="text/css" media="all"><link rel="StyleSheet" href="css/webworks.css" type="text/css" media="all"><!--[if IE 7]><link rel="StyleSheet" href="css/aaa_bigmem_max_all_IE7.css" type="text/css" media="all"><![endif]--><link rel="StyleSheet" href="css/print.css" type="text/css" media="print"><script type="text/javascript">
    'use strict';

    var redirect_url, page_hash;

    if (window === window.top) {
        // Redirect
        //
        redirect_url = "../index.html#page/bigmemory-max-webhelp/co-admin_automatic_recovery.html";
        if (window.document.location.hash.length > 1) {
            // Sanitize and append it
            //
            page_hash = window.document.location.hash.substring(1);
            page_hash = page_hash.replace(/[\\><:;"]|%5C|%3C|%3E|%3A|%3B|%22/gi, '');
            redirect_url += '#' + page_hash;
        }
        window.document.location.replace(redirect_url);
    }
</script><script type="text/javascript" src="scripts/common.js"></script><script type="text/javascript" src="scripts/page.js"></script><script type="text/javascript" src="scripts/search-client.js"></script><script type="text/javascript" src="scripts/unidata.js"></script><script type="text/javascript" src="scripts/unibreak.js"></script></head><body id="pdJuKGdQGiSXKquzTdu3xxQ" class="ww_skin_page_body" onload="Page.OnLoad('../index.html#page/bigmemory-max-webhelp/co-admin_automatic_recovery.html');"><header id="wwconnect_header"><div class="ww_skin_breadcrumbs"><span class="ww_skin_breadcrumbs_parent"><a href="../bigmemory-max-webhelp/to-title_component_documentation.html#wwconnect_header">Component Documentation</a></span><span class="ww_skin_breadcrumbs_divider"> : </span><span class="ww_skin_breadcrumbs_parent"><a href="../bigmemory-max-webhelp/to-title_wan_replication_guide.html#wwconnect_header">WAN Replication User Guide</a></span><span class="ww_skin_breadcrumbs_divider"> : </span><span class="ww_skin_breadcrumbs_parent"><a href="../bigmemory-max-webhelp/to-admin_managing_wan_replication.html#wwconnect_header">Administering WAN Replication</a></span><span class="ww_skin_breadcrumbs_divider"> : </span><span class="ww_skin_breadcrumbs_parent"><a href="../bigmemory-max-webhelp/co-admin_about_fault_tolerance_and_recovery.html#wwconnect_header">About Fault Tolerance and Recovery</a></span><span class="ww_skin_breadcrumbs_divider"> : </span><span class="ww_skin_breadcrumbs_current">Automatic Recovery Scenarios</span></div><div class="ww_skin_page_toolbar"></div></header><div id="ww3_21_10_13_12_8_1" class="Heading_4">Automatic Recovery Scenarios</div><div id="ww3_21_10_13_12_8_3_2_2" class="Section_Title">Orchestrator Failover</div><div id="ww3_21_10_13_12_8_3_2_4" class="Body">It is recommended to run multiple Orchestrators in a region, either on the same machine or rack, or in different racks to ensure availability. Although only one master Orchestrator is mandatory, you can start one or more standby Orchestrators at any time during application run time to provide failover protection.</div><div id="ww3_21_10_13_12_8_3_2_6" class="Body">Standby Orchestrators are passive, so running extra Orchestrator processes will have minimal runtime impact. Upon failure, the other regions will look for the next available Orchestrator and resume replication.</div><div class="ww_skin_page_overflow"><table class="note1" summary=""><tr><td class="Table_Cell" style="padding-right: 6px; vertical-align: top"><div id="ww3_21_10_13_12_8_3_2_8_1_3_1_1_1" class="Note"><span style="font-weight: bold">Note:  </span>&nbsp;</div></td><td class="Table_Cell" style="padding-right: 6px; vertical-align: top"><div id="ww3_21_10_13_12_8_3_2_8_1_3_1_2" class="Table_Cell">The failover process for a Replica Orchestrator is not done in the same fault-tolerant manner as for failover of a Master Orchestrator. Once the standby Replica Orchestrator takes over, it re-syncs all Replica caches from scratch, then switches to normal replication mode. This behavior can cause some slowness if the Master cache contains a very large number of entries.</div></td></tr></table></div><div id="ww3_21_10_13_12_8_3_4_2" class="Section_Title">Master-Replica Disconnection</div><div id="ww3_21_10_13_12_8_3_4_4" class="Body">When a Master cache fails, control is given to the failover Master (if any) listed in <span class="filepath">wan-config.xml</span>. A Replica cache will not take over as a Master. If there is no failover Master, the Replicas will continue to operate in isolation (i.e., no replication will take place). When the Master re-starts, the behavior of its Replicas is governed by the <span class="codeph">replicaDisconnectBehavior</span> property in <span class="filepath">wan-config.xml</span>. By default, the Replicas will attempt to reconnect to the Master and to the failover Master listed in <span class="filepath">wan-config.xml</span>. Upon reconnection to a Master, the Replicas are deactivated, cleared, resynchronized to the Master cache, and then reactivated. All local changes on the Replica region will be dropped in favor of whatever is in the Master region. (Similarly, even if the Master does not fail but its Replicas become disconnected from their Master, their behavior is also controlled by the <span class="codeph">replicaDisconnectBehavior</span> property.) For more information, refer to <span class="xref"><a href="../bigmemory-max-webhelp/re-setup_orchestrator_config_params.html#wwconnect_header" title="Orchestrator Configuration Parameters">Orchestrator Configuration Parameters</a></span>.</div><div id="ww3_21_10_13_12_8_3_4_6" class="Body">If no failover Master is listed in <span class="filepath">wan-config.xml</span> and the master is lost, the operator has the option to restart a Replica to act as a Master, as described below.</div><div id="ww3_21_10_13_12_8_3_4_8" class="Body">In a bi-directional configuration without a failover Master, you should choose your most important Replica region to take over as the Master because any changes that occurred since the Master failed will be lost in all other regions. To do this, change your <span class="filepath">wan-config.xml</span> to reflect that the Replica is now the Master, and then restart the Replica. It would be a good idea to remove or comment out the old Master in case it comes back.</div><div id="ww3_21_10_13_12_8_3_4_10" class="Body">In a uni-directional configuration without a failover Master, since the "writes" are only performed in one region, you will not lose any changes. You may simply designate that Replica region as the new Master.</div><div id="ww3_21_10_13_12_8_3_6_2" class="Section_Title">TSA Disconnection</div><div id="ww3_21_10_13_12_8_3_6_4" class="Body">Upon any disconnection from its TSA, the Orchestrator deactivates and waits the amount of time specified by the <span class="codeph">l2.l1reconnect.timeout.millis</span> property. This property is described in "Automatic Client Reconnect" in the <span class="Citation">BigMemory Max High-Availability Guide</span>.</div><div id="ww3_21_10_13_12_8_3_6-4" class="Section"></div><div id="ww3_21_10_13_12_8_3_6_8" class="Body">When communication between the TSA and the Orchestrator is resumed:</div><div id="ww3_21_10_13_12_8_3_6_10_2" class="List_1"><span class="WebWorks_Number" style="width: 18pt"><span><img src="bullet.gif" alt="*" border="0" width="10" height="10"></span></span>If the downtime was shorter than the configured reconnect timeout, then WAN replication will resume immediately, without the need for any resynchronization.</div><div id="ww3_21_10_13_12_8_3_6_10_4" class="List_1"><span class="WebWorks_Number" style="width: 18pt"><span><img src="bullet.gif" alt="*" border="0" width="10" height="10"></span></span>If the downtime exceeded the configured reconnect timeout, then the Orchestrator will resynchronize all of its Master caches, and subsequently those Master caches will resynchronize all of their Replica caches.</div><footer><!-- Related Topics --><!--                --><!-- Back to Top --><!--             --><!-- Disqus --><!--        --><!-- Google Translation --><!--                    --><br></footer><div><div style="font-family: Arial, Verdana, Helvetica, Sans-Serif; font-size: 11px; margin-top: 20px; margin-bottom: 20px;"><span class="xref"><a href="http://documentation.softwareag.com/legal/" target="external_window">Copyright Â© <span>2010</span><span>-2016</span><span></span><span></span> Software AG, Darmstadt, Germany</a></span>.</div><hr></div><div style="font-family: Arial, Verdana, Helvetica, Sans-Serif; font-size: 13px; font-weight: bold; margin-top: 20px;"><span><img style="vertical-align:middle" src="../connect/terracotta_online.png" alt="Product Logo"><a href="https://empower.softwareag.com/ContactSupport/default.asp" target="_blank">Contact&nbsp;Support</a>
         &nbsp;&nbsp;|&nbsp;&nbsp;
       <a href="http://www.softwareag.com/corporate/community/default.asp" target="_blank">Community</a>
         &nbsp;&nbsp;|&nbsp;&nbsp;
       <a href="mailto://documentation@softwareag.com" target="_blank">Feedback&nbsp;&nbsp;</a></span></div></body></html>