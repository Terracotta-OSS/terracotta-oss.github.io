<!DOCTYPE html ><html xml:lang="en" lang="en" xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html;charset=utf-8"><meta http-equiv="Content-Style-Type" content="text/css"><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"><meta http-equiv="X-UA-Compatible" content="IE=edge"><title>Optional Configuration Attributes</title><link rel="Prev" href="to-use_using_web_sessions.html" title="Previous"><link rel="Next" href="co_use_managing_web_sessions_with_jmx.html" title="Next"><link rel="StyleSheet" href="css/aaa_bigmem_max_all.css" type="text/css" media="all"><link rel="StyleSheet" href="css/skin.css" type="text/css" media="all"><link rel="StyleSheet" href="css/social.css" type="text/css" media="all"><link rel="StyleSheet" href="css/webworks.css" type="text/css" media="all"><!--[if IE 7]><link rel="StyleSheet" href="css/aaa_bigmem_max_all_IE7.css" type="text/css" media="all"><![endif]--><link rel="StyleSheet" href="css/print.css" type="text/css" media="print"><script type="text/javascript">
    'use strict';

    var redirect_url, page_hash;

    if (window === window.top) {
        // Redirect
        //
        redirect_url = "../index.html#page/bigmemory-max-webhelp/re_use_optional_config_attributes.html";
        if (window.document.location.hash.length > 1) {
            // Sanitize and append it
            //
            page_hash = window.document.location.hash.substring(1);
            page_hash = page_hash.replace(/[\\><:;"]|%5C|%3C|%3E|%3A|%3B|%22/gi, '');
            redirect_url += '#' + page_hash;
        }
        window.document.location.replace(redirect_url);
    }
</script><script type="text/javascript" src="scripts/common.js"></script><script type="text/javascript" src="scripts/page.js"></script><script type="text/javascript" src="scripts/search-client.js"></script><script type="text/javascript" src="scripts/unidata.js"></script><script type="text/javascript" src="scripts/unibreak.js"></script></head><body id="ppiitiHc4PrUekTtbrvpjXg" class="ww_skin_page_body" onload="Page.OnLoad('../index.html#page/bigmemory-max-webhelp/re_use_optional_config_attributes.html');"><header id="wwconnect_header"><div class="ww_skin_breadcrumbs"><span class="ww_skin_breadcrumbs_parent"><a href="../bigmemory-max-webhelp/to-title_component_documentation.html#wwconnect_header">Component Documentation</a></span><span class="ww_skin_breadcrumbs_divider"> : </span><span class="ww_skin_breadcrumbs_parent"><a href="../bigmemory-max-webhelp/to-title_web_sessions_user_guide.html#wwconnect_header">Web Sessions User Guide</a></span><span class="ww_skin_breadcrumbs_divider"> : </span><span class="ww_skin_breadcrumbs_parent"><a href="../bigmemory-max-webhelp/to-use_using_web_sessions.html#wwconnect_header">Using Web Sessions</a></span><span class="ww_skin_breadcrumbs_divider"> : </span><span class="ww_skin_breadcrumbs_current">Optional Configuration Attributes</span></div><div class="ww_skin_page_toolbar"></div></header><div id="ww3_21_14_13_6_1" class="Heading_3">Optional Configuration Attributes</div><div id="ww3_21_14_13_6_3_2_2" class="Body">While Terracotta Web Sessions is designed for optimum performance with the configuration you set at installation, in some cases it may be necessary to use the configuration attributes described in the following sections.</div><div id="ww3_21_14_13_6_3_4_2" class="Section_Title">Session Locking</div><div id="ww3_21_14_13_6_3_4_4" class="Body">By default, session locking is off in Terracotta Web Sessions. If your application requires disabling concurrent requests in sessions, you can enable session locking.</div><div id="ww3_21_14_13_6_3_4_6" class="Body">To enable session locking, add an <span class="codeph">&lt;init-param&gt;</span> block as follows:</div><div id="ww3_21_14_13_6_3_4_8" class="Preformatted">&lt;filter&gt;<br>&lt;filter-name&gt;terracotta-filter&lt;/filter-name&gt;<br>&lt;filter-class&gt;org.terracotta.session.TerracottaContainerSpecificSessionFilter&lt;/filter-class&gt;<br>&lt;init-param&gt; &lt;param-name&gt;tcConfigUrl&lt;/param-name&gt;<br>&lt;param-value&gt;localhost:9510&lt;/param-value&gt;<br>&lt;/init-param&gt; &lt;init-param&gt;<br>&lt;param-name&gt;sessionLocking&lt;/param-name&gt;<br>&lt;param-value&gt;true&lt;/param-value&gt; &lt;/init-param&gt;<br>&lt;/filter&gt;</div><div id="ww3_21_14_13_6_3_4_10" class="Body">If you enable session locking, see <span class="Citation">Deadlocks When Session Locking Is Enabled</span> in <span class="heading-page"><a href="../bigmemory-max-webhelp/re_use_common_issues.html#wwconnect_header" title="Common Issues">Common Issues</a></span>.</div><div id="ww3_21_14_13_6_3_6_2" class="Section_Title">Synchronous Writes</div><div id="ww3_21_14_13_6_3_6_4" class="Body">Synchronous write locks provide an extra layer of data protection by having a client node wait until it receives acknowledgement from the Terracotta Server Array that the changes have been committed. The client releases the write lock after receiving the acknowledgement. Note that enabling synchronous write locks <span class="emphasis">can substantially raise latency rates, thus degrading cluster performance</span>.</div><div id="ww3_21_14_13_6_3_6_6" class="Body">To enable synchronous writes, add an <span class="codeph">&lt;init-param&gt;</span> block as follows:</div><div id="ww3_21_14_13_6_3_6_8" class="Preformatted">&lt;filter&gt;<br>&lt;filter-name&gt;terracotta-filter&lt;/filter-name&gt;<br>&lt;filter-class&gt;org.terracotta.session.TerracottaContainerSpecificSessionFilter&lt;/filter-class&gt;<br>&lt;init-param&gt; &lt;param-name&gt;tcConfigUrl&lt;/param-name&gt;<br>&lt;param-value&gt;localhost:9510&lt;/param-value&gt;<br>&lt;/init-param&gt; &lt;init-param&gt;<br>&lt;param-name&gt;synchronousWrite&lt;/param-name&gt;<br>&lt;param-value&gt;true&lt;/param-value&gt; &lt;/init-param&gt;<br>&lt;/filter&gt;</div><div id="ww3_21_14_13_6_3_8_2" class="Section_Title">Sizing Options</div><div id="ww3_21_14_13_6_3_8_4" class="Body">Web Sessions gives you the option to configure both heap and off-heap memory tiers.</div><div id="ww3_21_14_13_6_3_8_6_2_2" class="List_1"><span class="WebWorks_Number" style="width: 18pt"><span><img src="bullet.gif" alt="*" border="0" width="10" height="10"></span></span>Memory store - Heap memory that holds a copy of the hottest subset of data from the off-heap store. Subject to Java garbage collection (GC).</div><div id="ww3_21_14_13_6_3_8_6_2_4" class="List_1"><span class="WebWorks_Number" style="width: 18pt"><span><img src="bullet.gif" alt="*" border="0" width="10" height="10"></span></span>Off-heap store - Limited in size only by available RAM. Not subject to Java GC. Can store serialized data only. Provides overflow capacity to the memory store.</div><div class="ww_skin_page_overflow"><table class="note2" summary=""><tr><td class="Table_Cell" style="padding-right: 6px; vertical-align: top"><div id="ww3_21_14_13_6_3_8_6_2_4_3_1_3_1_2_1" class="Note"><span style="font-weight: bold">Note:  </span>&nbsp;</div></td><td class="Table_Cell" style="padding-right: 6px; vertical-align: top"><div id="ww3_21_14_13_6_3_8_6_2_4_3_1_3_1_3" class="Table_Cell">If using off-heap, see information about allocating direct memory in "Configuring Storage Tiers" in the <span class="Citation">BigMemory Max Configuration Guide</span>.</div></td></tr></table></div><div id="ww3_21_14_13_6_3_8_8" class="Body">To set the sizing attributes, add one or both <span class="codeph">&lt;init-param&gt;</span> blocks to your web.xml as follows:</div><div id="ww3_21_14_13_6_3_8_10" class="Preformatted">&lt;filter&gt;<br>&lt;filter-name&gt;terracotta-filter&lt;/filter-name&gt;<br>&lt;filter-class&gt;org.terracotta.session.TerracottaContainerSpecificSessionFilter&lt;/filter-class&gt;<br>&lt;init-param&gt; &lt;param-name&gt;tcConfigUrl&lt;/param-name&gt;<br>&lt;param-value&gt;localhost:9510&lt;/param-value&gt;<br>&lt;/init-param&gt; &lt;init-param&gt;<br>&lt;param-name&gt;maxBytesOnHeap&lt;/param-name&gt;<br>&lt;param-value&gt;128M&lt;/param-value&gt; &lt;/init-param&gt;<br>&lt;init-param&gt;<br>&lt;param-name&gt;maxBytesOffHeap&lt;/param-name&gt;<br>&lt;param-value&gt;2G&lt;/param-value&gt; &lt;/init-param&gt;<br>&lt;/filter&gt;</div><div id="ww3_21_14_13_6_3_10_2" class="Section_Title">Nonstop and Rejoin Options</div><div id="ww3_21_14_13_6_3_10_4" class="Body">The nonstop timeout is the number of milliseconds an application waits for any cache operation to return before timing out. Nonstop allows certain operations to proceed on clients that have become disconnected from the cluster. One way clients go into nonstop mode is when they receive a "cluster offline" event. Note that a nonstop cache can go into nonstop mode even if the node is not disconnected, such as when a cache operation is unable to complete within the timeout allotted by the nonstop configuration.</div><div id="ww3_21_14_13_6_3_10_6" class="Body">To set the nonstop timeout, add an <span class="codeph">&lt;init-param&gt;</span> block to your <span class="codeph">web.xml</span> as follows:</div><div id="ww3_21_14_13_6_3_10_8" class="Preformatted">&lt;filter&gt;<br>&lt;filter-name&gt;terracotta-filter&lt;/filter-name&gt;<br>&lt;filter-class&gt;org.terracotta.session.TerracottaContainerSpecificSessionFilter&lt;/filter-class&gt;<br>&lt;init-param&gt; &lt;param-name&gt;tcConfigUrl&lt;/param-name&gt;<br>&lt;param-value&gt;localhost:9510&lt;/param-value&gt;<br>&lt;/init-param&gt; &lt;init-param&gt;<br>&lt;param-name&gt;nonStopTimeout&lt;/param-name&gt;<br>&lt;param-value&gt;30000&lt;/param-value&gt; &lt;/init-param&gt;<br>&lt;/filter&gt;</div><div id="ww3_21_14_13_6_3_12_2" class="Section_Title">Tuning Nonstop Timeout</div><div id="ww3_21_14_13_6_3_12_4" class="Body">You can tune the timeout value to fit your environment. The following information provides additional guidance for choosing a <span class="parmname">nonStopTimeout</span> value:</div><div id="ww3_21_14_13_6_3_12_6_2_2" class="List_1"><span class="WebWorks_Number" style="width: 18pt"><span><img src="bullet.gif" alt="*" border="0" width="10" height="10"></span></span>In an environment with regular network interruptions, consider increasing the timeout value to prevent timeouts for most of the interruptions.</div><div id="ww3_21_14_13_6_3_12_6_2_4" class="List_1"><span class="WebWorks_Number" style="width: 18pt"><span><img src="bullet.gif" alt="*" border="0" width="10" height="10"></span></span>In an environment where cache operations can be slow to return and data is required to always be in sync, increase timeout value to prevent frequent timeouts. For example, a locking operation may exceed the nonstop timeout while waiting for a lock. This would trigger nonstop mode only because the lock couldn't be acquired in time. Setting the method's timeout to less than the nonstop timeout avoids this problem.</div><div id="ww3_21_14_13_6_3_12_6_2_6" class="List_1"><span class="WebWorks_Number" style="width: 18pt"><span><img src="bullet.gif" alt="*" border="0" width="10" height="10"></span></span>If a nonstop cache employs bulk loading, be aware that a timeout multiplier may be applied by the bulk-loading method.</div><div id="ww3_21_14_13_6_3_14_2" class="Section_Title">Concurrency</div><div id="ww3_21_14_13_6_3_14_4" class="Body">The concurrency attribute allows you to set the number of segments for the map backing the underlying server store managed by the Terracotta Server Array. If concurrency is not explicitly set (or set to "0"), the system selects an optimized value.</div><div id="ww3_21_14_13_6_3_14_6" class="Body">To configure or tune concurrency, add an <span class="codeph">&lt;init-param&gt;</span> block to your <span class="filepath">web.xml</span> as follows:</div><div id="ww3_21_14_13_6_3_14_8" class="Preformatted">&lt;filter&gt;<br>&lt;filter-name&gt;terracotta-filter&lt;/filter-name&gt;<br>&lt;filter-class&gt;org.terracotta.session.TerracottaContainerSpecificSessionFilter&lt;/filter-class&gt;<br>&lt;init-param&gt; &lt;param-name&gt;tcConfigUrl&lt;/param-name&gt;<br>&lt;param-value&gt;localhost:9510&lt;/param-value&gt;<br>&lt;/init-param&gt; &lt;init-param&gt;<br>&lt;param-name&gt;concurrency&lt;/param-name&gt;<br>&lt;param-value&gt;256&lt;/param-value&gt; &lt;/init-param&gt;<br>&lt;/filter&gt;<br></div><div id="ww3_21_14_13_6_3_16_2" class="Section_Title">Tuning Concurrency</div><div id="ww3_21_14_13_6_3_16_4" class="Body">The server map underlying the Terracotta Server Array contains the data used by clients in the cluster and is segmented to improve performance through added concurrency. Under most circumstances, the concurrency value is optimized by the Terracotta Server Array and does not require tuning.</div><div id="ww3_21_14_13_6_3_16_6" class="Body">If an explicit and fixed segmentation value must be set, use the concurrency attribute, making sure to set an appropriate concurrency value. A too-low concurrency value could cause unexpected eviction of elements. A too-high concurrency value may create many empty segments on the Terracotta Server Array (or many segments holding a few or just one element).</div><div id="ww3_21_14_13_6_3_16_8" class="Body">The following information provides additional guidance for choosing a concurrency value:</div><div id="ww3_21_14_13_6_3_16_10_2_2" class="List_1"><span class="WebWorks_Number" style="width: 18pt"><span><img src="bullet.gif" alt="*" border="0" width="10" height="10"></span></span>In general, the concurrency value should be no less than the number of active servers in the Terracotta Server Array, and optimally at least twice the number of active Terracotta servers.</div><div id="ww3_21_14_13_6_3_16_10_2_4" class="List_1"><span class="WebWorks_Number" style="width: 18pt"><span><img src="bullet.gif" alt="*" border="0" width="10" height="10"></span></span>With extremely large data sets, a high concurrency value can improve performance by hashing the data into more segments, which reduces lock contention.</div><div id="ww3_21_14_13_6_3_16_10_2_6" class="List_1"><span class="WebWorks_Number" style="width: 18pt"><span><img src="bullet.gif" alt="*" border="0" width="10" height="10"></span></span>In environments with very few cache elements, set concurrency to a value close to the number of expected elements.</div><footer><!-- Related Topics --><!--                --><!-- Back to Top --><!--             --><!-- Disqus --><!--        --><!-- Google Translation --><!--                    --><br></footer><div><div style="font-family: Arial, Verdana, Helvetica, Sans-Serif; font-size: 11px; margin-top: 20px; margin-bottom: 20px;"><span class="xref"><a href="http://documentation.softwareag.com/legal/" target="external_window">Copyright © <span>2010</span><span>-2016</span><span></span><span></span> Software AG, Darmstadt, Germany</a></span>.</div><hr></div><div style="font-family: Arial, Verdana, Helvetica, Sans-Serif; font-size: 13px; font-weight: bold; margin-top: 20px;"><span><img style="vertical-align:middle" src="../connect/terracotta_online.png" alt="Product Logo"><a href="https://empower.softwareag.com/ContactSupport/default.asp" target="_blank">Contact&nbsp;Support</a>
         &nbsp;&nbsp;|&nbsp;&nbsp;
       <a href="http://www.softwareag.com/corporate/community/default.asp" target="_blank">Community</a>
         &nbsp;&nbsp;|&nbsp;&nbsp;
       <a href="mailto://documentation@softwareag.com" target="_blank">Feedback&nbsp;&nbsp;</a></span></div></body></html>