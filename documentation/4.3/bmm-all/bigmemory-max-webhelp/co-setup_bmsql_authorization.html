<!DOCTYPE html ><html xml:lang="en" lang="en" xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html;charset=utf-8"><meta http-equiv="Content-Style-Type" content="text/css"><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"><meta http-equiv="X-UA-Compatible" content="IE=edge"><title>Setting up Authorization for TMC Queries</title><link rel="Prev" href="co-setup_authentication_authorization.html" title="Previous"><link rel="Next" href="co-setup_configure_server_security.html" title="Next"><link rel="StyleSheet" href="css/aaa_bigmem_max_all.css" type="text/css" media="all"><link rel="StyleSheet" href="css/skin.css" type="text/css" media="all"><link rel="StyleSheet" href="css/social.css" type="text/css" media="all"><link rel="StyleSheet" href="css/webworks.css" type="text/css" media="all"><!--[if IE 7]><link rel="StyleSheet" href="css/aaa_bigmem_max_all_IE7.css" type="text/css" media="all"><![endif]--><link rel="StyleSheet" href="css/print.css" type="text/css" media="print"><script type="text/javascript">
    'use strict';

    var redirect_url, page_hash;

    if (window === window.top) {
        // Redirect
        //
        redirect_url = "../index.html#page/bigmemory-max-webhelp/co-setup_bmsql_authorization.html";
        if (window.document.location.hash.length > 1) {
            // Sanitize and append it
            //
            page_hash = window.document.location.hash.substring(1);
            page_hash = page_hash.replace(/[\\><:;"]|%5C|%3C|%3E|%3A|%3B|%22/gi, '');
            redirect_url += '#' + page_hash;
        }
        window.document.location.replace(redirect_url);
    }
</script><script type="text/javascript" src="scripts/common.js"></script><script type="text/javascript" src="scripts/page.js"></script><script type="text/javascript" src="scripts/search-client.js"></script><script type="text/javascript" src="scripts/unidata.js"></script><script type="text/javascript" src="scripts/unibreak.js"></script></head><body id="pPinKDt0HhOOUsWP3rMWcNg" class="ww_skin_page_body" onload="Page.OnLoad('../index.html#page/bigmemory-max-webhelp/co-setup_bmsql_authorization.html');"><header id="wwconnect_header"><div class="ww_skin_breadcrumbs"><span class="ww_skin_breadcrumbs_parent"><a href="../bigmemory-max-webhelp/to-title_product_documentation.html#wwconnect_header">Product Documentation</a></span><span class="ww_skin_breadcrumbs_divider"> : </span><span class="ww_skin_breadcrumbs_parent"><a href="../bigmemory-max-webhelp/to-title_bigmemory_max_security_guide.html#wwconnect_header">BigMemory Max Security Guide</a></span><span class="ww_skin_breadcrumbs_divider"> : </span><span class="ww_skin_breadcrumbs_parent"><a href="../bigmemory-max-webhelp/to-setup_server_security.html#wwconnect_header">Setting Up Server Security</a></span><span class="ww_skin_breadcrumbs_divider"> : </span><span class="ww_skin_breadcrumbs_current">Setting up Authorization for TMC Queries</span></div><div class="ww_skin_page_toolbar"></div></header><div id="ww3_17_14_13_14_1" class="Heading_3">Setting up Authorization for TMC Queries</div><div id="ww3_17_14_13_14_3_2" class="Body">The Terracotta Management Console allows you to execute SQL-like queries in the query field of the <span class="uicontrol">Application Data &gt; Contents</span> panel. Initially, all users who can access the TMC can also use this query feature.</div><div id="ww3_17_14_13_14_3_4" class="Body">You may want to restrict the usage of the query feature by disabling it for certain user roles/identities. You can do this as follows:</div><div id="ww3_17_14_13_14_3_6_2" class="Section_Title">Using Simple Account-Based Authentication (Ini-File) security</div><div id="ww3_17_14_13_14_3_6_4" class="Body">If you are using simple account-based authentication security, the authorization setup for disabling the query feature is defined in the <span class="filepath">security.ini</span> file, which is located in the <span class="filepath">mgmt</span> folder under your user account path at the operating system level. The file is created when you use the TMC to specify that you want to use Ini-File authentication. If you have not yet done so, you can use the <span class="uicontrol">Settings</span> menu of TMC to specify the required authentication method. On Windows systems, the location of the <span class="filepath">mgmt</span> folder could be, for example, <span class="filepath">C:\Users\MyUserName\.tc</span> (where <span class="varname">MyUserName</span> is your Windows user name), and on Linux it could be <span class="filepath">~/.tc</span>.</div><div id="ww3_17_14_13_14_3_6_6" class="Body">Use the following steps to disable the query feature:</div><div id="ww3_17_14_13_14_3_6_8_2_3" class="Numbered_1"><span class="WebWorks_Number" style="width: 18pt"><span>1. </span></span>Open the file <span class="filepath">security.ini</span> in a text editor and go to the line where the user that you want to modify is defined.</div><div id="ww3_17_14_13_14_3_6_8_4_3" class="Numbered_1"><span class="WebWorks_Number" style="width: 18pt"><span>2. </span></span>Append the <span class="parmname">nobmsql</span> role at the end of the line in order to disable the query panel for that user.</div><div id="ww3_17_14_13_14_3_6_8_6" class="Numbered_1"><span class="WebWorks_Number" style="width: 18pt"><span>3. </span></span>Restart TMS, then log in using the user's credentials, and ensure that the query field is no longer visible in the <span class="uicontrol">Application Data &gt; Contents</span> panel.</div><div id="ww3_17_14_13_14_3_6_10" class="Body">Here is an example of <span class="filepath">security.ini</span>, with <span class="parmname">nobmsql</span> applied to the "operator" user:</div><div id="ww3_17_14_13_14_3_6_12" class="Preformatted">[users]<br>admin=$shiro1$SHA-1$1000000$pibMTfX7zzyKTy57DLcSvw==$ENBPZPwB//L5fbVZ+/jeKJ4Fm/4=,operator,admin<br>operator=$shiro1$SHA-1$1000000$3mYdIqq2gjldlii7qaadsg==$tIMdM92xA6UXwXZn/MeH2AH7N8A=,operator,nobmsql</div><div id="ww3_17_14_13_14_3_6_14" class="Body">There are 2 users in this configuration: "admin" and "operator". The long string behind '=' is the encrypted password, which is automatically generated the first time you configure the password through TMC. Currently there are 3 roles available: "admin", "operator" and "nobmsql". An administrator user needs to be assigned both "admin" and "operator" roles. An operator user needs to be assigned the "operator" role. If you want to hide the query panel from the administrator user or operator user or both, you can simply add the "nobmsql" role to that user.</div><div id="ww3_17_14_13_14_3_8_2" class="Section_Title">Using LDAP-based security</div><div id="ww3_17_14_13_14_3_8_4" class="Body">If you are using LDAP based security, use the following steps to disable the query feature for a particular user:</div><div id="ww3_17_14_13_14_3_8_6_2_3" class="Numbered_1"><span class="WebWorks_Number" style="width: 18pt"><span>1. </span></span>Using a text editor, open the file <span class="filepath">shiro.ini</span> in the <span class="filepath">mgmt</span> folder (location as described above for Ini-File security).</div><div id="ww3_17_14_13_14_3_8_6_4_3" class="Numbered_1"><span class="WebWorks_Number" style="width: 18pt"><span>2. </span></span>Find the entry <span class="codeph">ldapRealm.groupRolesMapAsString =</span>.</div><div id="ww3_17_14_13_14_3_8_6_4_5" class="Numbered_1_Continued">This is the mapping string between TMC roles and LDAP groups. It is formatted as:</div><div id="ww3_17_14_13_14_3_8_6_4_7" class="Preformatted_1">"LDAP group":"TMC role[s]..."</div><div id="ww3_17_14_13_14_3_8_6_4_9" class="Numbered_1_Continued">for example:</div><div id="ww3_17_14_13_14_3_8_6_4_11" class="Preformatted_1">"tmcopstgroup2":"admin,operator";</div><div id="ww3_17_14_13_14_3_8_6_6" class="Numbered_1"><span class="WebWorks_Number" style="width: 18pt"><span>3. </span></span>If you want to disable the query ability for an LDAP group, add ",nobmsql" behind the mapping.</div><div id="ww3_17_14_13_14_3_8_6_8" class="Numbered_1"><span class="WebWorks_Number" style="width: 18pt"><span>4. </span></span>Restart TMS, then log in using the credentials of a user who belongs to the LDAP group. Ensure that the query field is no longer visible in the <span class="uicontrol">Application Data &gt; Contents</span> panel.</div><footer><!-- Related Topics --><!--                --><!-- Back to Top --><!--             --><!-- Disqus --><!--        --><!-- Google Translation --><!--                    --><br></footer><div><div style="font-family: Arial, Verdana, Helvetica, Sans-Serif; font-size: 11px; margin-top: 20px; margin-bottom: 20px;"><span class="xref"><a href="http://documentation.softwareag.com/legal/" target="external_window">Copyright Â© <span>2010</span><span>-2016</span><span></span><span></span> Software AG, Darmstadt, Germany</a></span>.</div><hr></div><div style="font-family: Arial, Verdana, Helvetica, Sans-Serif; font-size: 13px; font-weight: bold; margin-top: 20px;"><span><img style="vertical-align:middle" src="../connect/terracotta_online.png" alt="Product Logo"><a href="https://empower.softwareag.com/ContactSupport/default.asp" target="_blank">Contact&nbsp;Support</a>
         &nbsp;&nbsp;|&nbsp;&nbsp;
       <a href="http://www.softwareag.com/corporate/community/default.asp" target="_blank">Community</a>
         &nbsp;&nbsp;|&nbsp;&nbsp;
       <a href="mailto://documentation@softwareag.com" target="_blank">Feedback&nbsp;&nbsp;</a></span></div></body></html>