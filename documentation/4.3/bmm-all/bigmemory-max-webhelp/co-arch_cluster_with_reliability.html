<!DOCTYPE html ><html xml:lang="en" lang="en" xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html;charset=utf-8"><meta http-equiv="Content-Style-Type" content="text/css"><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"><meta http-equiv="X-UA-Compatible" content="IE=edge"><title>Terracotta Cluster with Reliability using Fast Restart (FRS)</title><link rel="Prev" href="co-arch_cluster_in_development.html" title="Previous"><link rel="Next" href="co-arch_frs_disk_compaction.html" title="Next"><link rel="StyleSheet" href="css/aaa_bigmem_max_all.css" type="text/css" media="all"><link rel="StyleSheet" href="css/skin.css" type="text/css" media="all"><link rel="StyleSheet" href="css/social.css" type="text/css" media="all"><link rel="StyleSheet" href="css/webworks.css" type="text/css" media="all"><!--[if IE 7]><link rel="StyleSheet" href="css/aaa_bigmem_max_all_IE7.css" type="text/css" media="all"><![endif]--><link rel="StyleSheet" href="css/print.css" type="text/css" media="print"><script type="text/javascript">
    'use strict';

    var redirect_url, page_hash;

    if (window === window.top) {
        // Redirect
        //
        redirect_url = "../index.html#page/bigmemory-max-webhelp/co-arch_cluster_with_reliability.html";
        if (window.document.location.hash.length > 1) {
            // Sanitize and append it
            //
            page_hash = window.document.location.hash.substring(1);
            page_hash = page_hash.replace(/[\\><:;"]|%5C|%3C|%3E|%3A|%3B|%22/gi, '');
            redirect_url += '#' + page_hash;
        }
        window.document.location.replace(redirect_url);
    }
</script><script type="text/javascript" src="scripts/common.js"></script><script type="text/javascript" src="scripts/page.js"></script><script type="text/javascript" src="scripts/search-client.js"></script><script type="text/javascript" src="scripts/unidata.js"></script><script type="text/javascript" src="scripts/unibreak.js"></script></head><body id="pDAWVxn0ZxwahTl3Qip0Sbw" class="ww_skin_page_body" onload="Page.OnLoad('../index.html#page/bigmemory-max-webhelp/co-arch_cluster_with_reliability.html');"><header id="wwconnect_header"><div class="ww_skin_breadcrumbs"><span class="ww_skin_breadcrumbs_parent"><a href="../bigmemory-max-webhelp/to-title_product_documentation.html#wwconnect_header">Product Documentation</a></span><span class="ww_skin_breadcrumbs_divider"> : </span><span class="ww_skin_breadcrumbs_parent"><a href="../bigmemory-max-webhelp/to-title_bigmemory_max_admin_guide.html#wwconnect_header">BigMemory Max Administrator Guide</a></span><span class="ww_skin_breadcrumbs_divider"> : </span><span class="ww_skin_breadcrumbs_parent"><a href="../bigmemory-max-webhelp/to-arch_architecture.html#wwconnect_header">Terracotta Server Array Architecture</a></span><span class="ww_skin_breadcrumbs_divider"> : </span><span class="ww_skin_breadcrumbs_current">Terracotta Cluster with Reliability using Fast Restart (FRS)</span></div><div class="ww_skin_page_toolbar"></div></header><div id="ww3_17_12_9_8_1" class="Heading_3">Terracotta Cluster with Reliability using Fast Restart (FRS)</div><div id="ww3_17_12_9_8_3_4" class="Body"><span class="inlinetitle"> Persistence: Yes | Failover: No | Scale: No</span></div><div id="ww3_17_12_9_8_3_6" class="Body">The configuration above may be advantageous in development, but if shared in-memory data must be persisted, the server should be configured to use its local disk. Terracotta servers achieve data persistence with the Fast Restart (FRS) feature.</div><img class="Default" src="../bigmemory-max-webhelp/images/single_server_perm_mode.png" style="display: inline; float: none" alt=""><div id="ww3_17_12_9_8_3_10_2" class="Section_Title">Fast Restartability</div><div id="ww3_17_12_9_8_3_10_4" class="Body">The Fast Restart (FRS) feature provides enterprise-ready crash resilience by keeping a fully consistent, real-time record of your in-memory data. After any kind of shutdown - planned or unplanned - the next time your application starts up, all of your BigMemory Max data is still available and very quickly accessible.</div><div id="ww3_17_12_9_8_3_10_6" class="Body">The Fast Restart feature persists the real-time record of the in-memory data in a Fast Restart store on the server's local disk. After any restart, the data that was last in memory (both heap and off-heap stores) automatically loads from the Fast Restart store back into memory. In addition, previously connected clients are allowed to rejoin the cluster within a window set by the <span class="codeph">&lt;client-reconnect-window&gt;</span> element.</div><div id="ww3_17_12_9_8_3_10_8" class="Body">To configure the Terracotta server for Fast Restartability, add and enable the <span class="codeph">&lt;restartable&gt;</span> element in the tc-config.xml.</div><div id="ww3_17_12_9_8_3_10_10" class="Preformatted">&lt;?xml version="1.0" encoding="UTF-8" ?&gt;<br>&lt;tc:tc-config xmlns:tc="http://www.terracotta.org/config"<br> xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"<br> xsi:schemaLocation="http://www.terracotta.org/schema/terracotta-9.xsd"&gt;<br> &lt;servers&gt;<br>   &lt;server name="Server1"&gt;<br>     &lt;data&gt;/opt/terracotta/server1-data&lt;/data&gt;<br>     &lt;tsa-port&gt;9510&lt;/tsa-port&gt;<br>     &lt;jmx-port&gt;9520&lt;/jmx-port&gt;<br>     &lt;tsa-group-port&gt;9530&lt;/tsa-group-port&gt;<br>     &lt;management-port&gt;9540&lt;/management-port&gt;<br>     &lt;dataStorage size="4g"&gt;<br>        &lt;offheap size="4g"/&gt; <br>     &lt;/dataStorage&gt;<br>   &lt;/server&gt;<br>   &lt;!-- Fast Restartability must be added explicitly. --&gt;<br>   &lt;restartable enabled="true"/&gt;<br>   &lt;!-- By default the window is 120 seconds. --&gt;<br>   &lt;client-reconnect-window&gt;120&lt;/client-reconnect-window&gt;<br> &lt;/servers&gt;<br> ...<br>&lt;/tc:tc-config&gt;</div><div id="ww3_17_12_9_8_3_12_2" class="Section_Title">Disk usage</div><div id="ww3_17_12_9_8_3_12_4" class="Body">Fast Restartability requires a unique and explicitly specified path. The default path is the Terracotta server's home directory. You can customize the path using the <span class="codeph">&lt;data&gt;</span> element in the server's tc-config.xml configuration file.</div><div id="ww3_17_12_9_8_3_12_6" class="Body">The Terracotta Server Array can be configured to be restartable in addition to including searchable caches, but both of these features require disk storage. When both are enabled, be sure that enough disk space is available. The amount of disk storage required is dependent on the use case, taking into account aspects such as the number of searchable attributes, element size, read/write ratio and transaction rate. For this reason an exact figure cannot be given, but the amount of disk storage required can be a multiple of the amount of in-memory data. The recommended way to determine the true minimum disk space requirements is to perform multiple iterations of testing the real-world use case in full.</div><div id="ww3_17_12_9_8_3_12_8" class="Body">It is highly recommended to store the search index ( <span class="codeph">&lt;index&gt;</span> ) and the Fast Restart data ( <span class="codeph">&lt;data&gt;</span> ) on separate disks.</div><div id="ww3_17_12_9_8_3_14_2" class="Section_Title">Client Reconnect Window</div><div id="ww3_17_12_9_8_3_14_4" class="Body">The <span class="codeph">&lt;client-reconnect-window&gt;</span> does not have to be explicitly set if the default value is acceptable. However, in a single-server cluster, <span class="codeph">&lt;client-reconnect-window&gt;</span> is in effect only if restartable mode is enabled.</div><div id="ww3_17_12_9_8_3_16" class="Section"></div><div id="ww3_17_12_9_8_3_16_2" class="Section_Title">Understanding how FRS works</div><div id="ww3_17_12_9_8_3_16_4" class="Body">FRS is a trade-off of space efficiency against performance. Because the Terracotta product is about performance, and in particular in-memory performance, the FRS feature purposely sacrifices on-disk space efficiency in order to avoid making the process (the Terracotta server) wait for more complex disk I/O. In periods of extensive writing (new entries, updated entries, deleted entries) to the system, the FRS transaction logs will grow extensively. This design preserves high, predictable performance (latencies).</div><footer><!-- Related Topics --><!--                --><!-- Back to Top --><!--             --><!-- Disqus --><!--        --><!-- Google Translation --><!--                    --><br></footer><div><div style="font-family: Arial, Verdana, Helvetica, Sans-Serif; font-size: 11px; margin-top: 20px; margin-bottom: 20px;"><span class="xref"><a href="http://documentation.softwareag.com/legal/" target="external_window">Copyright Â© <span>2010</span><span>-2016</span><span></span><span></span> Software AG, Darmstadt, Germany</a></span>.</div><hr></div><div style="font-family: Arial, Verdana, Helvetica, Sans-Serif; font-size: 13px; font-weight: bold; margin-top: 20px;"><span><img style="vertical-align:middle" src="../connect/terracotta_online.png" alt="Product Logo"><a href="https://empower.softwareag.com/ContactSupport/default.asp" target="_blank">Contact&nbsp;Support</a>
         &nbsp;&nbsp;|&nbsp;&nbsp;
       <a href="http://www.softwareag.com/corporate/community/default.asp" target="_blank">Community</a>
         &nbsp;&nbsp;|&nbsp;&nbsp;
       <a href="mailto://documentation@softwareag.com" target="_blank">Feedback&nbsp;&nbsp;</a></span></div></body></html>