<!DOCTYPE html ><html xml:lang="en" lang="en" xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html;charset=utf-8"><meta http-equiv="Content-Style-Type" content="text/css"><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"><meta http-equiv="X-UA-Compatible" content="IE=edge"><title>Eviction</title><link rel="Prev" href="co-arm_what_is_arm.html" title="Previous"><link rel="Next" href="co-arm_customizing_eviction_stategy.html" title="Next"><link rel="StyleSheet" href="css/aaa_bigmem_max_all.css" type="text/css" media="all"><link rel="StyleSheet" href="css/skin.css" type="text/css" media="all"><link rel="StyleSheet" href="css/social.css" type="text/css" media="all"><link rel="StyleSheet" href="css/webworks.css" type="text/css" media="all"><!--[if IE 7]><link rel="StyleSheet" href="css/aaa_bigmem_max_all_IE7.css" type="text/css" media="all"><![endif]--><link rel="StyleSheet" href="css/print.css" type="text/css" media="print"><script type="text/javascript">
    'use strict';

    var redirect_url, page_hash;

    if (window === window.top) {
        // Redirect
        //
        redirect_url = "../index.html#page/bigmemory-max-webhelp/co-arm_eviction.html";
        if (window.document.location.hash.length > 1) {
            // Sanitize and append it
            //
            page_hash = window.document.location.hash.substring(1);
            page_hash = page_hash.replace(/[\\><:;"]|%5C|%3C|%3E|%3A|%3B|%22/gi, '');
            redirect_url += '#' + page_hash;
        }
        window.document.location.replace(redirect_url);
    }
</script><script type="text/javascript" src="scripts/common.js"></script><script type="text/javascript" src="scripts/page.js"></script><script type="text/javascript" src="scripts/search-client.js"></script><script type="text/javascript" src="scripts/unidata.js"></script><script type="text/javascript" src="scripts/unibreak.js"></script></head><body id="pXchg3BniqUZDJ5Yh361f1A" class="ww_skin_page_body" onload="Page.OnLoad('../index.html#page/bigmemory-max-webhelp/co-arm_eviction.html');"><header id="wwconnect_header"><div class="ww_skin_breadcrumbs"><span class="ww_skin_breadcrumbs_parent"><a href="../bigmemory-max-webhelp/to-title_product_documentation.html#wwconnect_header">Product Documentation</a></span><span class="ww_skin_breadcrumbs_divider"> : </span><span class="ww_skin_breadcrumbs_parent"><a href="../bigmemory-max-webhelp/to-title_bigmemory_max_admin_guide.html#wwconnect_header">BigMemory Max Administrator Guide</a></span><span class="ww_skin_breadcrumbs_divider"> : </span><span class="ww_skin_breadcrumbs_parent"><a href="../bigmemory-max-webhelp/to-arm_automatic_resource_management.html#wwconnect_header">Automatic Resource Management</a></span><span class="ww_skin_breadcrumbs_divider"> : </span><span class="ww_skin_breadcrumbs_current">Eviction</span></div><div class="ww_skin_page_toolbar"></div></header><div id="ww3_17_12_13_8_1" class="Heading_3">Eviction</div><div id="ww3_17_12_13_8_3_2" class="Body">All data is kept in memory, and the TSA runs evictions in the background to keep the data set within its limitations. Eviction of entries from the data set reduces the amount of data before the memory becomes full. The criteria for an entry to be eligible for eviction are:</div><div id="ww3_17_12_13_8_3_4_2_3" class="List_1"><span class="WebWorks_Number" style="width: 18pt"><span><img src="bullet.gif" alt="*" border="0" width="10" height="10"></span></span>It is not on a Terracotta client (L1).</div><div id="ww3_17_12_13_8_3_4_4_3" class="List_1"><span class="WebWorks_Number" style="width: 18pt"><span><img src="bullet.gif" alt="*" border="0" width="10" height="10"></span></span>It is not pinned to a Terracotta server.</div><div id="ww3_17_12_13_8_3_4_6_3" class="List_1"><span class="WebWorks_Number" style="width: 18pt"><span><img src="bullet.gif" alt="*" border="0" width="10" height="10"></span></span>It is held in a cache backed by a System of Record (SOR).</div><div class="ww_skin_page_overflow"><table class="note1" summary=""><tr><td class="Table_Cell" style="padding-right: 6px; vertical-align: top"><div id="ww3_17_12_13_8_3_6_1_3_1_1_1" class="Note"><span style="font-weight: bold">Note:  </span>&nbsp;</div></td><td class="Table_Cell" style="padding-right: 6px; vertical-align: top"><div id="ww3_17_12_13_8_3_6_1_3_1_2" class="Table_Cell">Store vs. Cache - BigMemory's in-memory data is treated as a "store" when BigMemory owns the data, and as a "cache" when the data also resides in a System of Record (SOR). Generally, data that is created by BigMemory and run-time data created by your application are examples of data that is treated as a store. The TSA does not evict data stores because they are the only or primary records. The TSA can evict cached data because that data is backed up in an SOR. Distinctions in data structures are handled automatically.</div></td></tr></table></div><div id="ww3_17_12_13_8_3_8" class="Body">Eviction is done by the following evictors, which work together in the background:</div><div id="ww3_17_12_13_8_3_10_2_3" class="Numbered_1"><span class="WebWorks_Number" style="width: 18pt"><span>1. </span></span>The periodic evictor is activated on an as-needed basis. It removes expired entries based on TTI/TTL settings. The Server Expiration Rate graph in the TMC shows the activity of the periodic evictor.</div><div class="ww_skin_page_overflow"><div id="ww3_17_12_13_8_3_10_2-3" class="Numbered_1_Continued"><img class="Default" src="../bigmemory-max-webhelp/images/expiration_rate.png" style="display: inline; float: none" alt=""></div></div><div id="ww3_17_12_13_8_3_10_4_3" class="Numbered_1"><span class="WebWorks_Number" style="width: 18pt"><span>2. </span></span>The resource-based evictor is activated by the periodic TTI/TTL eviction scheduler, as well as by resource monitoring events. This evictor continuously polls BigMemory stores to check current resource usage. At approximately 10% usage of the disk as well as <span class="codeph">dataStorage</span> and <span class="codeph">offheap</span> sizes (configured in the tc-config.xml file), it starts looking for TTI/TTL-expired elements to evict. At approximately 80% usage, it evicts live as well as expired elements. If a monitored resource goes over its critical threshold, this evictor will work continually until the monitored resource falls below the critical threshold.</div><div id="ww3_17_12_13_8_3_10_4_5" class="Numbered_1_Continued">This evictor monitors two off-heap thresholds -- used space and reserved space. Resource eviction is triggered if either the reserved or used space is above its threshold. Once resource eviction has started, both used and reserved spaces must fall below their respective thresholds before resource eviction ends.</div><div class="ww_skin_page_overflow"><div id="ww3_17_12_13_8_3_10_4-5" class="Numbered_1_Continued"><img class="Default" src="../bigmemory-max-webhelp/images/offheap_usage_graph.png" style="display: inline; float: none" alt=""></div></div><div id="ww3_17_12_13_8_3_10_4_8" class="Numbered_1_Continued">The Offheap Usage graph in the TMC provides the following information:</div><div id="ww3_17_12_13_8_3_10_4_10_2_3" class="List_2"><span class="WebWorks_Number" style="width: 18pt"><span><img src="bullet.gif" alt="*" border="0" width="10" height="10"></span></span>Off-heap Max is the configured <span class="codeph">offheap</span> size</div><div id="ww3_17_12_13_8_3_10_4_10_4_3" class="List_2"><span class="WebWorks_Number" style="width: 18pt"><span><img src="bullet.gif" alt="*" border="0" width="10" height="10"></span></span>Off-heap Reserved represents usage of the space that is reserved for the system</div><div id="ww3_17_12_13_8_3_10_4_10_6_3" class="List_2"><span class="WebWorks_Number" style="width: 18pt"><span><img src="bullet.gif" alt="*" border="0" width="10" height="10"></span></span>Off-heap Used represents the amount of off-heap BigMemory that is in use</div><div id="ww3_17_12_13_8_3_10_4_12" class="Numbered_1_Continued">The Data Storage Usage graph in the TMC shows the configured <span class="codeph">dataStorage</span> size and the amount in use. This usage includes off-heap and hybrid storage combined. (BigMemory Hybrid allows for a mix of a solid-state drive (SSD) with DRAM-based offheap storage.)</div><div class="ww_skin_page_overflow"><div id="ww3_17_12_13_8_3_10_4-12" class="Numbered_1_Continued"><img class="Default" src="../bigmemory-max-webhelp/images/data_storage_usage_graph.png" style="display: inline; float: none" alt=""></div></div><div id="ww3_17_12_13_8_3_10_6_3" class="Numbered_1"><span class="WebWorks_Number" style="width: 18pt"><span>3. </span></span>The capacity-based evictor is activated when a cache goes over its maximum count (as configured with <span class="codeph">maxEntriesInCache</span> ), plus an overshoot count, and it attempts to bring the size of the cache to the max capacity. The <span class="codeph">maxEntriesInCache</span> attribute must be present in the Ehcache configuration (do not include <span class="codeph">maxEntriesInCache</span> in your configuration if you do not want the capacity evictor to run). If <span class="codeph">maxEntriesInCache</span> is not set, it gets the default value 0, which means that the cache is unbounded and will not undergo capacity eviction (but periodic and resource evictions are still allowed).</div><div id="ww3_17_12_13_8_3_10_6_5" class="Numbered_1_Continued">The Server Eviction Rate graph in the TMC shows the activity of the resource and capacity evictors.</div><div class="ww_skin_page_overflow"><div id="ww3_17_12_13_8_3_10_6-5" class="Numbered_1_Continued"><img class="Default" src="../bigmemory-max-webhelp/images/eviction_rate.png" style="display: inline; float: none" alt=""></div></div><footer><!-- Related Topics --><!--                --><!-- Back to Top --><!--             --><!-- Disqus --><!--        --><!-- Google Translation --><!--                    --><br></footer><div><div style="font-family: Arial, Verdana, Helvetica, Sans-Serif; font-size: 11px; margin-top: 20px; margin-bottom: 20px;"><span class="xref"><a href="http://documentation.softwareag.com/legal/" target="external_window">Copyright © <span>2010</span><span>-2016</span><span></span><span></span> Software AG, Darmstadt, Germany</a></span>.</div><hr></div><div style="font-family: Arial, Verdana, Helvetica, Sans-Serif; font-size: 13px; font-weight: bold; margin-top: 20px;"><span><img style="vertical-align:middle" src="../connect/terracotta_online.png" alt="Product Logo"><a href="https://empower.softwareag.com/ContactSupport/default.asp" target="_blank">Contact&nbsp;Support</a>
         &nbsp;&nbsp;|&nbsp;&nbsp;
       <a href="http://www.softwareag.com/corporate/community/default.asp" target="_blank">Community</a>
         &nbsp;&nbsp;|&nbsp;&nbsp;
       <a href="mailto://documentation@softwareag.com" target="_blank">Feedback&nbsp;&nbsp;</a></span></div></body></html>