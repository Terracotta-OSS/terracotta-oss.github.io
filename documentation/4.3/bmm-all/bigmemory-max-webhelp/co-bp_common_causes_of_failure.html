<!DOCTYPE html ><html xml:lang="en" lang="en" xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html;charset=utf-8"><meta http-equiv="Content-Style-Type" content="text/css"><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"><meta http-equiv="X-UA-Compatible" content="IE=edge"><title>Common Causes of Failures in a Cluster</title><link rel="Prev" href="co-bp_tuning_heap_memory_performance.html" title="Previous"><link rel="Next" href="co-bp_managing_sessions.html" title="Next"><link rel="StyleSheet" href="css/aaa_bigmem_max_all.css" type="text/css" media="all"><link rel="StyleSheet" href="css/skin.css" type="text/css" media="all"><link rel="StyleSheet" href="css/social.css" type="text/css" media="all"><link rel="StyleSheet" href="css/webworks.css" type="text/css" media="all"><!--[if IE 7]><link rel="StyleSheet" href="css/aaa_bigmem_max_all_IE7.css" type="text/css" media="all"><![endif]--><link rel="StyleSheet" href="css/print.css" type="text/css" media="print"><script type="text/javascript">
    'use strict';

    var redirect_url, page_hash;

    if (window === window.top) {
        // Redirect
        //
        redirect_url = "../index.html#page/bigmemory-max-webhelp/co-bp_common_causes_of_failure.html";
        if (window.document.location.hash.length > 1) {
            // Sanitize and append it
            //
            page_hash = window.document.location.hash.substring(1);
            page_hash = page_hash.replace(/[\\><:;"]|%5C|%3C|%3E|%3A|%3B|%22/gi, '');
            redirect_url += '#' + page_hash;
        }
        window.document.location.replace(redirect_url);
    }
</script><script type="text/javascript" src="scripts/common.js"></script><script type="text/javascript" src="scripts/page.js"></script><script type="text/javascript" src="scripts/search-client.js"></script><script type="text/javascript" src="scripts/unidata.js"></script><script type="text/javascript" src="scripts/unibreak.js"></script></head><body id="pq1eyIRsdQqJnd0SkTIRDDg" class="ww_skin_page_body" onload="Page.OnLoad('../index.html#page/bigmemory-max-webhelp/co-bp_common_causes_of_failure.html');"><header id="wwconnect_header"><div class="ww_skin_breadcrumbs"><span class="ww_skin_breadcrumbs_parent"><a href="../bigmemory-max-webhelp/to-title_bigmemory_max_best_practices.html#wwconnect_header">BigMemory Max Best Practices</a></span><span class="ww_skin_breadcrumbs_divider"> : </span><span class="ww_skin_breadcrumbs_current">Common Causes of Failures in a Cluster</span></div><div class="ww_skin_page_toolbar"></div></header><div id="ww3_23_10_1" class="Heading_1">Common Causes of Failures in a Cluster</div><div id="ww3_23_10_2_2" class="Body">The most common causes of failures in a cluster are interruptions in the network and long Java GC cycles on particular nodes. Tuning the HealthChecker and reconnect features can reduce or eliminate these two problems. However, additional actions should also be considered.</div><div id="ww3_23_10_2_4" class="Body">Sporadic disruptions in network connections between L2s and between L2s and L1s can be difficult to track down. Be sure to thoroughly test all network segments connecting the nodes in a cluster, and also test network hardware. Check for speed, noise, reliability, and other applications that grab bandwidth.</div><div id="ww3_23_10_2_6" class="Body">Other sources of failures in a cluster are disks that are nearly full or are running slowly, and running other applications that compete for a node's resources.</div><div id="ww3_23_10_2_8_2" class="Section_Title">Do Not Interrupt!</div><div id="ww3_23_10_2_8_4" class="Body">Ensure that your application does not interrupt clustered threads. This is a common error that can cause the Terracotta client to shut down or go into an error state, after which it will have to be restarted.</div><div id="ww3_23_10_2_8_6" class="Body">The Terracotta client library runs with your application and is often involved in operations which your application is not necessarily aware of. These operations can get interrupted, something the Terracotta client cannot anticipate. Interrupting clustered threads, in effect, puts the client into a state which it cannot handle.</div><div id="ww3_23_10_2_10_2" class="Section_Title">Diagnose Client Disconnections</div><div id="ww3_23_10_2_10_4" class="Body">If clients disconnect on a regular basis, try the following to diagnose the cause:</div><div id="ww3_23_10_2_10_6_2" class="List_1"><span class="WebWorks_Number" style="width: 18pt"><span><img src="bullet.gif" alt="*" border="0" width="10" height="10"></span></span>Analyze the Terracotta client logs for potential issues, such as long GC cycles.</div><div id="ww3_23_10_2_10_6_4" class="List_1"><span class="WebWorks_Number" style="width: 18pt"><span><img src="bullet.gif" alt="*" border="0" width="10" height="10"></span></span>Analyze the Terracotta server logs for disconnection information and any rejections of reconnection attempts by the client.</div><div id="ww3_23_10_2_10_6_6" class="List_1"><span class="WebWorks_Number" style="width: 18pt"><span><img src="bullet.gif" alt="*" border="0" width="10" height="10"></span></span>See the operator events panel in the Terracotta Management Console for disconnection events, and note the reason.</div><div id="ww3_23_10_2_10_8" class="Body">If the disconnections are due to long GC cycles or inconsistent network connections in the client, consider the remedies suggested in <span class="xref"><a href="../bigmemory-max-webhelp/co-bp_tuning_heap_memory_performance.html#wwconnect_header" title="Tuning Heap Memory Performance">this section</a></span>. If disconnections continue to happen, consider configuring caches with <span class="xref"><a href="../bigmemory-max-webhelp/co-nstop_about_nonstop_operation.html#wwconnect_header" title="About Nonstop Operation">nonstop behavior</a></span> and enabling <span class="xref"><a href="../bigmemory-max-webhelp/to-rc_configuring_reconnect_properties.html#wwconnect_header" title="Configuring Reconnection and Rejoin Properties">rejoin</a></span>.</div><div id="ww3_23_10_2_12_2" class="Section_Title">Detect Memory Pressure Using the Terracotta Logs</div><div id="ww3_23_10_2_12_4" class="Body">Terracotta server and client logs contain messages that help you track memory usage. Locations of server and client logs are configured in the Terracotta configuration file, <span class="codeph">tc-config.xml</span>.</div><div id="ww3_23_10_2_12_6" class="Body">You can view the state of memory usage in a node by finding messages similar to the following:</div><div id="ww3_23_10_2_12_8" class="Preformatted">2011-12-04 14:47:43,341 [Statistics Logger] ... memory free : 39.992699 MB <br>2011-12-04 14:47:43,341 [Statistics Logger] ... memory used : 1560.007301 MB <br>2011-12-04 14:47:43,341 [Statistics Logger] ... memory max : 1600.000000 MB</div><div id="ww3_23_10_2_12_10" class="Body">These messages can indicate that the node is running low on memory.</div><div id="ww3_23_10_2_14_2" class="Section_Title">Disk usage with both Search and Fast Restart enabled</div><div id="ww3_23_10_2_14_4" class="Body">The TSA may be configured to be restartable in addition to including searchable caches, but both of these features require disk storage. When both are enabled, be sure that enough disk space is available. Depending upon the number of searchable attributes, the amount of disk storage required may be up to 1.5 times the amount of in-memory data.</div><footer><!-- Related Topics --><!--                --><!-- Back to Top --><!--             --><!-- Disqus --><!--        --><!-- Google Translation --><!--                    --><br></footer><div><div style="font-family: Arial, Verdana, Helvetica, Sans-Serif; font-size: 11px; margin-top: 20px; margin-bottom: 20px;"><span class="xref"><a href="http://documentation.softwareag.com/legal/" target="external_window">Copyright Â© <span>2010</span><span>-2016</span><span></span><span></span> Software AG, Darmstadt, Germany</a></span>.</div><hr></div><div style="font-family: Arial, Verdana, Helvetica, Sans-Serif; font-size: 13px; font-weight: bold; margin-top: 20px;"><span><img style="vertical-align:middle" src="../connect/terracotta_online.png" alt="Product Logo"><a href="https://empower.softwareag.com/ContactSupport/default.asp" target="_blank">Contact&nbsp;Support</a>
         &nbsp;&nbsp;|&nbsp;&nbsp;
       <a href="http://www.softwareag.com/corporate/community/default.asp" target="_blank">Community</a>
         &nbsp;&nbsp;|&nbsp;&nbsp;
       <a href="mailto://documentation@softwareag.com" target="_blank">Feedback&nbsp;&nbsp;</a></span></div></body></html>