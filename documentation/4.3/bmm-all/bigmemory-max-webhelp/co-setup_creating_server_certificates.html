<!DOCTYPE html ><html xml:lang="en" lang="en" xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html;charset=utf-8"><meta http-equiv="Content-Style-Type" content="text/css"><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"><meta http-equiv="X-UA-Compatible" content="IE=edge"><title>Creating the Server Certificates</title><link rel="Prev" href="co-setup_basic_setup.html" title="Previous"><link rel="Next" href="co-setup_server_keychain.html" title="Next"><link rel="StyleSheet" href="css/aaa_bigmem_max_all.css" type="text/css" media="all"><link rel="StyleSheet" href="css/skin.css" type="text/css" media="all"><link rel="StyleSheet" href="css/social.css" type="text/css" media="all"><link rel="StyleSheet" href="css/webworks.css" type="text/css" media="all"><!--[if IE 7]><link rel="StyleSheet" href="css/aaa_bigmem_max_all_IE7.css" type="text/css" media="all"><![endif]--><link rel="StyleSheet" href="css/print.css" type="text/css" media="print"><script type="text/javascript">
    'use strict';

    var redirect_url, page_hash;

    if (window === window.top) {
        // Redirect
        //
        redirect_url = "../index.html#page/bigmemory-max-webhelp/co-setup_creating_server_certificates.html";
        if (window.document.location.hash.length > 1) {
            // Sanitize and append it
            //
            page_hash = window.document.location.hash.substring(1);
            page_hash = page_hash.replace(/[\\><:;"]|%5C|%3C|%3E|%3A|%3B|%22/gi, '');
            redirect_url += '#' + page_hash;
        }
        window.document.location.replace(redirect_url);
    }
</script><script type="text/javascript" src="scripts/common.js"></script><script type="text/javascript" src="scripts/page.js"></script><script type="text/javascript" src="scripts/search-client.js"></script><script type="text/javascript" src="scripts/unidata.js"></script><script type="text/javascript" src="scripts/unibreak.js"></script></head><body id="pFkUm4jTcUCErkGuFUsK4VQ" class="ww_skin_page_body" onload="Page.OnLoad('../index.html#page/bigmemory-max-webhelp/co-setup_creating_server_certificates.html');"><header id="wwconnect_header"><div class="ww_skin_breadcrumbs"><span class="ww_skin_breadcrumbs_parent"><a href="../bigmemory-max-webhelp/to-title_product_documentation.html#wwconnect_header">Product Documentation</a></span><span class="ww_skin_breadcrumbs_divider"> : </span><span class="ww_skin_breadcrumbs_parent"><a href="../bigmemory-max-webhelp/to-title_bigmemory_max_security_guide.html#wwconnect_header">BigMemory Max Security Guide</a></span><span class="ww_skin_breadcrumbs_divider"> : </span><span class="ww_skin_breadcrumbs_parent"><a href="../bigmemory-max-webhelp/to-setup_server_security.html#wwconnect_header">Setting Up Server Security</a></span><span class="ww_skin_breadcrumbs_divider"> : </span><span class="ww_skin_breadcrumbs_current">Creating the Server Certificates</span></div><div class="ww_skin_page_toolbar"></div></header><div id="ww3_17_14_13_8_1" class="Heading_3">Creating the Server Certificates</div><div id="ww3_17_14_13_8_3_2" class="Body">Each Terracotta server must have a keystore file containing a digital certificate and the associated private key. This document assumes that you will use self-signed certificates.</div><div id="ww3_17_14_13_8_3_4" class="Body"><span class="inlinetitle"> IMPORTANT SECURITY CONSIDERATION!</span> : Self-signed certificates might be less safe than CA-signed certificates because they lack third-party identity verification and do not carry a digital signature from an official CA. Your organization might already have policies and procedures in place regarding the generation and use of digital certificates and certificate chains, including the use of certificates signed by a Certificate Authority (CA). To follow your organization's policies and procedures regarding using digital certificates, you might need to adjust the procedures outlined in this document.</div><div id="ww3_17_14_13_8_3_6" class="Body">When used for a Terracotta server, the following conditions must be met for certificates and their keystores:</div><div id="ww3_17_14_13_8_3_8_2_3" class="List_1"><span class="WebWorks_Number" style="width: 18pt"><span><img src="bullet.gif" alt="*" border="0" width="10" height="10"></span></span>The keystore must be a Java keystore (JKS) compatible with JDK 1.6 or higher.</div><div id="ww3_17_14_13_8_3_8_4_3" class="List_1"><span class="WebWorks_Number" style="width: 18pt"><span><img src="bullet.gif" alt="*" border="0" width="10" height="10"></span></span>The certificate must be keyed with the alias named in the value of the <span class="codeph">&lt;certificate&gt;</span> element of the server's configuration. See <span class="xref"><a href="../bigmemory-max-webhelp/co-setup_configure_server_security.html#wwconnect_header" title="Configuring Server Security">Configure Server Security</a></span> for details.</div><div id="ww3_17_14_13_8_3_8_6_3" class="List_1"><span class="WebWorks_Number" style="width: 18pt"><span><img src="bullet.gif" alt="*" border="0" width="10" height="10"></span></span>The Common Name (CN) field in the Distinguished Name must contain the hostname of the server, as configured in <span class="xref"><a href="../bigmemory-max-webhelp/co-setup_configure_server_security.html#wwconnect_header" title="Configuring Server Security">Configure Server Security</a></span>.</div><div id="ww3_17_14_13_8_3_8_8_3" class="List_1"><span class="WebWorks_Number" style="width: 18pt"><span><img src="bullet.gif" alt="*" border="0" width="10" height="10"></span></span>The password securing the certificate must match the keystore's main password. In other words, <span class="bold">the store password and key passwords must be identical.</span></div><div id="ww3_17_14_13_8_3_8_10_3" class="List_1"><span class="WebWorks_Number" style="width: 18pt"><span><img src="bullet.gif" alt="*" border="0" width="10" height="10"></span></span>When using a self-signed certificate (not one signed by a trusted CA), create a custom truststore for storing public keys. See the section <span class="xref"><a href="../bigmemory-max-webhelp/co-setup_creating_server_certificates.html#ww3_17_14_13_8_3_14_2" title="Creating the Server Certificates">Exporting and Importing Certificates</a></span> for details.</div><div class="ww_skin_page_overflow"><table class="note2" summary=""><tr><td class="Table_Cell" style="padding-right: 6px; vertical-align: top"><div id="ww3_17_14_13_8_3_8_10_5_1_3_1_2_1" class="Note"><span style="font-weight: bold">Note:  </span>&nbsp;</div></td><td class="Table_Cell" style="padding-right: 6px; vertical-align: top"><div id="ww3_17_14_13_8_3_8_10_5_1_3_1_3" class="Table_Cell">When using a self-signed certificate (not one signed by a trusted CA), use the -k option for stopping the server or running server scripts.</div></td></tr></table></div><div id="ww3_17_14_13_8_3_10" class="Body">If you have a keystore in place, but the server certificate is not already stored in the keystore, you must import it into the keystore. If the keystore does not already exist, you must create it.</div><div id="ww3_17_14_13_8_3_12_2" class="Section_Title">Creating Self-Signed Certificates Using Java Keytool</div><div id="ww3_17_14_13_8_3_12_4" class="Body">For testing purposes, or if you intend to use self-signed certificates, use the Java keytool command to create the public-private key pair. You also use this command to create keystores and truststores, but note that keytool refers to truststores as "keystores" since there is only a logical difference.</div><div class="ww_skin_page_overflow"><table class="note1" summary=""><tr><td class="Table_Cell" style="padding-right: 6px; vertical-align: top"><div id="ww3_17_14_13_8_3_12_6_1_3_1_1_1" class="Note"><span style="font-weight: bold">Note:  </span>&nbsp;</div></td><td class="Table_Cell" style="padding-right: 6px; vertical-align: top"><div id="ww3_17_14_13_8_3_12_6_1_3_1_2" class="Table_Cell">Specifying a Custom Truststore - Note that if you are <span class="emphasis">not</span> using cacerts, the default Java truststore, the custom truststore must be specified with the <span class="codeph">javax.net.ssl.trustStore</span> system property. In this case, you can choose to reset the custom truststore's default password with<span class="codeph"> javax.net.ssl.trustStorePassword</span>.</div></td></tr></table></div><div id="ww3_17_14_13_8_3_12_8" class="Body">The following could be used to create both public-private keys (including a certificate) and a keystore file for the server called "server1" in the configuration example above:</div><div id="ww3_17_14_13_8_3_12_10" class="Preformatted">keytool -genkey -keystore keystore-file.jks <br>-dname "CN=172.16.254.1, OU=Terracotta, O=SAG, L=San Francisco, S=California, <br>C=US" -alias server1alias -storepass server1pass -keypass server1pass<br></div><div id="ww3_17_14_13_8_3_12_12" class="Body">Note that the values passed to <span class="codeph">-storepass</span> and <span class="codeph">-keypass</span> match. Also, the field designating the Common Name (CN) must match the server's hostname, which matches the value entered in the server's configuration. This hostname can be an IP address or a resolvable domain name. If the <span class="codeph">-dname</span> option is left out, a series of identity prompts (distinguished-name fields based on the X.500 standard) will appear before the server's entry is created in the keystore. The CN prompt appears as shown:</div><div id="ww3_17_14_13_8_3_12_14" class="Preformatted">What is your first and last name?<br>   [Unknown]:</div><div id="ww3_17_14_13_8_3_12_16" class="Body">There are a number of other keytool options to consider, including <span class="codeph">-keyalg</span> (cryptographic algorithm; default is DSA) and <span class="codeph">-validity</span> (number of days until the certificate expires; default is 90). These and other options are dependent on your environment and security requirements. For more information on using the keytool, see the JDK documentation.</div><div id="ww3_17_14_13_8_3_12_18" class="Body">Create a keystore and entry on each Terracotta server.</div><div id="ww3_17_14_13_8_3_14_2" class="Section_Title">Exporting and Importing Certificates</div><div id="ww3_17_14_13_8_3_14_4" class="Body">Each server should have a copy of each other server's public-key certificate in its truststore.</div><div id="ww3_17_14_13_8_3_14_6" class="Body">The following could be used to export the certificate of the server called "server1" in the configuration example above.</div><div id="ww3_17_14_13_8_3_14_8" class="Preformatted">keytool -export -alias server1alias -keystore keystore-file.jks \<br>    -file server1SelfSignedCert.cert</div><div id="ww3_17_14_13_8_3_14_10" class="Body">This "cert" file can now be used to import server1's certificate into the truststore of every other server. For example, to create a truststore and import server1's certificate on server2, copy the cert file to the working directory on server2 and use the following command:</div><div id="ww3_17_14_13_8_3_14_12" class="Preformatted">keytool -import -alias server1alias -file server1SelfSignedCert.cert \<br>    -keystore truststore.jks</div><div id="ww3_17_14_13_8_3_14_14" class="Body">After the password prompt, information about the certificate appears, and you are prompted to trust it. You must repeat this process until every server has a truststore containing the public-key certificate of every other server in the cluster.</div><div class="ww_skin_page_overflow"><table class="note1" summary=""><tr><td class="Table_Cell" style="padding-right: 6px; vertical-align: top"><div id="ww3_17_14_13_8_3_14_16_1_3_1_1_1" class="tip"><span style="font-weight: bold">Tip:  </span>&nbsp;</div></td><td class="Table_Cell" style="padding-right: 6px; vertical-align: top"><div id="ww3_17_14_13_8_3_14_16_1_3_1_2" class="Table_Cell">Use a Single Truststore - Instead of recreating the truststore on every server, create a single truststore containing every server's public key, then copy that to every server. This same truststore can also be used for clients. See <span class="xref"><a href="../bigmemory-max-webhelp/co-client_using_client_truststore.html#wwconnect_header" title="Using a Client Truststore">Using a Client Truststore</a></span>.</div></td></tr></table></div><div id="ww3_17_14_13_8_3_14_18" class="Body">When you use the <span class="filepath">keytool</span> utility, you can maintain additional certificates for the chain of trust in a file <span class="filepath">cacerts</span>. If you wish to use these additional certificates for the import, refer to the use of the option <span class="codeph">-trustcacerts</span> in the documentation of the <span class="filepath">keytool</span> utility.</div><div class="ww_skin_page_overflow"><table class="note1" summary=""><tr><td class="Table_Cell" style="padding-right: 6px; vertical-align: top"><div id="ww3_17_14_13_8_3_14_20_1_3_1_1_1" class="tip"><span style="font-weight: bold">Tip:  </span>&nbsp;</div></td><td class="Table_Cell" style="padding-right: 6px; vertical-align: top"><div id="ww3_17_14_13_8_3_14_20_1_3_1_2" class="Table_Cell">As an alternative to using the command line tool <span class="Citation">keytool</span>, you might want to try the open source graphical tool <span class="Citation">KeyStore Explorer</span>, available at <span class="external"><a href="http://www.keystore-explorer.org/index.html" target="external_window">http://www.keystore-explorer.org/index.html</a></span>.</div></td></tr></table></div><footer><!-- Related Topics --><!--                --><!-- Back to Top --><!--             --><!-- Disqus --><!--        --><!-- Google Translation --><!--                    --><br></footer><div><div style="font-family: Arial, Verdana, Helvetica, Sans-Serif; font-size: 11px; margin-top: 20px; margin-bottom: 20px;"><span class="xref"><a href="http://documentation.softwareag.com/legal/" target="external_window">Copyright Â© <span>2010</span><span>-2016</span><span></span><span></span> Software AG, Darmstadt, Germany</a></span>.</div><hr></div><div style="font-family: Arial, Verdana, Helvetica, Sans-Serif; font-size: 13px; font-weight: bold; margin-top: 20px;"><span><img style="vertical-align:middle" src="../connect/terracotta_online.png" alt="Product Logo"><a href="https://empower.softwareag.com/ContactSupport/default.asp" target="_blank">Contact&nbsp;Support</a>
         &nbsp;&nbsp;|&nbsp;&nbsp;
       <a href="http://www.softwareag.com/corporate/community/default.asp" target="_blank">Community</a>
         &nbsp;&nbsp;|&nbsp;&nbsp;
       <a href="mailto://documentation@softwareag.com" target="_blank">Feedback&nbsp;&nbsp;</a></span></div></body></html>