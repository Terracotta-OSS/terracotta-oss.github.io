<!DOCTYPE html ><html xml:lang="en" lang="en" xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html;charset=utf-8"><meta http-equiv="Content-Style-Type" content="text/css"><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"><meta http-equiv="X-UA-Compatible" content="IE=edge"><title>Sizing Distributed Caches</title><link rel="Prev" href="co-size_sizing_examples.html" title="Previous"><link rel="Next" href="co-size_pinning_and_size_limits.html" title="Next"><link rel="StyleSheet" href="css/aaa_bigmem_max_all.css" type="text/css" media="all"><link rel="StyleSheet" href="css/skin.css" type="text/css" media="all"><link rel="StyleSheet" href="css/social.css" type="text/css" media="all"><link rel="StyleSheet" href="css/webworks.css" type="text/css" media="all"><!--[if IE 7]><link rel="StyleSheet" href="css/aaa_bigmem_max_all_IE7.css" type="text/css" media="all"><![endif]--><link rel="StyleSheet" href="css/print.css" type="text/css" media="print"><script type="text/javascript">
    'use strict';

    var redirect_url, page_hash;

    if (window === window.top) {
        // Redirect
        //
        redirect_url = "../index.html#page/bigmemory-max-webhelp/co-size_sizing_distributed_caches.html";
        if (window.document.location.hash.length > 1) {
            // Sanitize and append it
            //
            page_hash = window.document.location.hash.substring(1);
            page_hash = page_hash.replace(/[\\><:;"]|%5C|%3C|%3E|%3A|%3B|%22/gi, '');
            redirect_url += '#' + page_hash;
        }
        window.document.location.replace(redirect_url);
    }
</script><script type="text/javascript" src="scripts/common.js"></script><script type="text/javascript" src="scripts/page.js"></script><script type="text/javascript" src="scripts/search-client.js"></script><script type="text/javascript" src="scripts/unidata.js"></script><script type="text/javascript" src="scripts/unibreak.js"></script></head><body id="pN4GdvWWB9aYW4WKymVRMzjA" class="ww_skin_page_body" onload="Page.OnLoad('../index.html#page/bigmemory-max-webhelp/co-size_sizing_distributed_caches.html');"><header id="wwconnect_header"><div class="ww_skin_breadcrumbs"><span class="ww_skin_breadcrumbs_parent"><a href="../bigmemory-max-webhelp/to-title_product_documentation.html#wwconnect_header">Product Documentation</a></span><span class="ww_skin_breadcrumbs_divider"> : </span><span class="ww_skin_breadcrumbs_parent"><a href="../bigmemory-max-webhelp/to-title_bigmemory_max_config_guide.html#wwconnect_header">BigMemory Max Configuration Guide</a></span><span class="ww_skin_breadcrumbs_divider"> : </span><span class="ww_skin_breadcrumbs_parent"><a href="../bigmemory-max-webhelp/to-size_sizing_storage_tiers.html#wwconnect_header">Sizing Storage Tiers</a></span><span class="ww_skin_breadcrumbs_divider"> : </span><span class="ww_skin_breadcrumbs_current">Sizing Distributed Caches</span></div><div class="ww_skin_page_toolbar"></div></header><div id="ww3_17_10_11_12_1" class="Heading_3">Sizing Distributed Caches</div><div id="ww3_17_10_11_12_3_2" class="Body">Terracotta distributed caches can be sized as other caches except that they do not use the local disk and therefore cannot be configured with *LocalDisk sizing attributes. Distributed caches use the storage resources available on the Terracotta Server Array, BigMemory Max and the Fast Restart store. For more information about fast restartability for distributed caches, see "Terracotta Cluster with Reliability" in the <span class="Citation">Terracotta Server Array Administrator Guide</span>.</div><div id="ww3_17_10_11_12_3_4" class="Body">Cache-configuration sizing attributes behave as local configuration, which means that every node can load its own sizing attributes for the same caches. That is, while some elements and attributes are fixed by the first Ehcache configuration loaded in the cluster, cache-configuration sizing attributes can vary across nodes for the same cache.</div><div id="ww3_17_10_11_12_3_6" class="Body">For example, a cache may have the following configuration on one node:</div><div id="ww3_17_10_11_12_3_8" class="Preformatted">&lt;cache name="myCache" <br>     maxEntriesLocalHeap="10000" <br>     maxBytesLocalOffHeap="8g" <br>     eternal="false" <br>     timeToIdleSeconds="3600" <br>     timeToLiveSeconds="1800"&gt; <br>    &lt;persistence strategy="distributed"/&gt; <br>    &lt;terracotta/&gt; <br>&lt;/cache&gt;</div><div id="ww3_17_10_11_12_3_10" class="Body">The same cache may have the following size configuration on another node:</div><div id="ww3_17_10_11_12_3_12" class="Preformatted">&lt;cache name="myCache" <br>     maxEntriesLocalHeap="10000" <br>     maxBytesLocalOffHeap="10g" <br>     eternal="false" <br>     timeToIdleSeconds="3600" <br>     timeToLiveSeconds="1800"&gt; <br>    &lt;persistence strategy="distributed"/&gt; <br>    &lt;terracotta/&gt; <br>&lt;/cache&gt;</div><div id="ww3_17_10_11_12_3_14" class="Body">If the cache exceeds its size constraints on a node, then with this configuration the Terracotta Server Array provides myCache with an unlimited amount of space for spillover and backup. To impose a limit, you must set <span class="parmname">maxEntriesInCache</span> to a positive non-zero value:</div><div id="ww3_17_10_11_12_3_16" class="Preformatted">&lt;cache name="myCache" <br>     maxEntriesLocalHeap="10000" <br>     maxBytesLocalOffHeap="10g" <br>     eternal="false" <br>     timeToIdleSeconds="3600" <br>     timeToLiveSeconds="1800" <br>     maxEntriesInCache="1000000"&gt; <br>    &lt;persistence strategy="distributed"/&gt; <br>    &lt;terracotta/&gt; <br>&lt;/cache&gt;</div><div id="ww3_17_10_11_12_3_18" class="Body">The Terracotta Server Array will now evict myCache entries to stay within the limit set by <span class="parmname">maxEntriesInCache</span>. However, for any particular cache, eviction on the Terracotta Server Array is based on the largest size configured for that cache. In addition, the Terracotta Server Array will <span class="emphasis">not</span> evict any cache entries that exist on at least one client node, regardless of the limit imposed by <span class="parmname">maxEntriesInCache</span>.</div><div class="ww_skin_page_overflow"><table class="note1" summary=""><tr><td class="Table_Cell" style="padding-right: 6px; vertical-align: top"><div id="ww3_17_10_11_12_3_20_1_3_1_1_1" class="Note"><span style="font-weight: bold">Note:  </span>&nbsp;</div></td><td class="Table_Cell" style="padding-right: 6px; vertical-align: top"><div id="ww3_17_10_11_12_3_20_1_3_1_2" class="Table_Cell">If <span class="parmname">maxEntriesInCache</span> is not set, the default value 0 is used, which means that the cache is unbounded and will not undergo capacity eviction (but periodic and resource evictions are still allowed). Although bounds are not enforced by capacity eviction, an "unbounded" cache in this respect has a practical limitation equal to Integer.MAX_VALUE (app. 2 billion entries). For more information about eviction, see "Understanding Automatic Resource Management" in the <span class="Citation">Terracotta Server Array Administrator Guide</span>.</div></td></tr></table></div><div id="ww3_17_10_11_12_3_22_2" class="Section_Title">Sizing the Terracotta Server Array</div><div id="ww3_17_10_11_12_3_22_4" class="Body">Since <span class="parmname">maxEntriesInCache</span> is based on entries, you must size the Terracotta Server Array based on the expected average size of an entry. One way to discover this value is by using the Terracotta Management Console (TMC). Set up a test cluster with the expected data set, and connect it to the TMC. Then navigate to <span class="uicontrol">Application Data</span> &gt; <span class="uicontrol">Sizing Panel</span>, and review the <span class="uicontrol">Relative Cache Sizes by Tier</span> section.</div><div id="ww3_17_10_11_12_3_22_6" class="Body">Note that the average cache-entry size reported in the TMC is an estimate. For more information, see the <span class="Citation">Terracotta Management Console User Guide</span>.</div><footer><!-- Related Topics --><!--                --><!-- Back to Top --><!--             --><!-- Disqus --><!--        --><!-- Google Translation --><!--                    --><br></footer><div><div style="font-family: Arial, Verdana, Helvetica, Sans-Serif; font-size: 11px; margin-top: 20px; margin-bottom: 20px;"><span class="xref"><a href="http://documentation.softwareag.com/legal/" target="external_window">Copyright Â© <span>2010</span><span>-2016</span><span></span><span></span> Software AG, Darmstadt, Germany</a></span>.</div><hr></div><div style="font-family: Arial, Verdana, Helvetica, Sans-Serif; font-size: 13px; font-weight: bold; margin-top: 20px;"><span><img style="vertical-align:middle" src="../connect/terracotta_online.png" alt="Product Logo"><a href="https://empower.softwareag.com/ContactSupport/default.asp" target="_blank">Contact&nbsp;Support</a>
         &nbsp;&nbsp;|&nbsp;&nbsp;
       <a href="http://www.softwareag.com/corporate/community/default.asp" target="_blank">Community</a>
         &nbsp;&nbsp;|&nbsp;&nbsp;
       <a href="mailto://documentation@softwareag.com" target="_blank">Feedback&nbsp;&nbsp;</a></span></div></body></html>