<!DOCTYPE html ><html xml:lang="en" lang="en" xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html;charset=utf-8"><meta http-equiv="Content-Style-Type" content="text/css"><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"><meta http-equiv="X-UA-Compatible" content="IE=edge"><title>Troubleshooting</title><link rel="Prev" href="co-clustevt_listening_for_events.html" title="Previous"><link rel="Next" href="to-cmlst_cache_manager_event_listeners.html" title="Next"><link rel="StyleSheet" href="css/aaa_bigmem_max_all.css" type="text/css" media="all"><link rel="StyleSheet" href="css/skin.css" type="text/css" media="all"><link rel="StyleSheet" href="css/social.css" type="text/css" media="all"><link rel="StyleSheet" href="css/webworks.css" type="text/css" media="all"><!--[if IE 7]><link rel="StyleSheet" href="css/aaa_bigmem_max_all_IE7.css" type="text/css" media="all"><![endif]--><link rel="StyleSheet" href="css/print.css" type="text/css" media="print"><script type="text/javascript">
    'use strict';

    var redirect_url, page_hash;

    if (window === window.top) {
        // Redirect
        //
        redirect_url = "../index.html#page/bigmemory-max-webhelp/co-clustevt_troubleshooting.html";
        if (window.document.location.hash.length > 1) {
            // Sanitize and append it
            //
            page_hash = window.document.location.hash.substring(1);
            page_hash = page_hash.replace(/[\\><:;"]|%5C|%3C|%3E|%3A|%3B|%22/gi, '');
            redirect_url += '#' + page_hash;
        }
        window.document.location.replace(redirect_url);
    }
</script><script type="text/javascript" src="scripts/common.js"></script><script type="text/javascript" src="scripts/page.js"></script><script type="text/javascript" src="scripts/search-client.js"></script><script type="text/javascript" src="scripts/unidata.js"></script><script type="text/javascript" src="scripts/unibreak.js"></script></head><body id="phiiPpRztRefimoYbiphsmA" class="ww_skin_page_body" onload="Page.OnLoad('../index.html#page/bigmemory-max-webhelp/co-clustevt_troubleshooting.html');"><header id="wwconnect_header"><div class="ww_skin_breadcrumbs"><span class="ww_skin_breadcrumbs_parent"><a href="../bigmemory-max-webhelp/to-title_product_documentation.html#wwconnect_header">Product Documentation</a></span><span class="ww_skin_breadcrumbs_divider"> : </span><span class="ww_skin_breadcrumbs_parent"><a href="../bigmemory-max-webhelp/to-title_bigmemory_max_developer_guide.html#wwconnect_header">BigMemory Max Developer Guide</a></span><span class="ww_skin_breadcrumbs_divider"> : </span><span class="ww_skin_breadcrumbs_parent"><a href="../bigmemory-max-webhelp/to-clustevt_cluster_events.html#wwconnect_header">Cluster Events</a></span><span class="ww_skin_breadcrumbs_divider"> : </span><span class="ww_skin_breadcrumbs_current">Troubleshooting</span></div><div class="ww_skin_page_toolbar"></div></header><div id="ww3_17_8_29_12_1" class="Heading_3">Troubleshooting</div><div id="ww3_17_8_29_12_3_2" class="Body">In most cases, the Terracotta Cluster Events API behaves as expected. Unexpected results can occur under the circumstances described below.</div><div id="ww3_17_8_29_12_3_4_2" class="Section_Title">getCluster Returns Null For Programmatically Created CacheManagers</div><div id="ww3_17_8_29_12_3_4_4" class="Body">If a CacheManager instance is created and configured programmatically (without an ehcache.xml or other external configuration resource), getCluster("TERRACOTTA") might return null even if a Terracotta cluster exists. To ensure that cluster information is returned in this case, get a cache that is clustered with Terracotta:</div><div id="ww3_17_8_29_12_3_4_6" class="Preformatted">// mgr created and configured programmatically. <br>CacheManager mgr = new CacheManager(); <br>// myCache has Terracotta clustering. <br>Cache cache = mgr.getEhcache("myCache"); <br>// A Terracotta client has started, making available cluster information. <br>CacheCluster cluster = mgr.getCluster("TERRACOTTA");</div><div id="ww3_17_8_29_12_3_6_2" class="Section_Title">nodeJoined for the Current Node {#68163}</div><div id="ww3_17_8_29_12_3_6_4" class="Body">Since the current node joins the cluster before code adding the topology listener runs, the current node may never receive the nodeJoined event. You can detect if the current node is in the cluster by checking whether the cluster is online:</div><div id="ww3_17_8_29_12_3_6_6" class="Preformatted">cluster.addTopologyListener(cacheListener); <br>if(cluster.isClusterOnline()) { <br>  cacheListener.clusterOnline(cluster.getCurrentNode()); <br>}</div><div id="ww3_17_8_29_12_3_8_2" class="Section_Title">Multiple NodeJoined Events in the Same JVM</div><div id="ww3_17_8_29_12_3_8_4" class="Body">Since multiple Terracotta clients can exist in the same JVM, multiple NodeJoined events can be generated in that JVM. Remote clients will not be able to differentiate between the clients that generated the NodeJoined events.</div><footer><!-- Related Topics --><!--                --><!-- Back to Top --><!--             --><!-- Disqus --><!--        --><!-- Google Translation --><!--                    --><br></footer><div><div style="font-family: Arial, Verdana, Helvetica, Sans-Serif; font-size: 11px; margin-top: 20px; margin-bottom: 20px;"><span class="xref"><a href="http://documentation.softwareag.com/legal/" target="external_window">Copyright Â© <span>2010</span><span>-2016</span><span></span><span></span> Software AG, Darmstadt, Germany</a></span>.</div><hr></div><div style="font-family: Arial, Verdana, Helvetica, Sans-Serif; font-size: 13px; font-weight: bold; margin-top: 20px;"><span><img style="vertical-align:middle" src="../connect/terracotta_online.png" alt="Product Logo"><a href="https://empower.softwareag.com/ContactSupport/default.asp" target="_blank">Contact&nbsp;Support</a>
         &nbsp;&nbsp;|&nbsp;&nbsp;
       <a href="http://www.softwareag.com/corporate/community/default.asp" target="_blank">Community</a>
         &nbsp;&nbsp;|&nbsp;&nbsp;
       <a href="mailto://documentation@softwareag.com" target="_blank">Feedback&nbsp;&nbsp;</a></span></div></body></html>