<!DOCTYPE html ><html xml:lang="en" lang="en" xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html;charset=utf-8"><meta http-equiv="Content-Style-Type" content="text/css"><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"><meta http-equiv="X-UA-Compatible" content="IE=edge"><title>Connecting via the REST APIs</title><link rel="Prev" href="co-monitor_connecting_via_jmx.html" title="Previous"><link rel="Next" href="co-monitor_available_statistics.html" title="Next"><link rel="StyleSheet" href="css/aaa_bigmem_max_all.css" type="text/css" media="all"><link rel="StyleSheet" href="css/skin.css" type="text/css" media="all"><link rel="StyleSheet" href="css/social.css" type="text/css" media="all"><link rel="StyleSheet" href="css/webworks.css" type="text/css" media="all"><!--[if IE 7]><link rel="StyleSheet" href="css/aaa_bigmem_max_all_IE7.css" type="text/css" media="all"><![endif]--><link rel="StyleSheet" href="css/print.css" type="text/css" media="print"><script type="text/javascript">
    'use strict';

    var redirect_url, page_hash;

    if (window === window.top) {
        // Redirect
        //
        redirect_url = "../index.html#page/bigmemory-max-webhelp/co-monitor_connecting_via_rest_api.html";
        if (window.document.location.hash.length > 1) {
            // Sanitize and append it
            //
            page_hash = window.document.location.hash.substring(1);
            page_hash = page_hash.replace(/[\\><:;"]|%5C|%3C|%3E|%3A|%3B|%22/gi, '');
            redirect_url += '#' + page_hash;
        }
        window.document.location.replace(redirect_url);
    }
</script><script type="text/javascript" src="scripts/common.js"></script><script type="text/javascript" src="scripts/page.js"></script><script type="text/javascript" src="scripts/search-client.js"></script><script type="text/javascript" src="scripts/unidata.js"></script><script type="text/javascript" src="scripts/unibreak.js"></script></head><body id="pKKVu2nZIbelcO04dz1j4Gw" class="ww_skin_page_body" onload="Page.OnLoad('../index.html#page/bigmemory-max-webhelp/co-monitor_connecting_via_rest_api.html');"><header id="wwconnect_header"><div class="ww_skin_breadcrumbs"><span class="ww_skin_breadcrumbs_parent"><a href="../bigmemory-max-webhelp/to-title_component_documentation.html#wwconnect_header">Component Documentation</a></span><span class="ww_skin_breadcrumbs_divider"> : </span><span class="ww_skin_breadcrumbs_parent"><a href="../bigmemory-max-webhelp/to-title_wan_replication_guide.html#wwconnect_header">WAN Replication User Guide</a></span><span class="ww_skin_breadcrumbs_divider"> : </span><span class="ww_skin_breadcrumbs_parent"><a href="../bigmemory-max-webhelp/to-monitor_monitoring_and_managing_wan.html#wwconnect_header">Monitoring and Managing WAN Replication</a></span><span class="ww_skin_breadcrumbs_divider"> : </span><span class="ww_skin_breadcrumbs_current">Connecting via the REST APIs</span></div><div class="ww_skin_page_toolbar"></div></header><div id="ww3_21_10_17_10_1" class="Heading_3">Connecting via the REST APIs</div><div id="ww3_21_10_17_10_3_2" class="Body">The REST APIs are enabled automatically by default. No setup is required.</div><div id="ww3_21_10_17_10_3_4" class="Body">The REST endpoint for accessing WAN statistics is not available directly from the Orchestrator process. Rather, it is available from the Terracotta Management Server (TMS) and the first stripe of the Terracotta Server Array (TSA).</div><div id="ww3_21_10_17_10_3_6" class="Body">For example, the following would return a JSON object containing all the WAN-replicated cache managers in the TSA located on <span class="codeph">"localhost"</span> with a management port of <span class="codeph">46266</span>.</div><div id="ww3_21_10_17_10_3_8" class="Preformatted">http://localhost:46266/tc-management-api/v2/agents/wan/cacheManagers<br></div><div id="ww3_21_10_17_10_3_10" class="Body">This would return:</div><div id="ww3_21_10_17_10_3_12" class="Preformatted">{<br>    "agentId": "embedded",<br>    "apiVersion": "v2",<br>    "entities": [<br>      {<br>                "agentId": "127.0.0.1_63613",<br>                "cacheManagerName": "test",<br>                "cacheNames": [<br>                  "test-cache-1"<br>                ]<br>      }<br>    ],<br>    "exceptionEntities": [<br><br>    ]<br>}</div><div id="ww3_21_10_17_10_3_14" class="Body">To narrow the view to just a particular cache manager, you can add <span class="codeph">names=</span><span class="var-in-codeph">&lt;cache manager name&gt;</span> to the above URL as follows:</div><div id="ww3_21_10_17_10_3_16" class="Preformatted">http://localhost:46266/tc-management-api/v2/agents/wan/cacheManagers;names=test</div><div id="ww3_21_10_17_10_3_18" class="Body">To get the list of caches inside the cache manager, you can further drill down by appending <span class="codeph">/caches tonames=</span><span class="var-in-codeph">&lt;cache manager name&gt;</span> as follows:</div><div id="ww3_21_10_17_10_3_20" class="Preformatted">http://localhost:46266/tc-management-api/v2/agents/wan/cacheManagers;names=test/caches<br></div><div id="ww3_21_10_17_10_3_22" class="Body">This would return:</div><div id="ww3_21_10_17_10_3_24" class="Preformatted">{<br>    "agentId": "embedded",<br>    "apiVersion": "v2",<br>    "entities": [<br>       {<br>           "agentId": "127.0.0.1_63613",<br>           "cacheManagerName": "test",<br>           "cacheName": "test-cache-1",<br>           "attributes": {<br>               "cluster-listener.buffer.size": 0,<br>               "topology.replicas": [<br>                   "localhost:11477"<br>               ],<br>               "topology.master": "localhost:43051",<br>               "config.replication-mode": "UNIDIRECTIONAL"<br>              }<br>       }<br>    ],<br>    "exceptionEntities": [<br><br>    ]<br>}</div><div id="ww3_21_10_17_10_3_26" class="Body">The statistics returned from the REST interface are the same as those returned from the JMX interface. They are found inside the attributes map in the returned JSON object.</div><div id="ww3_21_10_17_10_3_28" class="Body">If you want to drill down into a replica's statistics for a given cache, you can append <span class="codeph">/replicas tonames=</span><span class="var-in-codeph">&lt;cache manager name&gt;</span><span class="codeph">/caches</span>. The following would give you the full list of connected replicas with their relevant statistics:</div><div id="ww3_21_10_17_10_3_30" class="Preformatted">http://localhost:46266/tc-management-api/v2/agents/wan/cacheManagers;names=test/<br>caches/replicas</div><div id="ww3_21_10_17_10_3_32" class="Body">The following would return only the statistics for the given replica at localhost_25394.</div><div id="ww3_21_10_17_10_3_34" class="Preformatted">http://localhost:46266/tc-management-api/v2/agents/wan/<br>cacheManagers;names=test/caches/replicas;names=localhost_25394</div><div id="ww3_21_10_17_10_3_36" class="Body">For each level of statistics, it is also possible to narrow the view to show only a single statistical attribute by specifying the name of attribute with the <span class="codeph">?show=</span> parameter. For example, to restrict the returned attributes to only show the <span class="codeph">sync.tps.Count</span> attribute, specify this:</div><div id="ww3_21_10_17_10_3_38" class="Preformatted">http://localhost:46266/tc-management-api/v2/agents/wan/cacheManagers;<br>names=test/caches/replicas;names=localhost_25394?show=sync.tps.Count</div><div id="ww3_21_10_17_10_3_40" class="Body">Ths would return:</div><div id="ww3_21_10_17_10_3_42" class="Preformatted">{<br>    "agentId": "embedded",<br>    "apiVersion": "v2",<br>    "entities": [<br>       {<br>           "agentId": "127.0.0.1_63613",<br>           "cacheManagerName": "test",<br>           "cacheName": "test-cache-1",<br>           "attributes": {<br>               "sync.tps.Count": 0,<br>           },<br>           "replica": "localhost_25394"<br>       }<br>    ],<br>    "exceptionEntities": [<br><br>    ]<br>}</div><div id="ww3_21_10_17_10_3_44" class="Body">As a convenience, it is also possible to select attributes based on a prefix. This would be useful for returning all the views of a given statistic, or for returning all statistics in a given category. For example:</div><div id="ww3_21_10_17_10_3_46" class="Preformatted">http://localhost:46266/tc-management-api/v2/agents/wan/cacheManagers;<br>names=test/caches;names=test-cache-1?showPrefix=topology<br></div><div id="ww3_21_10_17_10_3_48" class="Body">The above example would return all attributes beginning with <span class="codeph">topology</span>, as follows:</div><div id="ww3_21_10_17_10_3_50" class="Preformatted">{<br>  "agentId": "localhost_62890",<br>  "entities": [<br>       {<br>          "agentId": "embedded",<br>          "cacheManagerName": "test",<br>          "cacheName": "test-cache-1",<br>          "attributes": {<br>                                "topology.replicas": [],<br>                                "topology.master": "localhost:32567"<br>                                   }<br>       }<br>    ],<br>   "exceptionEntities": [],<br>   "apiVersion": "v2"<br>}</div><div id="ww3_21_10_17_10_3_52" class="Body">You can view the configuration for a given orchestrator as follows:</div><div id="ww3_21_10_17_10_3_54" class="Preformatted">http://localhost:46266/tc-management-api/v2/agents/wan/config</div><div id="ww3_21_10_17_10_3_56" class="Body">This would return:</div><div id="ww3_21_10_17_10_3_58" class="Preformatted">{<br>   "agentId":"embedded",<br>   "apiVersion":"v2",<br>   "entities":[<br>      {<br>         "agentId":"127.0.0.1_63613",<br>         "config":<br>             "&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n<br>                &lt;wan-config xmlns=\"http://config.wan.terracottatech.com\"&gt;\n  <br>                   &lt;bind host=\"10.60.29.127\" port=\"9001\"/&gt;\n  <br>                   &lt;logs&gt;logs&lt;/logs&gt;\n  <br>                   &lt;monitoringEnabled&gt;true&lt;/monitoringEnabled&gt;\n\n  <br>                   &lt;cacheManager ehcacheConfigURI=\"file://&lt;path to ehcache&gt;/ehcache.xml\"&gt;\n    <br>                      &lt;cache name=\"one\"&gt;\n      <br>                         &lt;master host=\"masterip\" port=\"9001\"/&gt;\n    <br>                      &lt;/cache&gt;\n    <br>                      &lt;cache name=\"two\"&gt;\n      <br>                         &lt;master host=\"master ip\" port=\"9001\"/&gt;\n    <br>                      &lt;/cache&gt;\n  <br>                   &lt;/cacheManager&gt;\n<br>                &lt;/wan-config&gt;\n"<br>      }<br>   ],<br>   "exceptionEntities":[<br>   ]<br>}<br></div><footer><!-- Related Topics --><!--                --><!-- Back to Top --><!--             --><!-- Disqus --><!--        --><!-- Google Translation --><!--                    --><br></footer><div><div style="font-family: Arial, Verdana, Helvetica, Sans-Serif; font-size: 11px; margin-top: 20px; margin-bottom: 20px;"><span class="xref"><a href="http://documentation.softwareag.com/legal/" target="external_window">Copyright © <span>2010</span><span>-2016</span><span></span><span></span> Software AG, Darmstadt, Germany</a></span>.</div><hr></div><div style="font-family: Arial, Verdana, Helvetica, Sans-Serif; font-size: 13px; font-weight: bold; margin-top: 20px;"><span><img style="vertical-align:middle" src="../connect/terracotta_online.png" alt="Product Logo"><a href="https://empower.softwareag.com/ContactSupport/default.asp" target="_blank">Contact&nbsp;Support</a>
         &nbsp;&nbsp;|&nbsp;&nbsp;
       <a href="http://www.softwareag.com/corporate/community/default.asp" target="_blank">Community</a>
         &nbsp;&nbsp;|&nbsp;&nbsp;
       <a href="mailto://documentation@softwareag.com" target="_blank">Feedback&nbsp;&nbsp;</a></span></div></body></html>