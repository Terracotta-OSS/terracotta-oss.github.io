<!DOCTYPE html ><html xml:lang="en" lang="en" xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html;charset=utf-8"><meta http-equiv="Content-Style-Type" content="text/css"><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"><meta http-equiv="X-UA-Compatible" content="IE=edge"><title>Tuning for Nonstop Timeouts and Behaviors</title><link rel="Prev" href="co-nstop_nonstop_timeouts_and_behaviors.html" title="Previous"><link rel="Next" href="co-nstop_nonstop_exceptions.html" title="Next"><link rel="StyleSheet" href="css/aaa_bigmem_max_all.css" type="text/css" media="all"><link rel="StyleSheet" href="css/skin.css" type="text/css" media="all"><link rel="StyleSheet" href="css/social.css" type="text/css" media="all"><link rel="StyleSheet" href="css/webworks.css" type="text/css" media="all"><!--[if IE 7]><link rel="StyleSheet" href="css/aaa_bigmem_max_all_IE7.css" type="text/css" media="all"><![endif]--><link rel="StyleSheet" href="css/print.css" type="text/css" media="print"><script type="text/javascript">
    'use strict';

    var redirect_url, page_hash;

    if (window === window.top) {
        // Redirect
        //
        redirect_url = "../index.html#page/bigmemory-max-webhelp/co-nstop_tuning_timeouts_and_behaviors.html";
        if (window.document.location.hash.length > 1) {
            // Sanitize and append it
            //
            page_hash = window.document.location.hash.substring(1);
            page_hash = page_hash.replace(/[\\><:;"]|%5C|%3C|%3E|%3A|%3B|%22/gi, '');
            redirect_url += '#' + page_hash;
        }
        window.document.location.replace(redirect_url);
    }
</script><script type="text/javascript" src="scripts/common.js"></script><script type="text/javascript" src="scripts/page.js"></script><script type="text/javascript" src="scripts/search-client.js"></script><script type="text/javascript" src="scripts/unidata.js"></script><script type="text/javascript" src="scripts/unibreak.js"></script></head><body id="pLANgXwwhiUlWx5qcL7D8gw" class="ww_skin_page_body" onload="Page.OnLoad('../index.html#page/bigmemory-max-webhelp/co-nstop_tuning_timeouts_and_behaviors.html');"><header id="wwconnect_header"><div class="ww_skin_breadcrumbs"><span class="ww_skin_breadcrumbs_parent"><a href="../bigmemory-max-webhelp/to-title_product_documentation.html#wwconnect_header">Product Documentation</a></span><span class="ww_skin_breadcrumbs_divider"> : </span><span class="ww_skin_breadcrumbs_parent"><a href="../bigmemory-max-webhelp/to-title_bigmemory_max_config_guide.html#wwconnect_header">BigMemory Max Configuration Guide</a></span><span class="ww_skin_breadcrumbs_divider"> : </span><span class="ww_skin_breadcrumbs_parent"><a href="../bigmemory-max-webhelp/to-nstop_configuring_nonstop_operation.html#wwconnect_header">Configuring Nonstop Operation</a></span><span class="ww_skin_breadcrumbs_divider"> : </span><span class="ww_skin_breadcrumbs_current">Tuning for Nonstop Timeouts and Behaviors</span></div><div class="ww_skin_page_toolbar"></div></header><div id="ww3_17_10_21_12_1" class="Heading_3">Tuning for Nonstop Timeouts and Behaviors</div><div id="ww3_17_10_21_12_3_2_2" class="Body">You can tune the default timeout values and behaviors of nonstop caches to fit your environment.</div><div id="ww3_17_10_21_12_3_4_2" class="Section_Title">Tuning for Network Interruptions</div><div id="ww3_17_10_21_12_3_4_4" class="Body">For example, in an environment with regular network interruptions, consider disabling <span class="parmname">immediateTimeout</span> and increasing <span class="parmname">timeoutMillis</span> to prevent timeouts for most of the interruptions.</div><div id="ww3_17_10_21_12_3_4_6" class="Body">For a cluster that experiences regular but short network interruptions, and in which caches clustered with Terracotta carry read-mostly data or there is tolerance of potentially stale data, you may want to set <span class="parmname">timeoutBehavior</span> to <span class="parmname">localReads</span>.</div><div id="ww3_17_10_21_12_3_6_2" class="Section_Title">Tuning for Slow Cache Operations</div><div id="ww3_17_10_21_12_3_6_4" class="Body">In an environment where cache operations can be slow to return and data is required to always be in sync, increase <span class="parmname">timeoutMillis</span> to prevent frequent timeouts. Set <span class="parmname">timeoutBehavior</span> to <span class="parmname">noop</span> to force the application to get data from another source or <span class="parmname">exception</span> if the application should stop.</div><div id="ww3_17_10_21_12_3_6_6" class="Body">For example, a cache.acquireWriteLockOnKey(key) operation may exceed the nonstop timeout while waiting for a lock. This would trigger nonstop mode only because the lock couldn't be acquired in time. Using cache.tryWriteLockOnKey(key, timeout), with the method's timeout set to less than the nonstop timeout, avoids this problem.</div><div id="ww3_17_10_21_12_3_8_2" class="Section_Title">Bulk Loading</div><div id="ww3_17_10_21_12_3_8_4" class="Body">If a nonstop cache is bulk-loaded using the Bulk-Load API, a multiplier is applied to the configured nonstop timeout whenever the method net.sf.ehcache.Ehcache.setNodeBulkLoadEnabled(boolean) is used. The default value of the multiplier is 10. You can tune the multiplier using the <span class="parmname">bulkOpsTimeoutMultiplyFactor</span> system property:</div><div id="ww3_17_10_21_12_3_8_6" class="Preformatted">-Dnet.sf.ehcache.nonstop.bulkOpsTimeoutMultiplyFactor=10</div><div id="ww3_17_10_21_12_3_8_8" class="Body">Note that when nonstop is enabled, the cache size displayed in the Terracotta Management Console is subject to the <span class="parmname">bulkOpsTimeoutMultiplyFactor</span>. Increasing this multiplier on the clients can facilitate more accurate size reporting.</div><div id="ww3_17_10_21_12_3_8_10" class="Body">This multiplier also affects the methods:</div><div id="ww3_17_10_21_12_3_8_10_2" class="Lines">net.sf.ehcache.Ehcache.getAll()</div><div id="ww3_17_10_21_12_3_8_10_4" class="Lines">net.sf.ehcache.Ehcache.removeAll()</div><div id="ww3_17_10_21_12_3_8_10_6" class="Lines">net.sf.ehcache.Ehcache.removeAll(boolean)</div><div id="ww3_17_10_21_12_3_10_2" class="Section_Title">Printing Stack Traces on Exceptions</div><div id="ww3_17_10_21_12_3_10_4" class="Body">You can turn on additional logging (at the INFO level) for nonstop timeouts using:</div><div id="ww3_17_10_21_12_3_10_6" class="Preformatted">-Dnet.sf.ehcache.nonstop.printStackTraceOnException=true</div><div id="ww3_17_10_21_12_3_10_8" class="Body">This is a dynamic property that can also be managed programmatically:</div><div id="ww3_17_10_21_12_3_10_10" class="Preformatted">System.setProperty(PRINT_STACK_TRACE_ON_EXCEPTION_PROPERTY, "true")</div><div id="ww3_17_10_21_12_3_10_12" class="Body">This property logs the stack trace for the nonstop thread. Note that, with this property set, log files can become very large in environments in which a large number of timeouts occur.</div><footer><!-- Related Topics --><!--                --><!-- Back to Top --><!--             --><!-- Disqus --><!--        --><!-- Google Translation --><!--                    --><br></footer><div><div style="font-family: Arial, Verdana, Helvetica, Sans-Serif; font-size: 11px; margin-top: 20px; margin-bottom: 20px;"><span class="xref"><a href="http://documentation.softwareag.com/legal/" target="external_window">Copyright Â© <span>2010</span><span>-2016</span><span></span><span></span> Software AG, Darmstadt, Germany</a></span>.</div><hr></div><div style="font-family: Arial, Verdana, Helvetica, Sans-Serif; font-size: 13px; font-weight: bold; margin-top: 20px;"><span><img style="vertical-align:middle" src="../connect/terracotta_online.png" alt="Product Logo"><a href="https://empower.softwareag.com/ContactSupport/default.asp" target="_blank">Contact&nbsp;Support</a>
         &nbsp;&nbsp;|&nbsp;&nbsp;
       <a href="http://www.softwareag.com/corporate/community/default.asp" target="_blank">Community</a>
         &nbsp;&nbsp;|&nbsp;&nbsp;
       <a href="mailto://documentation@softwareag.com" target="_blank">Feedback&nbsp;&nbsp;</a></span></div></body></html>