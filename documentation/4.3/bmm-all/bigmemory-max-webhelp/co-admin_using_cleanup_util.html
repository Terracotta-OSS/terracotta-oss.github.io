<!DOCTYPE html ><html xml:lang="en" lang="en" xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html;charset=utf-8"><meta http-equiv="Content-Style-Type" content="text/css"><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"><meta http-equiv="X-UA-Compatible" content="IE=edge"><title>Using the Cleanup Utility</title><link rel="Prev" href="co-admin_working_with_replication_logs.html" title="Previous"><link rel="Next" href="co-admin_syncing_replica_caches.html" title="Next"><link rel="StyleSheet" href="css/aaa_bigmem_max_all.css" type="text/css" media="all"><link rel="StyleSheet" href="css/skin.css" type="text/css" media="all"><link rel="StyleSheet" href="css/social.css" type="text/css" media="all"><link rel="StyleSheet" href="css/webworks.css" type="text/css" media="all"><!--[if IE 7]><link rel="StyleSheet" href="css/aaa_bigmem_max_all_IE7.css" type="text/css" media="all"><![endif]--><link rel="StyleSheet" href="css/print.css" type="text/css" media="print"><script type="text/javascript">
    'use strict';

    var redirect_url, page_hash;

    if (window === window.top) {
        // Redirect
        //
        redirect_url = "../index.html#page/bigmemory-max-webhelp/co-admin_using_cleanup_util.html";
        if (window.document.location.hash.length > 1) {
            // Sanitize and append it
            //
            page_hash = window.document.location.hash.substring(1);
            page_hash = page_hash.replace(/[\\><:;"]|%5C|%3C|%3E|%3A|%3B|%22/gi, '');
            redirect_url += '#' + page_hash;
        }
        window.document.location.replace(redirect_url);
    }
</script><script type="text/javascript" src="scripts/common.js"></script><script type="text/javascript" src="scripts/page.js"></script><script type="text/javascript" src="scripts/search-client.js"></script><script type="text/javascript" src="scripts/unidata.js"></script><script type="text/javascript" src="scripts/unibreak.js"></script></head><body id="pdigdTiEdy2TUqnOBA_002baOSg" class="ww_skin_page_body" onload="Page.OnLoad('../index.html#page/bigmemory-max-webhelp/co-admin_using_cleanup_util.html');"><header id="wwconnect_header"><div class="ww_skin_breadcrumbs"><span class="ww_skin_breadcrumbs_parent"><a href="../bigmemory-max-webhelp/to-title_component_documentation.html#wwconnect_header">Component Documentation</a></span><span class="ww_skin_breadcrumbs_divider"> : </span><span class="ww_skin_breadcrumbs_parent"><a href="../bigmemory-max-webhelp/to-title_wan_replication_guide.html#wwconnect_header">WAN Replication User Guide</a></span><span class="ww_skin_breadcrumbs_divider"> : </span><span class="ww_skin_breadcrumbs_parent"><a href="../bigmemory-max-webhelp/to-admin_managing_wan_replication.html#wwconnect_header">Administering WAN Replication</a></span><span class="ww_skin_breadcrumbs_divider"> : </span><span class="ww_skin_breadcrumbs_current">Using the Cleanup Utility</span></div><div class="ww_skin_page_toolbar"></div></header><div id="ww3_21_10_13_8_1" class="Heading_3">Using the Cleanup Utility</div><div id="ww3_21_10_13_8_3_2_2" class="Body">If a cache that was registered with a TSA subsequently becomes inactive, then when the cache becomes active again, the TSA will attempt to verify that it has the same configuration. Therefore, in order to change the WAN enabled/disabled status of caches that have already been registered in a TSA, the existing WAN information will need to be removed. The <span class="filepath">cleanup-wan-metadata</span> utility, found in the /server/bin directory of the BigMemory kit, is provided for this purpose.</div><div id="ww3_21_10_13_8_3_2_4" class="Body">To run the script:</div><div id="ww3_21_10_13_8_3_2_6" class="Preformatted">cleanup-wan-metadata.sh -f "configLocation"</div><div id="ww3_21_10_13_8_3_2_8" class="Body">The script requires the <span class="parmname">configLocation</span> argument, which is the URI location to either a <span class="filepath">wan_config.xml</span> file or an <span class="filepath">ehcache.xml</span> file.</div><div id="ww3_21_10_13_8_3_2_10" class="Body">If the <span class="codeph">configLocation</span> specifies an <span class="filepath">ehcache.xml</span>, the script performs cleanup all the caches mentioned in it. If the <span class="codeph">configLocation</span> specifies a <span class="filepath">wan_config.xml</span>, the script will look for all the <span class="filepath">ehcache.xml</span> locations listed in it and clean up their caches.</div><div id="ww3_21_10_13_8_3_2_12" class="Body">The cleanup is performed for every cache, whether WAN-enabled or not. This is useful when you want to convert a WAN-enabled cache to non-WAN cache, or a non-WAN cache to a WAN-enabled cache.</div><div id="ww3_21_10_13_8_3_2_14" class="Body">Note that the script does not modify <span class="filepath">ehcache.xml</span> or <span class="filepath">wan-config.xml</span> files in any way. It simply removes WAN-related information from Terracotta servers.</div><div id="ww3_21_10_13_8_3_4_2" class="Section_Title">Procedure to convert caches</div><div id="ww3_21_10_13_8_3_4_4" class="Body">In a wan-enabled system, if you need to EITHER convert a wan-enabled cache to a non-wan cache OR convert a non-wan cache to a wan-enabled-cache, follow the below steps:</div><div id="ww3_21_10_13_8_3_4_6_2" class="Numbered_1"><span class="WebWorks_Number" style="width: 18pt"><span>1. </span></span>Bring down all the clients and Orchestrator.</div><div id="ww3_21_10_13_8_3_4_6_4" class="Numbered_1"><span class="WebWorks_Number" style="width: 18pt"><span>2. </span></span>Modify the <span class="filepath">wan-config.xml</span> and the <span class="filepath">ehcache.xml</span> files as per the new configuration requirement.</div><div id="ww3_21_10_13_8_3_4_6_6" class="Numbered_1"><span class="WebWorks_Number" style="width: 18pt"><span>3. </span></span>Run the <span class="filepath">cleanup-wan-metadata</span> script with the new configuration as the parameter.</div><div id="ww3_21_10_13_8_3_4_6_8" class="Numbered_1"><span class="WebWorks_Number" style="width: 18pt"><span>4. </span></span>Start the Orchestrator and clients again with the new configuration files.</div><footer><!-- Related Topics --><!--                --><!-- Back to Top --><!--             --><!-- Disqus --><!--        --><!-- Google Translation --><!--                    --><br></footer><div><div style="font-family: Arial, Verdana, Helvetica, Sans-Serif; font-size: 11px; margin-top: 20px; margin-bottom: 20px;"><span class="xref"><a href="http://documentation.softwareag.com/legal/" target="external_window">Copyright Â© <span>2010</span><span>-2016</span><span></span><span></span> Software AG, Darmstadt, Germany</a></span>.</div><hr></div><div style="font-family: Arial, Verdana, Helvetica, Sans-Serif; font-size: 13px; font-weight: bold; margin-top: 20px;"><span><img style="vertical-align:middle" src="../connect/terracotta_online.png" alt="Product Logo"><a href="https://empower.softwareag.com/ContactSupport/default.asp" target="_blank">Contact&nbsp;Support</a>
         &nbsp;&nbsp;|&nbsp;&nbsp;
       <a href="http://www.softwareag.com/corporate/community/default.asp" target="_blank">Community</a>
         &nbsp;&nbsp;|&nbsp;&nbsp;
       <a href="mailto://documentation@softwareag.com" target="_blank">Feedback&nbsp;&nbsp;</a></span></div></body></html>