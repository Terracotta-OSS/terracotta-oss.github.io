<!DOCTYPE html ><html xml:lang="en" lang="en" xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html;charset=utf-8"><meta http-equiv="Content-Style-Type" content="text/css"><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"><meta http-equiv="X-UA-Compatible" content="IE=edge"><title>Configuring a Terracotta Cluster</title><link rel="Prev" href="ta-ins_starting_the_cluster.html" title="Previous"><link rel="Next" href="to-ex_running_the_shopping_cart_example.html" title="Next"><link rel="StyleSheet" href="css/aaa_bigmem_max_all.css" type="text/css" media="all"><link rel="StyleSheet" href="css/skin.css" type="text/css" media="all"><link rel="StyleSheet" href="css/social.css" type="text/css" media="all"><link rel="StyleSheet" href="css/webworks.css" type="text/css" media="all"><!--[if IE 7]><link rel="StyleSheet" href="css/aaa_bigmem_max_all_IE7.css" type="text/css" media="all"><![endif]--><link rel="StyleSheet" href="css/print.css" type="text/css" media="print"><script type="text/javascript">
    'use strict';

    var redirect_url, page_hash;

    if (window === window.top) {
        // Redirect
        //
        redirect_url = "../index.html#page/bigmemory-max-webhelp/ta-ins_configuring-a-terracotta-cluster.html";
        if (window.document.location.hash.length > 1) {
            // Sanitize and append it
            //
            page_hash = window.document.location.hash.substring(1);
            page_hash = page_hash.replace(/[\\><:;"]|%5C|%3C|%3E|%3A|%3B|%22/gi, '');
            redirect_url += '#' + page_hash;
        }
        window.document.location.replace(redirect_url);
    }
</script><script type="text/javascript" src="scripts/common.js"></script><script type="text/javascript" src="scripts/page.js"></script><script type="text/javascript" src="scripts/search-client.js"></script><script type="text/javascript" src="scripts/unidata.js"></script><script type="text/javascript" src="scripts/unibreak.js"></script></head><body id="pMldIc8x_002fxOE9eAPKauemig" class="ww_skin_page_body" onload="Page.OnLoad('../index.html#page/bigmemory-max-webhelp/ta-ins_configuring-a-terracotta-cluster.html');"><header id="wwconnect_header"><div class="ww_skin_breadcrumbs"><span class="ww_skin_breadcrumbs_parent"><a href="../bigmemory-max-webhelp/to-title_component_documentation.html#wwconnect_header">Component Documentation</a></span><span class="ww_skin_breadcrumbs_divider"> : </span><span class="ww_skin_breadcrumbs_parent"><a href="../bigmemory-max-webhelp/to-title_web_sessions_user_guide.html#wwconnect_header">Web Sessions User Guide</a></span><span class="ww_skin_breadcrumbs_divider"> : </span><span class="ww_skin_breadcrumbs_parent"><a href="../bigmemory-max-webhelp/to-installing_and_configuring.html#wwconnect_header">Installing and Configuring Web Sessions</a></span><span class="ww_skin_breadcrumbs_divider"> : </span><span class="ww_skin_breadcrumbs_current">Configuring a Terracotta Cluster</span></div><div class="ww_skin_page_toolbar"></div></header><div id="ww3_21_14_9_14_1" class="Heading_3">Configuring a Terracotta Cluster</div><div id="ww3_21_14_9_14_3_2_2" class="Body">This step shows you how to run clients and servers on separate machines and add failover (High Availability). You will expand the Terracotta cluster and add High Availability by doing the following:</div><div id="ww3_21_14_9_14_3_2_4_2" class="List_1"><span class="WebWorks_Number" style="width: 18pt"><span><img src="bullet.gif" alt="*" border="0" width="10" height="10"></span></span>Moving the Terracotta server to its own machine</div><div id="ww3_21_14_9_14_3_2_4_4" class="List_1"><span class="WebWorks_Number" style="width: 18pt"><span><img src="bullet.gif" alt="*" border="0" width="10" height="10"></span></span>Creating a cluster with multiple Terracotta servers</div><div id="ww3_21_14_9_14_3_2_4_6" class="List_1"><span class="WebWorks_Number" style="width: 18pt"><span><img src="bullet.gif" alt="*" border="0" width="10" height="10"></span></span>Creating multiple application nodes</div><div id="ww3_21_14_9_14_3_2_6" class="Body">These tasks bring your cluster closer to a production architecture.</div><div class="ww_skin_page_overflow"><table class="note1" summary=""><tr><td class="Table_Cell" style="padding-right: 6px; vertical-align: top"><div id="ww3_21_14_9_14_3_2_8_1_3_1_1_1" class="Note"><span style="font-weight: bold">Note:  </span>&nbsp;</div></td><td class="Table_Cell" style="padding-right: 6px; vertical-align: top"><div id="ww3_21_14_9_14_3_2_8_1_3_1_2" class="Table_Cell">For additional details about configuring a Terracotta cluster, see the "Configuring a Terracotta Server Array" and "Terracotta Configuration Parameters" chapters in the <span class="Citation">BigMemory Max Administrator Guide</span>. For additional details about configuring a cluster for high availability, see the <span class="Citation">BigMemory Max High-Availability Guide</span>.</div></td></tr></table></div><div id="ww3_21_14_9_14_3_2_10" class="procedure">To configure a Terracotta cluster</div><div id="ww3_21_14_9_14_3_4_2" class="Step_1"><span class="WebWorks_Number" style="width: 18pt"><span>1. </span></span><span class="Command">Shut down the Terracotta cluster. </span></div><div id="ww3_21_14_9_14_3_4_4" class="Step_1"><span class="WebWorks_Number" style="width: 18pt"><span>2. </span></span><span class="Command">Create a Terracotta configuration file called </span><span class="filepath">tc-config.xml</span><span class="Command"> with contents similar to the following: </span></div><div id="ww3_21_14_9_14_3_4_4_5_2" class="Preformatted_1">&lt;?xml version="1.0" encoding="UTF-8"?&gt;<br>&lt;!-- All content copyright Terracotta, Inc., unless otherwise indicated.<br> All rights reserved. --&gt;<br>&lt;tc:tc-config xsi:schemaLocation="http://www.terracotta.org/schema/terracotta-9.xsd"<br>xmlns:tc="http://www.terracotta.org/config"<br>xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"&gt;<br><br> &lt;servers&gt;<br>   &lt;!-- Sets where the Terracotta server can be found. <br>    Replace the value of host with the server's IP address. --&gt;<br>   &lt;server host="server.1.ip.address" name="Server1"&gt;<br>     &lt;data&gt;%(user.home)/terracotta/server-data&lt;/data&gt;<br>     &lt;logs&gt;%(user.home)/terracotta/server-logs&lt;/logs&gt;<br>   &lt;/server&gt;<br>   &lt;!-- If using a standby Terracotta server, also referred to as <br>    an ACTIVE-PASSIVE configuration, add the second server here. --&gt;<br>   &lt;server host="server.2.ip.address" name="Server2"&gt;<br>     &lt;data&gt;%(user.home)/terracotta/server-data&lt;/data&gt;<br>     &lt;logs&gt;%(user.home)/terracotta/server-logs&lt;/logs&gt;<br>   &lt;/server&gt;<br> &lt;/servers&gt;<br> &lt;!-- Sets where the generated client logs are saved on clients. --&gt;<br> &lt;clients&gt;<br>   &lt;logs&gt;%(user.home)/terracotta/client-logs&lt;/logs&gt;<br> &lt;/clients&gt;<br>&lt;/tc:tc-config&gt;</div><div id="ww3_21_14_9_14_3_4_6" class="Step_1"><span class="WebWorks_Number" style="width: 18pt"><span>3. </span></span><span class="Command">Install Terracotta on a separate machine for each server you configure in </span><span class="filepath">tc-config.xml</span><span class="Command">. </span></div><div id="ww3_21_14_9_14_3_4_8" class="Step_1"><span class="WebWorks_Number" style="width: 18pt"><span>4. </span></span><span class="Command">Copy the </span><span class="filepath">tc-config.xml</span><span class="Command"> to a location accessible to the Terracotta servers. </span></div><div id="ww3_21_14_9_14_3_4_10" class="Step_1"><span class="WebWorks_Number" style="width: 18pt"><span>5. </span></span><span class="Command">Install the Sessions JAR files on each application node you want to run in the cluster. Be sure to install your application and any application servers on each node. For information about installing the Sessions JAR files, see </span><span class="local"><a href="../bigmemory-max-webhelp/co-ins_installing_the_sessions_jar.html#wwconnect_header" title="Installing the Session JARS">Installing the Session JARS</a></span><span class="Command">. </span></div><div id="ww3_21_14_9_14_3_4_12" class="Step_1"><span class="WebWorks_Number" style="width: 18pt"><span>6. </span></span><span class="Command">Edit </span><span class="filepath">web.xml</span><span class="Command"> on each application server to list both Terracotta servers: </span></div><div id="ww3_21_14_9_14_3_4_12_5_2" class="Preformatted_1">&lt;param-value&gt;server.1.ip.address:9510,server.2.ip.address:9510&lt;/param-value&gt;</div><div id="ww3_21_14_9_14_3_4_14" class="Step_1"><span class="WebWorks_Number" style="width: 18pt"><span>7. </span></span><span class="Command">Start the Terracotta server in the following way, replacing "Server1" with the name you gave your server in </span><span class="filepath">tc-config.xml</span><span class="Command">: </span></div><div id="ww3_21_14_9_14_3_4_14_5_2" class="Body_1">UNIX/Linux</div><div id="ww3_21_14_9_14_3_4_14_5_4" class="Preformatted_1">[PROMPT] ${TERRACOTTA_HOME}/server/bin/start-tc-server.sh -f &lt;path/to/tc-config.xml&gt; \<br>   -n Server1 </div><div id="ww3_21_14_9_14_3_4_14_5_6" class="Body_1">Microsoft Windows</div><div id="ww3_21_14_9_14_3_4_14_5_8" class="Preformatted_1">[PROMPT] ${TERRACOTTA_HOME}\server\bin\start-tc-server.bat -f &lt;path\to\tc-config.xml&gt; ^<br>   -n Server1</div><div id="ww3_21_14_9_14_3_4_14_5_10" class="Body_1">If you configured a second server, start that server in the same way on its machine, entering its name after the <span class="parmname">-n</span> flag. The second server to start up becomes the hot standby, or PASSIVE. Any other servers you configured will also start up as standby servers.</div><div id="ww3_21_14_9_14_3_4_16" class="Step_1"><span class="WebWorks_Number" style="width: 18pt"><span>8. </span></span><span class="Command">Start all application servers. </span></div><div id="ww3_21_14_9_14_3_4_18" class="Step_1"><span class="WebWorks_Number" style="width: 18pt"><span>9. </span></span><span class="Command">Start your JMX console tool and view the cluster. For information about using JMX with Web Sessions, see </span><span class="local"><a href="../bigmemory-max-webhelp/co_use_managing_web_sessions_with_jmx.html#wwconnect_header" title="Managing Web Sessions Using JMX">Managing Web Sessions Using JMX</a></span><span class="Command">. </span></div><footer><!-- Related Topics --><!--                --><!-- Back to Top --><!--             --><!-- Disqus --><!--        --><!-- Google Translation --><!--                    --><br></footer><div><div style="font-family: Arial, Verdana, Helvetica, Sans-Serif; font-size: 11px; margin-top: 20px; margin-bottom: 20px;"><span class="xref"><a href="http://documentation.softwareag.com/legal/" target="external_window">Copyright © <span>2010</span><span>-2016</span><span></span><span></span> Software AG, Darmstadt, Germany</a></span>.</div><hr></div><div style="font-family: Arial, Verdana, Helvetica, Sans-Serif; font-size: 13px; font-weight: bold; margin-top: 20px;"><span><img style="vertical-align:middle" src="../connect/terracotta_online.png" alt="Product Logo"><a href="https://empower.softwareag.com/ContactSupport/default.asp" target="_blank">Contact&nbsp;Support</a>
         &nbsp;&nbsp;|&nbsp;&nbsp;
       <a href="http://www.softwareag.com/corporate/community/default.asp" target="_blank">Community</a>
         &nbsp;&nbsp;|&nbsp;&nbsp;
       <a href="mailto://documentation@softwareag.com" target="_blank">Feedback&nbsp;&nbsp;</a></span></div></body></html>