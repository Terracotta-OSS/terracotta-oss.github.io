<!DOCTYPE html ><html xml:lang="en" lang="en" xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html;charset=utf-8"><meta http-equiv="Content-Style-Type" content="text/css"><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"><meta http-equiv="X-UA-Compatible" content="IE=edge"><title>How Terracotta Servers Get Configured</title><link rel="Prev" href="co-cfg_about_terracotta_server_configuration.html" title="Previous"><link rel="Next" href="co-cfg_how_clients_get_configured.html" title="Next"><link rel="StyleSheet" href="css/aaa_bigmem_max_all.css" type="text/css" media="all"><link rel="StyleSheet" href="css/skin.css" type="text/css" media="all"><link rel="StyleSheet" href="css/social.css" type="text/css" media="all"><link rel="StyleSheet" href="css/webworks.css" type="text/css" media="all"><!--[if IE 7]><link rel="StyleSheet" href="css/aaa_bigmem_max_all_IE7.css" type="text/css" media="all"><![endif]--><link rel="StyleSheet" href="css/print.css" type="text/css" media="print"><script type="text/javascript">
    'use strict';

    var redirect_url, page_hash;

    if (window === window.top) {
        // Redirect
        //
        redirect_url = "../index.html#page/bigmemory-max-webhelp/co-cfg_how_servers_get_configured.html";
        if (window.document.location.hash.length > 1) {
            // Sanitize and append it
            //
            page_hash = window.document.location.hash.substring(1);
            page_hash = page_hash.replace(/[\\><:;"]|%5C|%3C|%3E|%3A|%3B|%22/gi, '');
            redirect_url += '#' + page_hash;
        }
        window.document.location.replace(redirect_url);
    }
</script><script type="text/javascript" src="scripts/common.js"></script><script type="text/javascript" src="scripts/page.js"></script><script type="text/javascript" src="scripts/search-client.js"></script><script type="text/javascript" src="scripts/unidata.js"></script><script type="text/javascript" src="scripts/unibreak.js"></script></head><body id="pnVYxU5ESGAKSADu5QDcgTA" class="ww_skin_page_body" onload="Page.OnLoad('../index.html#page/bigmemory-max-webhelp/co-cfg_how_servers_get_configured.html');"><header id="wwconnect_header"><div class="ww_skin_breadcrumbs"><span class="ww_skin_breadcrumbs_parent"><a href="../bigmemory-max-webhelp/to-title_product_documentation.html#wwconnect_header">Product Documentation</a></span><span class="ww_skin_breadcrumbs_divider"> : </span><span class="ww_skin_breadcrumbs_parent"><a href="../bigmemory-max-webhelp/to-title_bigmemory_max_admin_guide.html#wwconnect_header">BigMemory Max Administrator Guide</a></span><span class="ww_skin_breadcrumbs_divider"> : </span><span class="ww_skin_breadcrumbs_parent"><a href="../bigmemory-max-webhelp/to-cfg_configuring_the_tsa.html#wwconnect_header">Configuring the Terracotta Server Array</a></span><span class="ww_skin_breadcrumbs_divider"> : </span><span class="ww_skin_breadcrumbs_current">How Terracotta Servers Get Configured</span></div><div class="ww_skin_page_toolbar"></div></header><div id="ww3_17_12_11_8_1" class="Heading_3">How Terracotta Servers Get Configured</div><div id="ww3_17_12_11_8_3_2" class="Body">To configure the Terracotta server, create a <span class="filepath">tc-config.xml</span> configuration file, or update the one that is provided in the config-samples/ directory of the BigMemory Max kit. For example:</div><div id="ww3_17_12_11_8_3_4" class="Preformatted">    &lt;?xml version="1.0" encoding="UTF-8" ?&gt; <br>    &lt;tc:tc-config xmlns:tc="http://www.terracotta.org/config" <br>          xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" <br>          xsi:schemaLocation="http://www.terracotta.org/schema/terracotta-9.xsd"&gt; <br>      &lt;servers&gt; <br>        &lt;server host="localhost" name="My Server Name1"&gt; <br>          &lt;!-- Specify the path where the server should store its data. --&gt; <br>          &lt;data&gt;/local/disk/path/to/terracotta/server1-data&lt;/data&gt; <br>           &lt;!-- Specify the port where the server should listen for client <br>           traffic. --&gt; <br>           &lt;tsa-port&gt;9510&lt;/tsa-port&gt; <br>           &lt;jmx-port&gt;9520&lt;/jmx-port&gt; <br>           &lt;tsa-group-port&gt;9530&lt;/tsa-group-port&gt; <br>           &lt;management-port&gt;9540&lt;/management-port&gt; <br>           &lt;!-- Enable BigMemory on the server. --&gt; <br>           &lt;dataStorage size="800g"&gt; <br>              &lt;offheap size="200g"/&gt; <br>              &lt;!-- Hybrid storage is optional. --&gt; <br>              &lt;hybrid/&gt; <br>           &lt;/dataStorage&gt; <br>         &lt;/server&gt; <br>        &lt;server host="localhost" name="My Server Name2"&gt; <br>          &lt;data&gt;/local/disk/path/to/terracotta/server2-data&lt;/data&gt; <br>           &lt;tsa-port&gt;9510&lt;/tsa-port&gt; <br>           &lt;jmx-port&gt;9520&lt;/jmx-port&gt; <br>           &lt;tsa-group-port&gt;9530&lt;/tsa-group-port&gt; <br>           &lt;management-port&gt;9540&lt;/management-port&gt; <br>           &lt;dataStorage size="200g"&gt; <br>              &lt;offheap size="200g"/&gt; <br>           &lt;/dataStorage&gt; <br>         &lt;/server&gt; <br>        &lt;!-- Add the restartable element for Fast Restartability (optional). --&gt; <br>        &lt;restartable enabled="true"/&gt; <br>      &lt;/servers&gt; <br>      &lt;clients&gt; <br>        &lt;logs&gt;logs-%i&lt;/logs&gt; <br>      &lt;/clients&gt; <br>    &lt;/tc:tc-config&gt;</div><div id="ww3_17_12_11_8_3_6" class="Body">To successfully configure a Terracotta Server Array using the Terracotta configuration file, note the following:</div><div id="ww3_17_12_11_8_3_8_2_3" class="List_1"><span class="WebWorks_Number" style="width: 18pt"><span><img src="bullet.gif" alt="*" border="0" width="10" height="10"></span></span>Two or more servers should be defined in the &lt;servers&gt; section of the Terracotta configuration file.</div><div id="ww3_17_12_11_8_3_8_4_3" class="List_1"><span class="WebWorks_Number" style="width: 18pt"><span><img src="bullet.gif" alt="*" border="0" width="10" height="10"></span></span>&lt;tsa-port&gt; is the port that the Terracotta server listens to for client traffic.</div><div id="ww3_17_12_11_8_3_8_6_3" class="List_1"><span class="WebWorks_Number" style="width: 18pt"><span><img src="bullet.gif" alt="*" border="0" width="10" height="10"></span></span>&lt;jmx-port&gt; is the port that the Terracotta server's JMX Connector listens to.</div><div class="ww_skin_page_overflow"><table class="note2" summary=""><tr><td class="Table_Cell" style="padding-right: 6px; vertical-align: top"><div id="ww3_17_12_11_8_3_8_6_5_1_3_1_2_1" class="Note"><span style="font-weight: bold">Note:  </span>&nbsp;</div></td><td class="Table_Cell" style="padding-right: 6px; vertical-align: top"><div id="ww3_17_12_11_8_3_8_6_5_1_3_1_3" class="Table_Cell">Listening on the &lt;jmx-port&gt; is deprecated. Alternatively, use the monitoring features provided by the Terracotta Management Console (see the <span class="Citation">Terracotta Management Console User Guide</span>) and the WAN Replication Service (see the <span class="Citation">WAN Replication User Guide</span>).</div><div id="ww3_17_12_11_8_3_8_6_5_1_3_1_3_6" class="Table_Cell">&lt;jmx-port&gt; is disabled by default. If you want to enable it, add <span class="codeph">jmx-enabled="true"</span> in the &lt;server&gt; elements. For example:</div><div id="ww3_17_12_11_8_3_8_6_5_1_3_1_3_8" class="Table_Cell"><span class="codeph">&lt;server host="localhost" name="My Server Name1" jmx-enabled="true"&gt;</span></div></td></tr></table></div><div id="ww3_17_12_11_8_3_8_8_3" class="List_1"><span class="WebWorks_Number" style="width: 18pt"><span><img src="bullet.gif" alt="*" border="0" width="10" height="10"></span></span>&lt;tsa-group-port&gt; is the port used by the Terracotta server to communicate with other Terracotta servers.</div><div id="ww3_17_12_11_8_3_8_10_3" class="List_1"><span class="WebWorks_Number" style="width: 18pt"><span><img src="bullet.gif" alt="*" border="0" width="10" height="10"></span></span>&lt;management-port&gt; is the port that the Terracotta Management Console (TMC) uses.</div><div id="ww3_17_12_11_8_3_8_12_3" class="List_1"><span class="WebWorks_Number" style="width: 18pt"><span><img src="bullet.gif" alt="*" border="0" width="10" height="10"></span></span>Under &lt;servers&gt;, use either &lt;server&gt; or &lt;mirror-group&gt; configurations, but not a mixture. You may configure multiple servers or multiple mirror groups. &lt;server&gt; instances under &lt;servers&gt; work together as a mirror group. To create more than one stripe, use &lt;mirror-group&gt; instances.</div><div id="ww3_17_12_11_8_3_8_14_3" class="List_1"><span class="WebWorks_Number" style="width: 18pt"><span><img src="bullet.gif" alt="*" border="0" width="10" height="10"></span></span>Terracotta server instances must not share data directories. Each server's &lt;data&gt; element should point to a different and preferably local data directory.</div><div id="ww3_17_12_11_8_3_8_16_3" class="List_1"><span class="WebWorks_Number" style="width: 18pt"><span><img src="bullet.gif" alt="*" border="0" width="10" height="10"></span></span>For data persistence, configure fast restartability. Enabling &lt;restartable&gt; means that the shared in-memory data is backed up and, in case of failure, it is automatically restored. Setting &lt;restartable&gt; to "false" or omitting the &lt;restartable&gt; element are two ways to configure no persistence.</div><div id="ww3_17_12_11_8_3_8_18_3" class="List_1"><span class="WebWorks_Number" style="width: 18pt"><span><img src="bullet.gif" alt="*" border="0" width="10" height="10"></span></span>Each server requires an off-heap store, which allows all data to be stored in-memory, limited only by the amount of memory in your server. The minimum &lt;offheap&gt; size is 4 GB. Additional hybrid storage is optional. Specify the &lt;dataStorage&gt; size and the &lt;offheap&gt; size. The &lt;offheap&gt; size can be set to the amount of memory available in your server for data. If you enable &lt;hybrid&gt;, then the &lt;dataStorage&gt; size can exceed the &lt;offheap&gt; size.</div><div id="ww3_17_12_11_8_3_8_20_3" class="List_1"><span class="WebWorks_Number" style="width: 18pt"><span><img src="bullet.gif" alt="*" border="0" width="10" height="10"></span></span>All servers and clients should be running the same version of Terracotta and Java.</div><div class="ww_skin_page_overflow"><table class="note1" summary=""><tr><td class="Table_Cell" style="padding-right: 6px; vertical-align: top"><div id="ww3_17_12_11_8_3_10_1_3_1_1_1" class="Note"><span style="font-weight: bold">Note:  </span>&nbsp;</div></td><td class="Table_Cell" style="padding-right: 6px; vertical-align: top"><div id="ww3_17_12_11_8_3_10_1_3_1_2" class="Table_Cell">For more information about the Terracotta configuration file, see <span class="heading-page"><a href="../bigmemory-max-webhelp/to-tconfig_terracotta_confg_params.html#wwconnect_header" title="Terracotta Configuration Parameters">Terracotta Configuration Parameters</a></span>.</div></td></tr></table></div><div id="ww3_17_12_11_8_3_12_2" class="Section_Title">Server Startup Behavior</div><div id="ww3_17_12_11_8_3_12_4" class="Body">At startup, Terracotta servers load their configuration from one of the following sources:</div><div id="ww3_17_12_11_8_3_12_6_2_2_3" class="List_1"><span class="WebWorks_Number" style="width: 18pt"><span><img src="bullet.gif" alt="*" border="0" width="10" height="10"></span></span>A default configuration included with the Terracotta kit</div><div id="ww3_17_12_11_8_3_12_6_2_4_3" class="List_1"><span class="WebWorks_Number" style="width: 18pt"><span><img src="bullet.gif" alt="*" border="0" width="10" height="10"></span></span>A local or remote XML file</div><div id="ww3_17_12_11_8_3_12_8" class="Body">These sources are explored below.</div><div id="ww3_17_12_11_8_3_12_10" class="Body"><span class="inlinetitle">Default Configuration</span></div><div id="ww3_17_12_11_8_3_12_12" class="Body">If no configuration file is specified <span class="emphasis">and</span> no <span class="filepath">tc-config.xml</span> exists in the directory in which the Terracotta instance is started, then default configuration values are used.</div><div id="ww3_17_12_11_8_3_12_14" class="Body"><span class="inlinetitle">Local XML File (Default)</span></div><div id="ww3_17_12_11_8_3_12_16" class="Body">The file <span class="filepath">tc-config.xml</span> is used by default if it is located in the directory in which a Terracotta instance is started <span class="emphasis">and</span> no configuration file is explicitly specified.</div><div id="ww3_17_12_11_8_3_12_18" class="Body"><span class="inlinetitle">Local or Remote Configuration File</span></div><div id="ww3_17_12_11_8_3_12_20" class="Body">You can explicitly specify a configuration file by passing the -f option to the script used to start a Terracotta server. For example, to start a Terracotta server on UNIX/Linux using the provided script, enter:</div><div id="ww3_17_12_11_8_3_12_22" class="Preformatted"> start-tc-server.sh -f &lt;path_to_configuration_file&gt;</div><div id="ww3_17_12_11_8_3_12_24" class="Body">where <span class="varname">&lt;path_to_configuration_file&gt;</span> can be a URL or a relative directory path. In Microsoft Windows, use <span class="filepath">start-tc-server.bat</span>.</div><div class="ww_skin_page_overflow"><table class="note1" summary=""><tr><td class="Table_Cell" style="padding-right: 6px; vertical-align: top"><div id="ww3_17_12_11_8_3_12_26_1_3_1_1_1" class="Note"><span style="font-weight: bold">Note:  </span>&nbsp;</div></td><td class="Table_Cell" style="padding-right: 6px; vertical-align: top"><div id="ww3_17_12_11_8_3_12_26_1_3_1_2" class="Table_Cell">Cygwin (on Windows) is not supported for this feature.</div></td></tr></table></div><footer><!-- Related Topics --><!--                --><!-- Back to Top --><!--             --><!-- Disqus --><!--        --><!-- Google Translation --><!--                    --><br></footer><div><div style="font-family: Arial, Verdana, Helvetica, Sans-Serif; font-size: 11px; margin-top: 20px; margin-bottom: 20px;"><span class="xref"><a href="http://documentation.softwareag.com/legal/" target="external_window">Copyright © <span>2010</span><span>-2016</span><span></span><span></span> Software AG, Darmstadt, Germany</a></span>.</div><hr></div><div style="font-family: Arial, Verdana, Helvetica, Sans-Serif; font-size: 13px; font-weight: bold; margin-top: 20px;"><span><img style="vertical-align:middle" src="../connect/terracotta_online.png" alt="Product Logo"><a href="https://empower.softwareag.com/ContactSupport/default.asp" target="_blank">Contact&nbsp;Support</a>
         &nbsp;&nbsp;|&nbsp;&nbsp;
       <a href="http://www.softwareag.com/corporate/community/default.asp" target="_blank">Community</a>
         &nbsp;&nbsp;|&nbsp;&nbsp;
       <a href="mailto://documentation@softwareag.com" target="_blank">Feedback&nbsp;&nbsp;</a></span></div></body></html>