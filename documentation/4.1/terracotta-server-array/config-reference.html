<!DOCTYPE html>
<html>

  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->

  <link rel="shortcut icon"  type="image/x-icon" href="/images/favicon.ico">
  <link rel="icon" type="image/x-icon" href="/images/favicon.ico">

  <title>Terracotta</title>

  <meta name="description" content="Java's most widely used cache.">

  <link rel="canonical" href="http://www.terracotta.org/documentation/4.1/terracotta-server-array/config-reference.html">
  <link href="/feed.xml" type="application/atom+xml" rel="alternate" title="Terracotta Feed">


  <!-- Fonts -->
  <link href='https://fonts.googleapis.com/css?family=Lato:300,400,300italic,400italic' rel='stylesheet' type='text/css'>
  <link href='https://fonts.googleapis.com/css?family=Montserrat:400,700' rel='stylesheet' type='text/css'>

  <!-- Global CSS -->

  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.4.0/css/font-awesome.min.css">

  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootswatch/3.3.5/spacelab/bootstrap.min.css">


<!--
  <link rel="stylesheet" href="/plugins/highlight/styles/idea.css">
  <script src="/plugins/highlight/highlight.pack.js"></script>
  <script>hljs.initHighlightingOnLoad();</script>
-->

  <script src="https://cdn.rawgit.com/google/code-prettify/master/loader/run_prettify.js"></script>
  <script src="https://cdn.rawgit.com/google/code-prettify/master/loader/prettify.css"></script>

  <link rel="stylesheet" href="/css/main.css">

<!--
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prettify/r298/prettify.min.css">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/prettify/r298/prettify.min.js"></script>
  <script>document.addEventListener('DOMContentLoaded', prettyPrint)</script>
-->

  <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
  <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
    <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
  <![endif]-->

</head>


  <body>

    

    <!-- Fixed navbar -->
    <nav class="navbar navbar-default navbar-fixed-top">
      <div class="container">
        <div class="navbar-header">
          <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a class="site-title" href="/"><img src="/images/Terracotta_Logo_sm.png" style="margin-top: 12px;"/></a>
        </div>
        <div id="navbar" class="navbar-collapse collapse">
          <ul class="nav navbar-nav">
            <li id="tc_mnu_about"><a href="/about/"><i class="fa fa-info-circle"></i> About</a></li>
            <li id="tc_mnu_docs"><a href="/documentation/"><i class="fa fa-book"></i> Docs</a></li>
            <li id="tc_mnu_download"><a href="/downloads/"><i class="fa fa-download"></i> Download</a></li>
            <li id="tc_mnu_community" class="dropdown">
              <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false"><i class="fa fa-users"></i> Community <span class="caret"></span></a>
              <ul class="dropdown-menu">
                <li class="dropdown-header">We Love Contributors</li>
                <li><a href="/community/contribute.html"><i class="fa fa-code"></i> Contributing</a></li>
                <li><a href="/resources/"><i class="fa fa-external-link-square"></i> External Resources</a></li>
                <li><a href="/blog" target="_blank"><i class="fa fa-rss-square"></i> Terracotta Blog</a></li>
                <li role="separator" class="divider"></li>
                <li class="dropdown-header">Forums</li>
                <li><a href="https://groups.google.com/forum/#!forum/terracotta-oss" target="_blank"><i class="fa fa-commenting"></i> Users' Forum</a></li>
                <li role="separator" class="divider"></li>
                <li class="dropdown-header">Source Code</li>
                <li><a href="https://github.com/Terracotta-OSS" target="_blank"><i class="fa fa-github"></i> GitHub  Repositories</a></li>
                <li><a href="http://svn.terracotta.org/svn/tc/" target="_blank"><i class="fa fa-code-fork"></i> SVN  (Terracotta 4.x)</a></li>
                <li role="separator" class="divider"></li>
                <li class="dropdown-header">Bug Tracking</li>
                <li><a href="https://github.com/Terracotta-OSS" target="_blank"><i class="fa fa-bug"></i> GitHub  (use respective project)</a></li>
              </ul>
            </li>
          </ul>
          <ul class="nav navbar-nav navbar-right">
            <li id="tc_mnu_events"><a href="/events"><i class="fa fa-calendar"></i> News & Events</a></li>
            <li><a href="/blog"><i class="fa fa-rss-square"></i> Terracotta Blog</a></li>
          </ul>
        </div><!--/.nav-collapse -->
      </div>
    </nav>

<br/>
<br/>
<br/>


    <div class="container-fluid">
      <div id="contentTitle">
        <h1></h1>
      </div>
      <div>
        <BR/>
        <br/>

<div class="container-fluid">

  <div class="row row-offcanvas row-offcanvas-left">

    <!-- sidebar -->
    <div class="col-xs-6 col-sm-3 sidebar-offcanvas" id="sidebar" role="navigation">
        <ul class="nav">
          <li id="tc_mnu_docs_current" class="submenu"><a href="#current_version">Current Documentation</a></li>
          <li id="tc_mnu_doce_release_notes" class="submenu"><a href="http://www.terracotta.org/confluence/display/release/Home" target="_blank">Release Notes</a></li>
          <li id="tc_mnu_docs_previous" class="submenu"><a href="#historical_versions">Historical Versions</a></li>
        </ul>
    </div>

    <!-- main area -->
    <div class="col-xs-12 col-sm-9">
      <header class="post-header">
        
        <h1 class="post-title"></h1>
        <hr/>
        
      </header>
      <article class="post-content">
        <h1 id="terracotta-configuration-reference">Terracotta Configuration Reference</h1><div id="toc-container">
   <table class="toc" id="toc">
      <tbody>
         <tr>
            <td>
               <ul>
                  <li class="toc_level-1 toc_section-1">
                     <a href="#terracotta-configuration-reference">
                        <span class="toctext">Terracotta Configuration Reference</span>
                     </a>
                     <ul>
                        <li class="toc_level-2 toc_section-2">
                           <a href="#introduction">
                              <span class="toctext">Introduction</span>
                           </a>
                        </li>
                        <li class="toc_level-2 toc_section-3">
                           <a href="#configuration-variables">
                              <span class="toctext">Configuration Variables</span>
                           </a>
                        </li>
                        <li class="toc_level-2 toc_section-4">
                           <a href="#using-paths-as-values">
                              <span class="toctext">Using Paths as Values</span>
                           </a>
                        </li>
                        <li class="toc_level-2 toc_section-5">
                           <a href="#overriding-tc.properties">
                              <span class="toctext">Overriding tc.properties</span>
                           </a>
                        </li>
                        <li class="toc_level-2 toc_section-6">
                           <a href="#servers-configuration-section">
                              <span class="toctext">Servers Configuration Section</span>
                           </a>
                        </li>
                     </ul>
                  </li>
               </ul>
            </td>
         </tr>
      </tbody>
   </table>
</div>
<p>{toc|2:3}</p>

<h2 id="introduction">Introduction</h2>
<p>This document is a reference to all of the Terracotta configuration elements in the Terracotta configuration file, which is named <code class="highlighter-rouge">tc-config.xml</code> by default.</p>

<p>You can use a sample configuration file provided in the kit as the basis for your Terracotta configuration. Some samples have inline comments describing the configuration elements. Be sure to start with a clean file for your configuration.</p>

<p>The Terracotta configuration XML document is divided into the sections &lt;servers&gt; and &lt;clients&gt;. Each of these sections provides a number of configuration options relevant to its particular configuration topic.</p>

<p>
   <a id="config_modules"></a>
   <a id="integration_modules"></a>
   <a id="terracotta_integration_modules"></a>
</p>
<h2 id="configuration-variables">Configuration Variables</h2>
<p>Certain variables can be used that are interpolated by the configuration subsystem using local values:</p>

<table>
<tr><th>Variable</th><th>Interpolated Value</th></tr>
<tr><td>%h</td><td>The fully-qualified hostname</td></tr>
<tr><td>%i</td><td>The IP address</td></tr>
<tr><td>%o</td><td>The operating system</td></tr>
<tr><td>%v</td><td>The version of the operating system</td></tr>
<tr><td>%a</td><td>The CPU architecture</td></tr>
<tr><td>%H</td><td>The home directory of the user running the application</td></tr>
<tr><td>%n</td><td>The username of the user running the application</td></tr>
<tr><td>%t</td><td>The path to the temporary directory (for example, /tmp on *NIX)</td></tr>
<tr><td>%D</td><td>Time stamp (yyyyMMddHHmmssSSS)</td></tr>
<tr><td>%(_system property_)</td><td>The value of the given Java system property</td></tr>
</table>

<p>These variables can be used where appropriate, including for elements or attributes that expect strings or paths for values:</p>

<ul>
  <li>the “name”, “host” and “bind” attributes of the <code class="highlighter-rouge">&lt;server&gt;</code> element</li>
  <li>the password file location for JMX authentication</li>
  <li>client logs location</li>
  <li>server logs location</li>
  <li>server data location</li>
</ul>

<table>
<caption>NOTE: Value of %i</caption>
<tr><td>The variable %i is expanded into a value determined by the host's networking setup. In many cases that setup is in a <code>hosts</code> file containing mappings that may influence the value of %i. Test this variable in your production environment to check the value it interpolates.</td></tr>
</table>

<h2 id="using-paths-as-values">Using Paths as Values</h2>
<p>Some configuration elements take paths as values. Relative paths are interpreted relative to the current working directory (the directory from which the server was started). Specifying an absolute path is recommended.</p>

<p>
   <a id="override_props"></a>
</p>
<h2 id="overriding-tc.properties">Overriding tc.properties</h2>

<p>Every Terracotta installation has a default <code class="highlighter-rouge">tc.properties</code> file containing system properties. Normally, the settings in <code class="highlighter-rouge">tc.properties</code> are pre-tuned and should not be edited.</p>

<p>If tuning is required, you can override certain properties in <code class="highlighter-rouge">tc.properties</code> using <code class="highlighter-rouge">tc-config.xml</code>. This can make a production environment more efficient by allowing system properties to be pushed out to clients with <code class="highlighter-rouge">tc-config.xml</code>. Those system properties would normally have to be configured separately on each client.</p>

<h3 id="setting-system-properties-in-tc-config">Setting System Properties in tc-config</h3>
<p>To set a system property with the same value for all clients, you can add it to the Terracotta server’s <code class="highlighter-rouge">tc-config.xml</code> file using a configuration element with the following format:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>&lt;property name="&lt;tc_system_property&gt;" value="&lt;new_value&gt;" /&gt;
</code></pre>
</div>

<p>All <code class="highlighter-rouge">&lt;property /&gt;</code> tags must be wrapped in a <code class="highlighter-rouge">&lt;tc-properties&gt;</code> section placed at the beginning of <code class="highlighter-rouge">tc-config.xml</code>.</p>

<p>For example, to override the values of the system properties <code class="highlighter-rouge">l1.cachemanager.enabled</code> and <code class="highlighter-rouge">l1.cachemanager.leastCount</code>, add the following to the beginning of <code class="highlighter-rouge">tc-config.xml</code>:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>&lt;tc-properties&gt;
  &lt;property name="l1.cachemanager.enabled" value="false" /&gt;
  &lt;property name="l1.cachemanager.leastCount" value="4" /&gt;
&lt;/tc-properties&gt;
</code></pre>
</div>

<h3 id="override-priority">Override Priority</h3>
<p>System properties configured in <code class="highlighter-rouge">tc-config.xml</code> override the system properties in the default <code class="highlighter-rouge">tc.properties</code> file provided with the Terracotta kit. The default <code class="highlighter-rouge">tc.properties</code> file should <em>not</em> be edited or moved.</p>

<p>If you create a <em>local</em> <code class="highlighter-rouge">tc.properties</code> file in the Terracotta <code class="highlighter-rouge">lib</code> directory, system properties set in that file are used by Terracotta and will override system properties in the <em>default</em> <code class="highlighter-rouge">tc.properties</code> file. System properties in the local <code class="highlighter-rouge">tc.properties</code> file are <em>not</em> overridden by system properties configured in <code class="highlighter-rouge">tc-config.xml</code>.</p>

<p>System property values passed to Java using -D override all other configured values for that system property. In the example above, if <code class="highlighter-rouge">-Dcom.tc.l1.cachemanager.leastcount=5</code> was passed at the command line or through a script, it would override the value in <code class="highlighter-rouge">tc-config.xml</code> and <code class="highlighter-rouge">tc.properties</code>. The order of precedence is shown in the following list, with highest precedence shown last:</p>

<ol>
  <li>default <code class="highlighter-rouge">tc.properties</code></li>
  <li><code class="highlighter-rouge">tc-config.xml</code></li>
  <li>local, or user-created <code class="highlighter-rouge">tc.properties</code> in Terracotta <code class="highlighter-rouge">lib</code> directory</li>
  <li>Java system properties set with -D</li>
</ol>

<h3 id="failure-to-override">Failure to Override</h3>
<p>If system properties set in <code class="highlighter-rouge">tc-config.xml</code> fail to override default system properties, a warning is logged to the Terracotta logs. The warning has the following format:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>The property &lt;system_property_name&gt; was set by local settings to &lt;value&gt;.
This value will not be overridden to &lt;value&gt; from the tc-config.xml file.
</code></pre>
</div>

<p>System properties used early in the Terracotta initialization process may fail to be overridden. If this happens, a warning is logged to the Terracotta logs. The warning has the following format:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>The property &lt;system_property_name&gt; was read before initialization completed.
</code></pre>
</div>

<p>The warning is followed by the value assigned to <code class="highlighter-rouge">&lt;system_property_name&gt;</code>.</p>

<p><strong>NOTE:</strong> The property <code class="highlighter-rouge">tc.management.mbeans.enabled</code> is known to load before initialization completes and cannot be overridden.</p>

<p>
   <a id="servers"></a>
</p>
<h2 id="servers-configuration-section">Servers Configuration Section</h2>
<p>This section contains the information that defines and configures the Terracotta Server Array (TSA) and its component servers.</p>

<h3 id="tctc-configservers">/tc:tc-config/servers</h3>
<p>This section defines the Terracotta server instances present in your cluster. One or more entries can be defined, either directly under the &lt;servers&gt; element or in <a href="#mirror-groups">mirror groups</a>. If this section is omitted, Terracotta configuration behaves as if there’s a single server instance with default values.</p>

<p>This section also defines certain global settings that affect all servers, including the attribute <code class="highlighter-rouge">secure</code>. This is a global control for enabling (“true”) or disabling (“false” DEFAULT) <a href="tsa-security">SSL-based security</a> for the entire cluster.</p>

<h3 id="tctc-configserversserver">/tc:tc-config/servers/server</h3>

<p>A server stanza encapsulates the configuration for a Terracotta server instance.  The server element takes three optional attributes (see table below).</p>

<table>
<tr><th>Attribute</th><th>Definition</th><th>Value</th><th>Default Value</th></tr>
<tr><td>host</td>
<td>The address of the machine hosting the Terracotta server</td>
<td>Host machine's IP address or resolvable hostname</td>
<td>Host machine's IP address</td></tr>
<tr><td>name</td>
<td>The symbolic name of the Terracotta server; can be passed to Terracotta scripts such as start-tc-server using <code>-n &lt;name&gt;</code> </td>
<td> user-defined string</td>
<td><host>:<tsa-port>&lt;/td&gt;&lt;/tr&gt;
<tr><td>bind</td>
<td>The network interface on which the Terracotta server listens cluster traffic; 0.0.0.0 specifies all interfaces</td><td>interface's IP address</td>
<td>0.0.0.0</td></tr>
&lt;/table&gt;

Each Terracotta server instance needs to know which configuration it should use as it starts up. If the server's configured name is the same as the hostname of the host it runs on and no host contains more than one server instance, then configuration is found automatically.

For more information on how to use the Terracotta configuration file with servers, see the [Terracotta configuration guide](configuration-guide).

*Sample configuration snippet:*

    <server>
      <!-- my host is '%i', my name is '%i:tsa-port', my bind is 0.0.0.0 -->
      ...
    </server>
    <server host="myhostname">
      <!-- my host is 'myhostname', my name is 'myhostname:tsa-port', my bind is 0.0.0.0 -->
      ...
    </server>
    <server host="myotherhostname" name="server1" bind="192.168.1.27">
      <!-- my host is 'myotherhostname', my name is 'server1', my bind is 192.168.1.27 -->
      ...
    </server>

<a id="server-data"></a><a id="persistence"></a>
### /tc:tc-config/servers/server/data
This element specifies the path where the server should store its data for persistence.

**Default:** data (creates the directory `data` under the working directory)

<a id="server-logs"></a>
### /tc:tc-config/servers/server/logs
This section lets you declare where the server should write its logs.

**Default:** logs (creates the directory `logs` under the working directory)

You can also specify `stderr:` or `stdout:` as the output destination for log messages. For example:

    <logs>stdout:</logs>

To set the logging level, see [this FAQ entry](/documentation/bigmemorymax/technical-faq#log-level).


### /tc:tc-config/servers/server/index
This element specifies the path where the server should store its search indexes.

**Default:** index (creates the directory `index` under the working directory)

### /tc:tc-config/servers/server/data-backup
This element specifies the path where the server should store backups (if a backup call is initiated).

**Default:** data-backup (creates the directory `data-backup` under the working directory)

<a id="tsa-port"></a>
### /tc:tc-config/servers/server/tsa-port
This section lets you set the port that the Terracotta server listens to for client traffic.

The default value of "tsa-port" is 9510.

*Sample configuration snippet:*

    <tsa-port>9510</tsa-port>


<a id="jmx-port"></a>
### /tc:tc-config/servers/server/jmx-port
This section lets you set the port that the Terracotta server's JMX Connector listens to.

The default value of "jmx-port" is 9520. If tsa-port is set, this port defaults to the value of the tsa-port plus 10.

*Sample configuration snippet:*

    <jmx-port>9520</jmx-port>


<a id="tsa-group-port"></a>
### /tc:tc-config/servers/server/tsa-group-port
This section lets you set the port that the Terracotta server uses to communicate with other Terracotta servers.

The default value of "tsa-group-port" is 9530. If tsa-port is set, this port defaults to the value of the tsa-port plus 20.

*Sample configuration snippet:*

    <tsa-group-port>9530</tsa-group-port>


### /tc:tc-config/servers/server/security
This section contains the data necessary for running a secure cluster based on SSL, digital certificates, and node authentication and authorization.

See the [advanced-security page](tsa-security) for a configuration example.


#### /tc:tc-config/servers/server/security/ssl/certificate
The element specifying certificate entry and location of the certificate store. The format is:

~~~
<store-type>:<certificate-alias>@&lt;/path/to/keystore.file&gt;
~~~

The Java Keystore (JKS) type is supported by Terracotta 3.7 and higher.

#### /tc:tc-config/servers/server/security/keychain
This element contains the following subelements:

* `<class>` – Element specifying the class defining the keychain file. If a class is not specified, `com.terracotta.management.keychain.FileStoreKeyChain` is used.
* `<url>` – The URI for the keychain file. It is passed to the keychain class to specify the keychain file.
* `<secret-provider>` – The fully qualified class name of the user implementation of `com.terracotta.management.security.SecretProviderBackEnd`. This class can read and provide the keychain file.


#### /tc:tc-config/servers/server/security/auth
This element contains the following subelements:

* `<realm>` – Element specifying the class defining the security realm. If a class is not specified, `com.tc.net.core.security.ShiroIniRealm` is used.
* `<url>` – The URI for the Realm configuration (.ini) file. It is passed to the realm class to specify authentication file. Alternatively, URIs for LDAP or Microsoft Active directory can also be used if one of these schemes is implemented instead.
* `<user>` – The username that represents the server and is authenticated by other servers. This name is part of the credentials stored in the .ini file. The default value is "terracotta".


#### /tc:tc-config/servers/server/security/management
This element contains the subelements needed to allow the Terracotta Management Server (TMS) to make a secure connection to the TSA:

* `ia` – The HTTPS URL with the domain of the TMS, followed by the port 9443 and the path `/tmc/api/assertIdentity`.
* `timeout` – The timeout value (in milliseconds) for connections from the server to the TMS.
* `hostname` – Used only if the DNS hostname of the server does not match server hostname used in its certificate. If there is a mismatch, enter the DNS address of the server here.


<a id="server-authentication"></a>
### /tc:tc-config/servers/server/authentication
Turn on JMX authentication for the Terracotta server. An empty tag (`<authentication></authentication>`) defaults to the standard Java JMX authentication mechanism referring to password and access files in `$JAVA_HOME/jre/lib/management`:

    $JAVA_HOME/jre/lib/management/jmxremote.password
    $JAVA_HOME/jre/lib/management/jmxremote.access

You must modify these files as as follows (or, if none exist create them).

**jmxremote.password**
Add a line to the end of the file declaring a username and password followed by a carriage return:

    secretusername secretpassword

**jmxremote.access**
Add the following line (with a carriage return) to the end of your file:

    secretusername      readwrite

Be sure to assign the appropriate permissions to the file. For example, in *NIX:

    $ chmod 500 jmxremote.password
    $ chown <user who="" will="" run="" the="" server=""> jmxremote.password

For information on alternatives to JMX authentication, see [Terracotta Cluster Security](/documentation/bigmemorymax/terracotta-server-array/managing-security).

Note that version 4.x does not support HTTP authentication.

### /tc:tc-config/servers/dataStorage

This configuration block includes the required `offheap` element, as well as the optional `hybrid` element.

* `<offheap>` must be configured for each server; the minimum amount is 4 GB.

* `<datastorage>` specifies the maximum amount of data to store on each server, and represents the hybrid sum of off-heap DRAM plus flash SSD.

* `<hybrid></hybrid>`, if included, enables the Hybrid option.

*Sample configuration snippet:*

    &lt;dataStorage size=”800g”&gt;
       &lt;offheap size=”200g”/&gt;
       <hybrid></hybrid>
    </datastorage>

If the `hybrid` element is present, then `dataStorage` size may exceed `offheap` size, however if the hybrid element is not present, then the `dataStorage` size must be less than or equal to the `offheap` size.


<a id="mirror-groups"></a>
### /tc:tc-config/servers/mirror-group
A mirror group is a *stripe* in a TSA, consisting of one active server and one or more mirror (or backup) servers. A configuration that does not use the &lt;mirror-group&gt; element would produce a one-stripe TSA:

    <servers>
      <server name="A">
      ...
      </server>
      <server name="B">
      ...
      </server>
      <server name="C">
      ...
      </server>
      <server name="D">
      ...
      </server>
    ...
    </servers>

One of the named servers would assume the role of active (the one started first or that wins the election), while the remaining servers become mirrors. Note that in a typical stripe, having only one or two mirrors is sufficient and less taxing on the active server's resources (as it needs to sync with each mirror).

The following example shows the same servers split into two stripes:

    <servers>
      <mirror-group group-name="team1">
        <server name="A">
        ...
        </server>
        <server name="B">
        ...
        </server>
      </mirror-group>
      <mirror-group group-name="team2">
        <server name="C">
        ...
        </server>
        <server name="D">
        ...
        </server>
      </mirror-group>
    ...
    </servers>

Each stripe will have one active and one mirror server.

<table>
<caption>NOTE: Server vs. Mirror Group</caption>
<tr>
<td>
Under &lt;servers&gt;, you may use either &lt;server&gt; or &lt;mirror-group&gt; configurations, but not both. All &lt;server&gt; configurations directly under &lt;servers&gt; work together as one mirror group, with one active server and the rest mirrors. To create more than one stripe, use &lt;mirror-group&gt; configurations directly under &lt;servers&gt;. The mirror group configurations then include one or more &lt;server&gt; configurations.
</td>
</tr>
</table>

For more examples and information, see the [Terracotta Configuration Guide](/documentation/bigmemorymax/terracotta-server-array/configuration-guide).


<a id="garbage-collection"></a>
<a id="dgc"></a>
### /tc:tc-config/servers/garbage-collection
This section lets you configure the periodic distributed garbage collector (DGC) that runs in the TSA. The DGC collects shared data made garbage by Java garbage collection.

For many use cases, there is no need to enable periodic DGC. For caches, the more efficient automatic inline DGC is normally sufficient for clearing garbage. In addition, certain read-heavy applications will never require the periodic DGC as little shared data becomes garbage.

However, in certain situations such as when Terracotta Toolkit data structures are in use, the periodic DGC may need to be enabled. Inline DGC is not available for these data structures.

For more on how DGC functions, see [TSA Architecture](server-arrays#about-distributed-garbage-collection).

*Configuration snippet:*

    <garbage-collection>

     <!--    Default: false -->
      <enabled>true</enabled>

      <!-- If "true", additional information is logged when a
         server performs distributed garbage collection.

         Default: false
      -->
      <verbose>false</verbose>

      <!-- How often should distributed garbage collection
         be performed, in seconds?

         Default: 3600 (60 minutes)
      -->
      <interval>3600</interval>
    </garbage-collection>


### /tc:tc-config/servers/restartable
The fast-restart persistence mechanism must be explicitly enabled for the TSA using this element:

    <restartable enabled="true"></restartable>

In case of TSA failure, fast-restart persistence allows the TSA to reload all shared cluster data.

To function, this feature requires &lt;offheap&gt; to be enabled on each server. To make backups of TSA data, the backup feature requires this feature to be enabled.

<a id="client-reconnect-window"></a>
### /tc:tc-config/servers/client-reconnect-window
This section lets you declare the window of time servers will allow disconnected clients to reconnect to the cluster as the same client. Outside of this window, a client can only rejoin as a new client. The value is specified in seconds and the default is 120 seconds.

If adjusting value, note that a too-short reconnection window can lead to unsuccessful reconnections during failure recovery, while a too-long window lowers the efficiency of the cluster since it is paused for the time the window is in effect.

*Further reading:*
For more information on how client and server reconnection is executed in a Terracotta cluster, and on tuning reconnection properties in a high-availability environment, see [Configuring Terracotta Clusters For High Availability](/documentation/4.1/terracotta-server-array/high-availability).


## Clients Configuration Section

The clients section contains configuration about how clients should behave.

### /tc:tc-config/clients/logs

This section lets you configure where the Terracotta client writes its logs.

*Sample configuration snippet:*


    <!--     
       This value undergoes parameter substitution before being used;
       thus, a value like 'client-logs-%h' would expand to
       'client-logs-banana' if running on host 'banana'. See the
       Product Guide for more details.

       If this is a relative path, then it is interpreted relative to
       the current working directory of the client (that is, the directory
       you were in when you started the program that uses Terracotta
       services). It is thus recommended that you specify an absolute
       path here.


       Default: 'logs-%i'; this places the logs in a directory relative
       to the directory you were in when you invoked the program that uses
       Terracotta services (your client), and calls that directory, for example,
       'logs-10.0.0.57' if the machine that the client is on has assigned IP
       address 10.0.0.57.
    -->
    <logs>logs-%i</logs>


You can also specify `stderr:` or `stdout:` as the output destination for log messages. For example:

    <logs>stdout:</logs>

To set the logging level, see [this FAQ entry](/documentation/4.1/bigmemorymax/technical-faq#log-level).
</offheap></user></user></url></realm></secret-provider></url></class></certificate-alias></store-type></tsa-port></host></td></tr></table>

      </article>
    </div>

  </div>

</div>

      </div>
    </div>

    <br/>
<footer class="site-footer">

  <div class="container">

    <div class="footer-col-wrapper">
      <div class="footer-col footer-col-1">
        Related Projects:<br/>
        <a href="http://www.ehcache.org"><img src="/images/ehcache.png" style=""></a><br/><br/>
        <a href="http://www.quartz-scheduler.org"><img src="/images/logo-quartz-scheduler.png" style="max-height: 32px;"></a>

        <!--
        <ul class="contact-list">
          <li>Terracotta</li>
          <li><a href="mailto:tc-oss@softwareag.com">tc-oss@softwareag.com</a></li>
        </ul>
      -->
      </div>

      <div class="footer-col  footer-col-2">
        <ul class="social-media-list">
          
          <li>
            <a href="https://github.com/terracotta-oss">
              <i class="fa fa-github"></i> GitHub
            </a>
          </li>
          

          
          <li>
            <a href="https://twitter.com/terracottatech">
              <i class="fa fa-twitter"></i> Twitter
            </a>
          </li>
          

          
          <li>
            <a href="http://www.facebook.com/Terracotta">
              <i class="fa fa-facebook"></i> Facebook
            </a>
          </li>
          

          
          <li>
            <a href="http://www.linkedin.com/company/terracotta">
              <i class="fa fa-linkedin"></i> LinkedIn
            </a>
          </li>
          

          <li>
            <a href="/feed.xml" title="Atom/RSS Feed">
              <i class="fa fa-rss-square"></i> Atom/RSS Feed
            </a>
          </li>
        </ul>
      </div>

    <div class="footer-col  footer-col-3">
      <a href="/downloads/"><i class="fa fa-download"></i> Download Now</a>
      <br/>
      <a href="/documentation/"><i class="fa fa-book"></i> Documentation</a>
      <br/>
      <a href="/resources/"><i class="fa fa-external-link-square"></i> Resources</a>
      <br/>
      <a href="/blog/"><i class="fa fa-rss-square"></i> Terracotat Blog</a>
      <br/>
      <a href="/community/"><i class="fa fa-users"></i> Join the Community</a>
    </div>

    </div>

    <div class="container-fluid">
        <hr/>
        <em class="copyleft">Terracotta is Open Source and freely available under the Terracotta Public License 2.0</em>
        <br/>
        <em class="copyright">&copy; Terracotta, Inc., a wholly-owned subsidiary of Software AG USA, Inc. All rights reserved.</em>
    </div>
  </div>

</footer>

<!-- Bootstrap core JavaScript
================================================== -->
<!-- Placed at the end of the document so the pages load faster -->
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/js/bootstrap.min.js"></script>
<!-- IE10 viewport hack for Surface/desktop Windows 8 bug -->
<script src="https://maxcdn.bootstrapcdn.com/js/ie10-viewport-bug-workaround.js"></script>

<!--  <script type="text/javascript" src="http://cdnjs.cloudflare.com/ajax/libs/jquery-scrollTo/2.1.0/jquery.scrollTo.min.js"/> -->

<script type="text/javascript">
        $('#').addClass("active");
        $('#').addClass("active");

        //delayed init for documents that need init code that relies on jQuery
        //but jQuery is loaded in the footer
        $(document).ready(function() {
          if(typeof delayedInitHandler == 'function'){
            delayedInitHandler();
          }
        })
</script>


  </body>

</html>
