<!DOCTYPE html>
<html>

  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->

  <link rel="shortcut icon"  type="image/x-icon" href="/images/favicon.ico">
  <link rel="icon" type="image/x-icon" href="/images/favicon.ico">

  <title>Terracotta</title>

  <meta name="description" content="Java's most widely used cache.">

  <link rel="canonical" href="http://www.terracotta.org/documentation/4.1/bigmemorymax/api/key-classes-methods.html">
  <link href="/feed.xml" type="application/atom+xml" rel="alternate" title="Terracotta Feed">


  <!-- Fonts -->
  <link href='https://fonts.googleapis.com/css?family=Lato:300,400,300italic,400italic' rel='stylesheet' type='text/css'>
  <link href='https://fonts.googleapis.com/css?family=Montserrat:400,700' rel='stylesheet' type='text/css'>

  <!-- Global CSS -->

  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.4.0/css/font-awesome.min.css">

  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootswatch/3.3.5/spacelab/bootstrap.min.css">


<!--
  <link rel="stylesheet" href="/plugins/highlight/styles/idea.css">
  <script src="/plugins/highlight/highlight.pack.js"></script>
  <script>hljs.initHighlightingOnLoad();</script>
-->

  <script src="https://cdn.rawgit.com/google/code-prettify/master/loader/run_prettify.js"></script>
  <script src="https://cdn.rawgit.com/google/code-prettify/master/loader/prettify.css"></script>

  <link rel="stylesheet" href="/css/main.css">

<!--
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prettify/r298/prettify.min.css">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/prettify/r298/prettify.min.js"></script>
  <script>document.addEventListener('DOMContentLoaded', prettyPrint)</script>
-->

  <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
  <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
    <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
  <![endif]-->

</head>


  <body>

    

    <!-- Fixed navbar -->
    <nav class="navbar navbar-default navbar-fixed-top">
      <div class="container">
        <div class="navbar-header">
          <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a class="site-title" href="/"><img src="/images/Terracotta_Logo_sm.png" style="margin-top:12px;margin-bottom:6px;"/></a>
          <span style="vertical-align:bottom;color:gray;">By</span>
          <a class="SAG-Logo" href="http://www.softwareag.com/corporate/products/terracotta"><img src="/images/SAG_Logo.png" style="margin-top:12px;margin-bottom:6px;height:1.5em;width:9em;"/></a>
        </div>
        <div id="navbar" class="navbar-collapse collapse">
          <ul class="nav navbar-nav">
            <li id="tc_mnu_about"><a href="/about/"><i class="fa fa-info-circle"></i> About</a></li>
            <li id="tc_mnu_docs"><a href="/documentation/"><i class="fa fa-book"></i> Docs</a></li>
            <li id="tc_mnu_download"><a href="/downloads/"><i class="fa fa-download"></i> Download</a></li>
            <li id="tc_mnu_community" class="dropdown">
              <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false"><i class="fa fa-users"></i> Community <span class="caret"></span></a>
              <ul class="dropdown-menu">
                <li class="dropdown-header">We Love Contributors</li>
                <li><a href="/community/contribute.html"><i class="fa fa-code"></i> Contributing</a></li>
                <li><a href="/resources/"><i class="fa fa-external-link-square"></i> External Resources</a></li>
                <li><a href="/blog" target="_blank"><i class="fa fa-rss-square"></i> Terracotta Blog</a></li>
                <li role="separator" class="divider"></li>
                <li class="dropdown-header">Forums</li>
                <li><a href="https://groups.google.com/forum/#!forum/terracotta-oss" target="_blank"><i class="fa fa-commenting"></i> Users' Forum</a></li>
                <li role="separator" class="divider"></li>
                <li class="dropdown-header">Source Code</li>
                <li><a href="https://github.com/Terracotta-OSS" target="_blank"><i class="fa fa-github"></i> GitHub  Repositories</a></li>
                <li><a href="http://svn.terracotta.org/svn/tc/" target="_blank"><i class="fa fa-code-fork"></i> SVN  (Terracotta 4.x)</a></li>
                <li role="separator" class="divider"></li>
                <li class="dropdown-header">Bug Tracking</li>
                <li><a href="https://github.com/Terracotta-OSS" target="_blank"><i class="fa fa-bug"></i> GitHub  (use respective project)</a></li>
              </ul>
            </li>
          </ul>
          <ul class="nav navbar-nav navbar-right">
            <li id="tc_mnu_events"><a href="/events"><i class="fa fa-calendar"></i> News & Events</a></li>
            <li><a href="/blog"><i class="fa fa-rss-square"></i> Terracotta Blog</a></li>
          </ul>
        </div><!--/.nav-collapse -->
      </div>
    </nav>

<br/>
<br/>
<br/>


    <div class="container-fluid">
      <div id="contentTitle">
        <h1></h1>
      </div>
      <div>
        <BR/>
        <br/>

<div class="container-fluid">

  <div class="row row-offcanvas row-offcanvas-left">

    <!-- sidebar -->
    <div class="col-xs-6 col-sm-3 sidebar-offcanvas" id="sidebar" role="navigation">
        <ul class="nav">
          <li id="tc_mnu_docs_current" class="submenu"><a href="#current_version">Current Documentation</a></li>
          <li id="tc_mnu_doce_release_notes" class="submenu"><a href="http://www.terracotta.org/confluence/display/release/Home" target="_blank">Release Notes</a></li>
          <li id="tc_mnu_docs_previous" class="submenu"><a href="#historical_versions">Historical Versions</a></li>
        </ul>
    </div>

    <!-- main area -->
    <div class="col-xs-12 col-sm-9">
      <header class="post-header">
        
        <h1 class="post-title"></h1>
        <hr/>
        
      </header>
      <article class="post-content">
        <h1 id="key-classes-and-methods-of-the-bigmemory-api">Key Classes and Methods of the BigMemory API</h1><div id="toc-container">
   <table class="toc" id="toc">
      <tbody>
         <tr>
            <td>
               <ul>
                  <li class="toc_level-1 toc_section-1">
                     <a href="#key-classes-and-methods-of-the-bigmemory-api">
                        <span class="toctext">Key Classes and Methods of the BigMemory API</span>
                     </a>
                     <ul>
                        <li class="toc_level-2 toc_section-2">
                           <a href="#introduction">
                              <span class="toctext">Introduction</span>
                           </a>
                        </li>
                        <li class="toc_level-2 toc_section-3">
                           <a href="#cachemanager">
                              <span class="toctext">CacheManager</span>
                           </a>
                        </li>
                        <li class="toc_level-2 toc_section-4">
                           <a href="#cache">
                              <span class="toctext">Cache</span>
                           </a>
                        </li>
                        <li class="toc_level-2 toc_section-5">
                           <a href="#element">
                              <span class="toctext">Element</span>
                           </a>
                        </li>
                     </ul>
                  </li>
               </ul>
            </td>
         </tr>
      </tbody>
   </table>
</div>
<p>{toc|2:3}</p>

<h2 id="introduction">Introduction</h2>
<p>BigMemory currently uses Ehcache as its user-facing data access API. See the <a href="http://www.ehcache.org/apidocs/2.8.5/index.html">Ehcache API documentation</a> for details.</p>

<p>The key Ehcache classes used are:</p>

<ul>
  <li>CacheManager</li>
  <li>Cache</li>
  <li>Element</li>
</ul>

<p>These classes form the core of the BigMemory API. This document
introduces these classes, along with other important components of the
BigMemory API.</p>

<p>When applications use BigMemory through the Ehcache API, a
CacheManager is instantiated to manage logical data sets (represented as Cache
objects in the Ehcache API—though, they may be used to store any kind of
data, not just cache data). These data sets contain name-value pairs called Elements.</p>

<p>The logical representations of these key components are actualized mostly
through the classes discussed below. These classes’ methods provide the main
programmatic access to working with Ehcache.</p>

<h2 id="cachemanager">CacheManager</h2>

<p>The class <code class="highlighter-rouge">CacheManager</code> is used to manage caches. Creation of, access to, and removal of caches is controlled by a named CacheManager.</p>

<h3 id="cm-creation">CacheManager Creation Modes</h3>

<p><code class="highlighter-rouge">CacheManager</code> supports two creation modes: singleton and instance. The two types can exist in the same JVM. However, multiple CacheManagers with the same name are not allowed to exist in the same JVM. <code class="highlighter-rouge">CacheManager()</code> constructors creating non-Singleton CacheManagers can violate this rule, causing a NullPointerException. If your code may create multiple CacheManagers of the same name in the same JVM, avoid this error by using the <a href="http://www.ehcache.org/apidocs/2.8.5/index.html">static <code class="highlighter-rouge">CacheManager.create()</code> methods</a>, which always return the named (or default unnamed) CacheManager if it already exists in that JVM. If the named (or default unnamed) CacheManager does not exist, the <code class="highlighter-rouge">CacheManager.create()</code> methods create it.</p>

<p>For singletons, calling <code class="highlighter-rouge">CacheManager.create(...)</code> returns the existing singleton CacheManager with the configured name (if it exists) or creates the singleton based on the passed-in configuration.</p>

<p>To work from configuration, use the <code class="highlighter-rouge">CacheManager.newInstance(...)</code> method, which parses the passed-in configuration to either get the existing named CacheManager or create that CacheManager if it doesn’t exist.</p>

<p>To review, the behavior of the CacheManager creation methods is as follows:</p>

<ul>
  <li><code class="highlighter-rouge">CacheManager.newInstance(Configuration configuration)</code> – Create a new CacheManager or return the existing one named in the configuration.</li>
  <li><code class="highlighter-rouge">CacheManager.create()</code> – Create a new singleton CacheManager with default configuration, or return the existing singleton. This is the same as <code class="highlighter-rouge">CacheManager.getInstance()</code>.</li>
  <li><code class="highlighter-rouge">CacheManager.create(Configuration configuration)</code> – Create a singleton CacheManager with the passed-in configuration, or return the existing singleton.</li>
  <li><code class="highlighter-rouge">new CacheManager(Configuration configuration)</code> – Create a new CacheManager, or throw an exception if the CacheManager named in the configuration already exists or if the parameter (configuration) is null.</li>
</ul>

<p>Note that in instance-mode (non-singleton), where multiple CacheManagers can
be created and used concurrently in the same JVM, each CacheManager requires its own
configuration.</p>

<p>If the Caches under management use the disk store, the
disk-store path specified in each CacheManager configuration should be
unique. This is because when a new CacheManager is created, a check is made to ensure that no other CacheManagers are using the same disk-store path. Depending upon your persistence strategy, BigMemory Max will automatically resolve a disk-store path conflict, or it will let you know that you must explicitly configure the disk-store path.</p>

<p>If managed caches use only the memory store, there are no special considerations.</p>

<p>If a CacheManager is part of a cluster,
there will also be listener ports which must be unique.</p>

<p>See the <a href="http://ehcache.org/apidocs/2.8.4/net/sf/ehcache/CacheManager">API documentation</a> for more information on these methods, including options for passing in configuration. For examples, see <a href="/documentation/4.1/bigmemorymax/code-samples#declarative-configuration-via-xml">Code Samples</a>.</p>

<h2 id="cache">Cache</h2>
<p>This is a thread-safe logical representation of a set of data elements, analogous to a cache region in many caching systems. Once a reference to a cache is obtained (through a CacheManager), logical actions can be performed. The physical implementation of these actions is relegated to the <a href="storage-options">stores</a>.</p>

<p>Caches are instantiated from configuration or programmatically using one of the <code class="highlighter-rouge">Cache()</code> constructors. Certain cache characteristics, such as ARC-related sizing, and pinning, must be set using configuration.</p>

<p>Cache methods can be used to get information about the cache (for example, <code class="highlighter-rouge">getCacheManager()</code>, <code class="highlighter-rouge">isNodeBulkLoadEnabled()</code>, <code class="highlighter-rouge">isSearchable()</code>, etc.), or perform certain cache-wide operations (for example, flush, load, initialize, dispose, etc.).</p>

<p>The methods provided in the <code class="highlighter-rouge">Cache</code> class also allow you to work with cache elements (for example, get, set, remove, replace, etc.) as well as get information about the them (for example, isExpired, isPinned, etc.).</p>

<h2 id="element">Element</h2>

<p>An element is an atomic entry in a cache. It has a key, a value, and a record of
accesses. Elements are put into and removed from caches. They can also
expire and be removed by the cache, depending on the cache settings.</p>

<p>There is an API for Objects in addition to the one for Serializable. Non-serializable Objects can be stored only in heap. If an attempt is made to persist them,
they are discarded with a DEBUG-level log message but no error.</p>

<p>The APIs are identical except for the return methods from Element: <code class="highlighter-rouge">getKeyValue()</code> and <code class="highlighter-rouge">getObjectValue()</code> are used by the Object API in place of <code class="highlighter-rouge">getKey()</code> and <code class="highlighter-rouge">getValue()</code>.</p>

      </article>
    </div>

  </div>

</div>

      </div>
    </div>

    <br/>
<footer class="site-footer">

  <div class="container">

    <div class="footer-col-wrapper">
      <div class="footer-col footer-col-1">
        Related Projects:<br/>
        <a href="http://www.ehcache.org"><img src="/images/ehcache.png" style=""></a><br/><br/>
        <a href="http://www.quartz-scheduler.org"><img src="/images/logo-quartz-scheduler.png" style="max-height: 32px;"></a>

        <!--
        <ul class="contact-list">
          <li>Terracotta</li>
          <li><a href="mailto:tc-oss@softwareag.com">tc-oss@softwareag.com</a></li>
        </ul>
      -->
      </div>

      <div class="footer-col  footer-col-2">
        <ul class="social-media-list">
          
          <li>
            <a href="https://github.com/terracotta-oss">
              <i class="fa fa-github"></i> GitHub
            </a>
          </li>
          

          
          <li>
            <a href="https://twitter.com/terracottatech">
              <i class="fa fa-twitter"></i> Twitter
            </a>
          </li>
          

          
          <li>
            <a href="http://www.facebook.com/Terracotta">
              <i class="fa fa-facebook"></i> Facebook
            </a>
          </li>
          

          
          <li>
            <a href="http://www.linkedin.com/company/terracotta">
              <i class="fa fa-linkedin"></i> LinkedIn
            </a>
          </li>
          

          <li>
            <a href="/feed.xml" title="Atom/RSS Feed">
              <i class="fa fa-rss-square"></i> Atom/RSS Feed
            </a>
          </li>
        </ul>
      </div>

    <div class="footer-col  footer-col-3">
      <a href="/downloads/"><i class="fa fa-download"></i> Download Now</a>
      <br/>
      <a href="/documentation/"><i class="fa fa-book"></i> Documentation</a>
      <br/>
      <a href="/resources/"><i class="fa fa-external-link-square"></i> Resources</a>
      <br/>
      <a href="/blog/"><i class="fa fa-rss-square"></i> Terracotat Blog</a>
      <br/>
      <a href="/community/"><i class="fa fa-users"></i> Join the Community</a>
    </div>

    </div>

    <div class="container-fluid">
        <hr/>
        <a class="SAG-Logo" href="http://www.softwareag.com/corporate/products/terracotta"><img src="/images/SAG_Logo.png" style="height:1.5em;width:9em;"/></a>
        <div class="footer-text">
          <em class="copyleft">Terracotta is Open Source and freely available under the Terracotta Public License 2.0</em>
          <br/>
          <em class="copyright">&copy; Terracotta, Inc., a wholly-owned subsidiary of Software AG USA, Inc. All rights reserved.</em>
        </div>
    </div>
  </div>

</footer>

<!-- Bootstrap core JavaScript
================================================== -->
<!-- Placed at the end of the document so the pages load faster -->
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/js/bootstrap.min.js"></script>
<!-- IE10 viewport hack for Surface/desktop Windows 8 bug -->
<script src="https://maxcdn.bootstrapcdn.com/js/ie10-viewport-bug-workaround.js"></script>

<!--  <script type="text/javascript" src="http://cdnjs.cloudflare.com/ajax/libs/jquery-scrollTo/2.1.0/jquery.scrollTo.min.js"/> -->

<script type="text/javascript">
        $('#').addClass("active");
        $('#').addClass("active");
</script>


  </body>

</html>
