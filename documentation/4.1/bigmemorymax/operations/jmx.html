<!DOCTYPE html>
<html>

  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->

  <link rel="shortcut icon"  type="image/x-icon" href="/images/favicon.ico">
  <link rel="icon" type="image/x-icon" href="/images/favicon.ico">

  <title>Terracotta</title>

  <meta name="description" content="Java's most widely used cache.">

  <link rel="canonical" href="http://www.terracotta.org/documentation/4.1/bigmemorymax/operations/jmx.html">
  <link href="/feed.xml" type="application/atom+xml" rel="alternate" title="Terracotta Feed">


  <!-- Fonts -->
  <link href='https://fonts.googleapis.com/css?family=Lato:300,400,300italic,400italic' rel='stylesheet' type='text/css'>
  <link href='https://fonts.googleapis.com/css?family=Montserrat:400,700' rel='stylesheet' type='text/css'>

  <!-- Global CSS -->

  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.4.0/css/font-awesome.min.css">

  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootswatch/3.3.5/spacelab/bootstrap.min.css">


<!--
  <link rel="stylesheet" href="/plugins/highlight/styles/idea.css">
  <script src="/plugins/highlight/highlight.pack.js"></script>
  <script>hljs.initHighlightingOnLoad();</script>
-->

  <script src="https://cdn.rawgit.com/google/code-prettify/master/loader/run_prettify.js"></script>
  <script src="https://cdn.rawgit.com/google/code-prettify/master/loader/prettify.css"></script>

  <link rel="stylesheet" href="/css/main.css">

<!--
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prettify/r298/prettify.min.css">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/prettify/r298/prettify.min.js"></script>
  <script>document.addEventListener('DOMContentLoaded', prettyPrint)</script>
-->

  <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
  <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
    <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
  <![endif]-->

</head>


  <body>

    

    <!-- Fixed navbar -->
    <nav class="navbar navbar-default navbar-fixed-top">
      <div class="container">
        <div class="navbar-header">
          <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a class="site-title" href="/"><img src="/images/Terracotta_Logo_sm.png" style="margin-top:12px;margin-bottom:6px;"/></a>
          <span style="vertical-align:bottom;color:gray;">By</span>
          <a class="SAG-Logo" href="http://www.softwareag.com/corporate/products/terracotta"><img src="/images/SAG_Logo.png" style="margin-top:12px;margin-bottom:6px;height:1.5em;width:9em;"/></a>
        </div>
        <div id="navbar" class="navbar-collapse collapse">
          <ul class="nav navbar-nav">
            <li id="tc_mnu_about"><a href="/about/"><i class="fa fa-info-circle"></i> About</a></li>
            <li id="tc_mnu_docs"><a href="/documentation/"><i class="fa fa-book"></i> Docs</a></li>
            <li id="tc_mnu_download"><a href="/downloads/"><i class="fa fa-download"></i> Download</a></li>
            <li id="tc_mnu_community" class="dropdown">
              <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false"><i class="fa fa-users"></i> Community <span class="caret"></span></a>
              <ul class="dropdown-menu">
                <li class="dropdown-header">We Love Contributors</li>
                <li><a href="/community/contribute.html"><i class="fa fa-code"></i> Contributing</a></li>
                <li><a href="/resources/"><i class="fa fa-external-link-square"></i> External Resources</a></li>
                <li><a href="/blog" target="_blank"><i class="fa fa-rss-square"></i> Terracotta Blog</a></li>
                <li role="separator" class="divider"></li>
                <li class="dropdown-header">Forums</li>
                <li><a href="https://groups.google.com/forum/#!forum/terracotta-oss" target="_blank"><i class="fa fa-commenting"></i> Users' Forum</a></li>
                <li role="separator" class="divider"></li>
                <li class="dropdown-header">Source Code</li>
                <li><a href="https://github.com/Terracotta-OSS" target="_blank"><i class="fa fa-github"></i> GitHub  Repositories</a></li>
                <li><a href="http://svn.terracotta.org/svn/tc/" target="_blank"><i class="fa fa-code-fork"></i> SVN  (Terracotta 4.x)</a></li>
                <li role="separator" class="divider"></li>
                <li class="dropdown-header">Bug Tracking</li>
                <li><a href="https://github.com/Terracotta-OSS" target="_blank"><i class="fa fa-bug"></i> GitHub  (use respective project)</a></li>
              </ul>
            </li>
          </ul>
          <ul class="nav navbar-nav navbar-right">
            <li id="tc_mnu_events"><a href="/events"><i class="fa fa-calendar"></i> News & Events</a></li>
            <li><a href="/blog"><i class="fa fa-rss-square"></i> Terracotta Blog</a></li>
          </ul>
        </div><!--/.nav-collapse -->
      </div>
    </nav>

<br/>
<br/>
<br/>


    <div class="container-fluid">
      <div id="contentTitle">
        <h1></h1>
      </div>
      <div>
        <BR/>
        <br/>

<div class="container-fluid">

  <div class="row row-offcanvas row-offcanvas-left">

    <!-- sidebar -->
    <div class="col-xs-6 col-sm-3 sidebar-offcanvas" id="sidebar" role="navigation">
        <ul class="nav">
          <li id="tc_mnu_docs_current" class="submenu"><a href="#current_version">Current Documentation</a></li>
          <li id="tc_mnu_doce_release_notes" class="submenu"><a href="http://www.terracotta.org/confluence/display/release/Home" target="_blank">Release Notes</a></li>
          <li id="tc_mnu_docs_previous" class="submenu"><a href="#historical_versions">Historical Versions</a></li>
        </ul>
    </div>

    <!-- main area -->
    <div class="col-xs-12 col-sm-9">
      <header class="post-header">
        
        <h1 class="post-title"></h1>
        <hr/>
        
      </header>
      <article class="post-content">
        <h1 id="management-and-monitoring-using-jmx">Management and Monitoring using JMX</h1><div id="toc-container">
   <table class="toc" id="toc">
      <tbody>
         <tr>
            <td>
               <ul>
                  <li class="toc_level-1 toc_section-1">
                     <a href="#management-and-monitoring-using-jmx">
                        <span class="toctext">Management and Monitoring using JMX</span>
                     </a>
                     <ul>
                        <li class="toc_level-2 toc_section-2">
                           <a href="#introduction">
                              <span class="toctext">Introduction</span>
                           </a>
                        </li>
                        <li class="toc_level-2 toc_section-3">
                           <a href="#jmx-overview">
                              <span class="toctext">JMX Overview</span>
                           </a>
                        </li>
                        <li class="toc_level-2 toc_section-4">
                           <a href="#mbeans">
                              <span class="toctext">MBeans</span>
                           </a>
                        </li>
                        <li class="toc_level-2 toc_section-5">
                           <a href="#jmx-remoting">
                              <span class="toctext">JMX Remoting</span>
                           </a>
                        </li>
                        <li class="toc_level-2 toc_section-6">
                           <a href="#objectname-naming-scheme">
                              <span class="toctext">ObjectName naming scheme</span>
                           </a>
                        </li>
                        <li class="toc_level-2 toc_section-7">
                           <a href="#the-management-service">
                              <span class="toctext">The Management Service</span>
                           </a>
                        </li>
                        <li class="toc_level-2 toc_section-8">
                           <a href="#jconsole-example">
                              <span class="toctext">JConsole Example</span>
                           </a>
                        </li>
                        <li class="toc_level-2 toc_section-9">
                           <a href="#hibernate-statistics">
                              <span class="toctext">Hibernate statistics</span>
                           </a>
                        </li>
                        <li class="toc_level-2 toc_section-10">
                           <a href="#performance">
                              <span class="toctext">Performance</span>
                           </a>
                        </li>
                        <li class="toc_level-2 toc_section-11">
                           <a href="#ssl-secured-jmx-monitoring">
                              <span class="toctext">SSL-Secured JMX Monitoring</span>
                           </a>
                        </li>
                     </ul>
                  </li>
               </ul>
            </td>
         </tr>
      </tbody>
   </table>
</div>

<table>
  <tbody>
    <tr>
      <td>{toc</td>
      <td>2:3}</td>
    </tr>
  </tbody>
</table>

<h2 id="introduction">Introduction</h2>

<p>JMX creates a standard way of instrumenting classes and making them available to a management and monitoring infrastructure. This provides an alternative to the <a href="/documentation/4.1/tms/tms">Terracotta Management Server</a> for custom or third-party tools.</p>

<h2 id="jmx-overview">JMX Overview</h2>
<p>The <code class="highlighter-rouge">net.sf.ehcache.management</code> package contains MBeans and a <code class="highlighter-rouge">ManagementService</code> for JMX management of BigMemory Max. It is in a separate package so that JMX libraries are only required if you want to use it - there is no leakage of JMX dependencies
into the core Ehcache package.</p>

<p>Use <code class="highlighter-rouge">net.sf.ehcache.management.ManagementService.registerMBeans(...)</code> static method
to register a selection of MBeans to the MBeanServer provided to the method. If you wish to monitor Ehcache but not use JMX, use the existing public methods on <code class="highlighter-rouge">Cache</code> and <code class="highlighter-rouge">CacheStatistics</code>.</p>

<p>The Management package is illustrated in the follwing image.</p>

<p>
   <img src="/images/documentation/management_package.png" alt="Ehcache Image" />
</p>

<h2 id="mbeans">MBeans</h2>
<p>BigMemory Max supports Standard MBeans. MBeans are available for the following:</p>

<ul>
  <li>CacheManager</li>
  <li>Cache</li>
  <li>CacheConfiguration</li>
  <li>CacheStatistics</li>
</ul>

<p>All MBean attributes are available to a local MBeanServer. The CacheManager MBean allows
traversal to its collection of Cache MBeans. Each Cache MBean likewise allows traversal to
its CacheConfiguration MBean and its CacheStatistics MBean.</p>

<h2 id="jmx-remoting">JMX Remoting</h2>
<p>The Remote API allows connection from a remote JMX Agent to an MBeanServer via an <a id="MBeanServerConnection"></a><code class="highlighter-rouge">MBeanServerConnection</code>.
Only <code class="highlighter-rouge">Serializable</code> attributes are available remotely. The following Ehcache MBean attributes are available remotely:</p>

<ul>
  <li>limited CacheManager attributes</li>
  <li>limited Cache attributes</li>
  <li>all CacheConfiguration attributes</li>
  <li>all CacheStatistics attributes</li>
</ul>

<p>Most attributes use built-in types. To access all attributes, add ehcache.jar to the remote JMX client’s
classpath. For example, <code class="highlighter-rouge">jconsole -J-Djava.class.path=ehcache.jar</code>.</p>

<h2 id="objectname-naming-scheme"><code class="highlighter-rouge">ObjectName</code> naming scheme</h2>
<ul>
  <li>CacheManager - “net.sf.ehcache:type=CacheManager,name=&lt;CacheManager&gt;”</li>
  <li>Cache - “net.sf.ehcache:type=Cache,CacheManager=&lt;cacheManagerName&gt;,name=&lt;cacheName&gt;”</li>
  <li>CacheConfiguration</li>
  <li>“net.sf.ehcache:type=CacheConfiguration,CacheManager=&lt;cacheManagerName&gt;,name=&lt;cacheName&gt;”</li>
  <li>CacheStatistics - “net.sf.ehcache:type=CacheStatistics,CacheManager=&lt;cacheManagerName&gt;,name=&lt;cacheName&gt;”</li>
</ul>

<h2 id="the-management-service">The Management Service</h2>
<p>The <code class="highlighter-rouge">ManagementService</code> class is the API entry point.
<img src="/images/documentation/ManagementService.png" alt="Ehcache Image" />
There is only one method, <code class="highlighter-rouge">ManagementService.registerMBeans</code> which is used to initiate JMX registration
of a CacheManager’s instrumented MBeans.
The <code class="highlighter-rouge">ManagementService</code> is a <code class="highlighter-rouge">CacheManagerEventListener</code> and
is therefore notified of any new Caches added or disposed and updates the MBeanServer appropriately.
Initiated MBeans remain registered in the MBeanServer until the CacheManager shuts down, at which time
the MBeans are deregistered. This ensures correct behavior in application servers where applications are
deployed and undeployed.</p>

<pre>
   <code>
/**
* This method causes the selected monitoring options to be be registered
* with the provided MBeanServer for caches in the given CacheManager.
*
* While registering the CacheManager enables traversal to all of the other
*  items,
* this requires programmatic traversal. The other options allow entry points closer
* to an item of interest and are more accessible from JMX management tools like JConsole.
* Moreover CacheManager and Cache are not serializable, so remote monitoring is not
* possible * for CacheManager or Cache, while CacheStatistics and CacheConfiguration are.
* Finally * CacheManager and Cache enable management operations to be performed.
*
* Once monitoring is enabled caches will automatically added and removed from the
* MBeanServer * as they are added and disposed of from the CacheManager. When the
* CacheManager itself * shutsdown all registered MBeans will be unregistered.
*
* @param cacheManager the CacheManager to listen to
* @param mBeanServer the MBeanServer to register MBeans to
* @param registerCacheManager Whether to register the CacheManager MBean
* @param registerCaches Whether to register the Cache MBeans
* @param registerCacheConfigurations Whether to register the CacheConfiguration MBeans
* @param registerCacheStatistics Whether to register the CacheStatistics MBeans
*/
public static void registerMBeans(
   net.sf.ehcache.CacheManager cacheManager,
   MBeanServer mBeanServer,
   boolean registerCacheManager,
   boolean registerCaches,
   boolean registerCacheConfigurations,
   boolean registerCacheStatistics) throws CacheException {
</code>
</pre>

<h2 id="jconsole-example">JConsole Example</h2>
<p>This example shows how to register CacheStatistics in the JDK platform MBeanServer, which
works with the JConsole management agent.</p>

<div class="highlighter-rouge"><pre class="highlight"><code>CacheManager manager = new CacheManager();
MBeanServer mBeanServer = ManagementFactory.getPlatformMBeanServer();
ManagementService.registerMBeans(manager, mBeanServer, false, false, false, true);
</code></pre>
</div>

<p>CacheStatistics MBeans are then registered.
<img src="/images/documentation/JConsoleExample.png" alt="Ehcache Image" /> <em>CacheStatistics MBeans in JConsole</em></p>

<h2 id="hibernate-statistics">Hibernate statistics</h2>
<p>If you are running Terracotta clustered caches as hibernate second-level cache provider, it is possible to access
the hibernate statistics and Ehcache stats via JMX.
<code class="highlighter-rouge">EhcacheHibernateMBean</code> is the main interface that exposes all the APIs via JMX. It basically extends
two interfaces – <code class="highlighter-rouge">EhcacheStats</code> and <code class="highlighter-rouge">HibernateStats</code>. Please look into the specific interface for more
details. You may also refer to this <a href="http://weblogs.java.net/blog/maxpoon/archive/2007/06/extending_the_n_2.html">online tutorial</a>.</p>

<h2 id="performance">Performance</h2>
<p>Collection of cache statistics is not entirely free of overhead, however, the statistics API switches on/off automatically according to usage. If you need few statistics, you incur little overhead; on the other hand, as you use more statistics, you can incur more. Statistics are off by default.</p>

<h2 id="ssl-secured-jmx-monitoring">SSL-Secured JMX Monitoring</h2>

<p>Note: For a brief overview of Terracotta security with links to individual topics, see <a href="/documentation/4.1/bigmemorymax/security-overview">Security Overview</a>.</p>

<p>This page documents setting up an SSL-enabled connection for remote monitoring of a Terracotta Server from a simple Java client using Java Management Extensions (JMX) technology.</p>

<p>Before creating this connection, be sure to complete the instructions on the <a href="/documentation/4.1/terracotta-server-array/tsa-security">Securing Terracotta Clusters with SSL</a> page.</p>

<p>###Compile the Client</p>

<p>Use the sample client code below, but adapt the host, port, username, and password variables according to your setup.</p>

<div class="highlighter-rouge"><pre class="highlight"><code>	import java.util.HashMap;
	import java.util.Map;

	import javax.management.remote.JMXConnector;
	import javax.management.remote.JMXConnectorFactory;
	import javax.management.remote.JMXServiceURL;
	import javax.management.remote.rmi.RMIConnectorServer;
	import javax.rmi.ssl.SslRMIClientSocketFactory;
	import javax.rmi.ssl.SslRMIServerSocketFactory;

	public class Main {
	  public static void main(String[] args) throws Exception {
		String host = "terracotta-server-host";
		String port = "9520";
		String username = "terracotta";
		String password = "terracotta-user-password";

		Object[] credentials = { username, password.toCharArray() };

		SslRMIClientSocketFactory csf = new SslRMIClientSocketFactory();
		SslRMIServerSocketFactory ssf = new SslRMIServerSocketFactory();

		Map&lt;String, Object&gt; env = new HashMap&lt;String, Object&gt;();
		env.put(RMIConnectorServer.RMI_CLIENT_SOCKET_FACTORY_ATTRIBUTE, csf);
		env.put(RMIConnectorServer.RMI_SERVER_SOCKET_FACTORY_ATTRIBUTE, ssf);
		env.put("com.sun.jndi.rmi.factory.socket", csf);
		env.put("jmx.remote.credentials", credentials);

		JMXServiceURL serviceURL = new JMXServiceURL("service:jmx:rmi://" + host + ":" + port +
			"/jndi/rmi://" + host + ":" + port + "/jmxrmi");
		JMXConnector jmxConnector = JMXConnectorFactory.connect(serviceURL, env);

		// do some work with the JMXConnector

		jmxConnector.close();
	  }
	}
</code></pre>
</div>

<p>###Run the Client</p>

<p>After compiling your client, configure the JVM with a truststore containing your Terracotta Server’s certificate. You can simply re-use the one created for the Terracotta Server (refer to <a href="/documentation/4.1/terracotta-server-array/tsa-security">Securing Terracotta Clusters with SSL</a>).</p>

<div class="highlighter-rouge"><pre class="highlight"><code>	% java -Djavax.net.ssl.trustStore=/your/path/to/truststore.jks \
	  -Djavax.net.ssl.trustStorePassword=your_truststore_password \
	  Main
</code></pre>
</div>

<p>###About the Credentials</p>

<p>In the above example, the client’s credentials are encoded as an array of Objects. The Object array contains the username as a String in the array’s first slot, and the password as a char[] in the array’s second slot. The Object array is then passed to the connection as the “jmx.remote.credentials” entry. Passing the credentials in this format is necessary to avoid an authentication failure, except for the following exception. If you are using the JConsole tool, the credentials are sent as String[]{String,String} instead of String[]{String,char[]}.</p>

<p>###Troubleshooting
####Password stack trace</p>

<p>The stack trace below indicates that the password you specified in the <code class="highlighter-rouge">javax.net.ssl.trustStorePassword</code> system property is not the same as in the truststore you specified in the <code class="highlighter-rouge">javax.net.ssl.trustStore</code> system property.</p>

<div class="highlighter-rouge"><pre class="highlight"><code>	Exception in thread "main" java.io.IOException: Failed to retrieve RMIServer stub: javax.naming.CommunicationException [Root exception is java.rmi.ConnectIOException: Exception creating connection to: localhost; nested exception is:
		java.net.SocketException: java.security.NoSuchAlgorithmException: Error constructing implementation (algorithm: Default, provider: SunJSSE, class: com.sun.net.ssl.internal.ssl.DefaultSSLContextImpl)]
		at javax.management.remote.rmi.RMIConnector.connect(RMIConnector.java:338)
		at javax.management.remote.JMXConnectorFactory.connect(JMXConnectorFactory.java:248)
		at Main.main(Main.java:31)
		at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
		at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
		at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
		at java.lang.reflect.Method.invoke(Method.java:597)
		at com.intellij.rt.execution.application.AppMain.main(AppMain.java:120)
	Caused by: javax.naming.CommunicationException [Root exception is java.rmi.ConnectIOException: Exception creating connection to: localhost; nested exception is:
		java.net.SocketException: java.security.NoSuchAlgorithmException: Error constructing implementation (algorithm: Default, provider: SunJSSE, class: com.sun.net.ssl.internal.ssl.DefaultSSLContextImpl)]
		at com.sun.jndi.rmi.registry.RegistryContext.lookup(RegistryContext.java:101)
		at com.sun.jndi.toolkit.url.GenericURLContext.lookup(GenericURLContext.java:185)
		at javax.naming.InitialContext.lookup(InitialContext.java:392)
		at javax.management.remote.rmi.RMIConnector.findRMIServerJNDI(RMIConnector.java:1886)
		at javax.management.remote.rmi.RMIConnector.findRMIServer(RMIConnector.java:1856)
		at javax.management.remote.rmi.RMIConnector.connect(RMIConnector.java:255)
		... 7 more
	Caused by: java.rmi.ConnectIOException: Exception creating connection to: localhost; nested exception is:
		java.net.SocketException: java.security.NoSuchAlgorithmException: Error constructing implementation (algorithm: Default, provider: SunJSSE, class: com.sun.net.ssl.internal.ssl.DefaultSSLContextImpl)
		at sun.rmi.transport.tcp.TCPEndpoint.newSocket(TCPEndpoint.java:614)
		at sun.rmi.transport.tcp.TCPChannel.createConnection(TCPChannel.java:198)
		at sun.rmi.transport.tcp.TCPChannel.newConnection(TCPChannel.java:184)
		at sun.rmi.server.UnicastRef.newCall(UnicastRef.java:322)
		at sun.rmi.registry.RegistryImpl_Stub.lookup(Unknown Source)
		at com.sun.jndi.rmi.registry.RegistryContext.lookup(RegistryContext.java:97)
		... 12 more
	Caused by: java.net.SocketException: java.security.NoSuchAlgorithmException: Error constructing implementation (algorithm: Default, provider: SunJSSE, class: com.sun.net.ssl.internal.ssl.DefaultSSLContextImpl)
		at javax.net.ssl.DefaultSSLSocketFactory.throwException(SSLSocketFactory.java:179)
		at javax.net.ssl.DefaultSSLSocketFactory.createSocket(SSLSocketFactory.java:192)
		at javax.rmi.ssl.SslRMIClientSocketFactory.createSocket(SslRMIClientSocketFactory.java:105)
		at sun.rmi.transport.tcp.TCPEndpoint.newSocket(TCPEndpoint.java:595)
		... 17 more
	Caused by: java.security.NoSuchAlgorithmException: Error constructing implementation (algorithm: Default, provider: SunJSSE, class: com.sun.net.ssl.internal.ssl.DefaultSSLContextImpl)
		at java.security.Provider$Service.newInstance(Provider.java:1245)
		at sun.security.jca.GetInstance.getInstance(GetInstance.java:220)
		at sun.security.jca.GetInstance.getInstance(GetInstance.java:147)
		at javax.net.ssl.SSLContext.getInstance(SSLContext.java:125)
		at javax.net.ssl.SSLContext.getDefault(SSLContext.java:68)
		at javax.net.ssl.SSLSocketFactory.getDefault(SSLSocketFactory.java:102)
		at javax.rmi.ssl.SslRMIClientSocketFactory.getDefaultClientSocketFactory(SslRMIClientSocketFactory.java:192)
		at javax.rmi.ssl.SslRMIClientSocketFactory.createSocket(SslRMIClientSocketFactory.java:102)
		... 18 more
	Caused by: java.io.IOException: Keystore was tampered with, or password was incorrect
		at sun.security.provider.JavaKeyStore.engineLoad(JavaKeyStore.java:771)
		at sun.security.provider.JavaKeyStore$JKS.engineLoad(JavaKeyStore.java:38)
		at java.security.KeyStore.load(KeyStore.java:1185)
		at com.sun.net.ssl.internal.ssl.TrustManagerFactoryImpl.getCacertsKeyStore(TrustManagerFactoryImpl.java:202)
		at com.sun.net.ssl.internal.ssl.DefaultSSLContextImpl.getDefaultTrustManager(DefaultSSLContextImpl.java:70)
		at com.sun.net.ssl.internal.ssl.DefaultSSLContextImpl.&lt;init&gt;(DefaultSSLContextImpl.java:40)
		at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
		at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:39)
		at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:27)
		at java.lang.reflect.Constructor.newInstance(Constructor.java:513)
		at java.lang.Class.newInstance0(Class.java:357)
		at java.lang.Class.newInstance(Class.java:310)
		at java.security.Provider$Service.newInstance(Provider.java:1221)
		... 25 more
	Caused by: java.security.UnrecoverableKeyException: Password verification failed
		at sun.security.provider.JavaKeyStore.engineLoad(JavaKeyStore.java:769)
		... 37 more
</code></pre>
</div>

<p>####Truststore stack trace</p>

<p>The stack trace below indicates that the truststore you specified in the <code class="highlighter-rouge">javax.net.ssl.trustStore</code> system property does not exist or cannot be read.</p>

<div class="highlighter-rouge"><pre class="highlight"><code>	Exception in thread "main" java.io.IOException: Failed to retrieve RMIServer stub: javax.naming.CommunicationException [Root exception is java.rmi.ConnectIOException: error during JRMP connection establishment; nested exception is:
		javax.net.ssl.SSLException: java.lang.RuntimeException: Unexpected error: java.security.InvalidAlgorithmParameterException: the trustAnchors parameter must be non-empty]
		at javax.management.remote.rmi.RMIConnector.connect(RMIConnector.java:338)
		at javax.management.remote.JMXConnectorFactory.connect(JMXConnectorFactory.java:248)
		at Main.main(Main.java:31)
		at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
		at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
		at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
		at java.lang.reflect.Method.invoke(Method.java:597)
		at com.intellij.rt.execution.application.AppMain.main(AppMain.java:120)
	Caused by: javax.naming.CommunicationException [Root exception is java.rmi.ConnectIOException: error during JRMP connection establishment; nested exception is:
		javax.net.ssl.SSLException: java.lang.RuntimeException: Unexpected error: java.security.InvalidAlgorithmParameterException: the trustAnchors parameter must be non-empty]
		at com.sun.jndi.rmi.registry.RegistryContext.lookup(RegistryContext.java:101)
		at com.sun.jndi.toolkit.url.GenericURLContext.lookup(GenericURLContext.java:185)
		at javax.naming.InitialContext.lookup(InitialContext.java:392)
		at javax.management.remote.rmi.RMIConnector.findRMIServerJNDI(RMIConnector.java:1886)
		at javax.management.remote.rmi.RMIConnector.findRMIServer(RMIConnector.java:1856)
		at javax.management.remote.rmi.RMIConnector.connect(RMIConnector.java:255)
		... 7 more
	Caused by: java.rmi.ConnectIOException: error during JRMP connection establishment; nested exception is:
		javax.net.ssl.SSLException: java.lang.RuntimeException: Unexpected error: java.security.InvalidAlgorithmParameterException: the trustAnchors parameter must be non-empty
		at sun.rmi.transport.tcp.TCPChannel.createConnection(TCPChannel.java:286)
		at sun.rmi.transport.tcp.TCPChannel.newConnection(TCPChannel.java:184)
		at sun.rmi.server.UnicastRef.newCall(UnicastRef.java:322)
		at sun.rmi.registry.RegistryImpl_Stub.lookup(Unknown Source)
		at com.sun.jndi.rmi.registry.RegistryContext.lookup(RegistryContext.java:97)
		... 12 more
	Caused by: javax.net.ssl.SSLException: java.lang.RuntimeException: Unexpected error: java.security.InvalidAlgorithmParameterException: the trustAnchors parameter must be non-empty
		at com.sun.net.ssl.internal.ssl.Alerts.getSSLException(Alerts.java:190)
		at com.sun.net.ssl.internal.ssl.SSLSocketImpl.fatal(SSLSocketImpl.java:1747)
		at com.sun.net.ssl.internal.ssl.SSLSocketImpl.fatal(SSLSocketImpl.java:1708)
		at com.sun.net.ssl.internal.ssl.SSLSocketImpl.handleException(SSLSocketImpl.java:1691)
		at com.sun.net.ssl.internal.ssl.SSLSocketImpl.handleException(SSLSocketImpl.java:1617)
		at com.sun.net.ssl.internal.ssl.AppOutputStream.write(AppOutputStream.java:105)
		at java.io.BufferedOutputStream.flushBuffer(BufferedOutputStream.java:65)
		at java.io.BufferedOutputStream.flush(BufferedOutputStream.java:123)
		at java.io.DataOutputStream.flush(DataOutputStream.java:106)
		at sun.rmi.transport.tcp.TCPChannel.createConnection(TCPChannel.java:211)
		... 16 more
	Caused by: java.lang.RuntimeException: Unexpected error: java.security.InvalidAlgorithmParameterException: the trustAnchors parameter must be non-empty
		at sun.security.validator.PKIXValidator.&lt;init&gt;(PKIXValidator.java:57)
		at sun.security.validator.Validator.getInstance(Validator.java:161)
		at com.sun.net.ssl.internal.ssl.X509TrustManagerImpl.getValidator(X509TrustManagerImpl.java:108)
		at com.sun.net.ssl.internal.ssl.X509TrustManagerImpl.checkServerTrusted(X509TrustManagerImpl.java:204)
		at com.sun.net.ssl.internal.ssl.X509TrustManagerImpl.checkServerTrusted(X509TrustManagerImpl.java:249)
		at com.sun.net.ssl.internal.ssl.ClientHandshaker.serverCertificate(ClientHandshaker.java:1188)
		at com.sun.net.ssl.internal.ssl.ClientHandshaker.processMessage(ClientHandshaker.java:135)
		at com.sun.net.ssl.internal.ssl.Handshaker.processLoop(Handshaker.java:593)
		at com.sun.net.ssl.internal.ssl.Handshaker.process_record(Handshaker.java:529)
		at com.sun.net.ssl.internal.ssl.SSLSocketImpl.readRecord(SSLSocketImpl.java:943)
		at com.sun.net.ssl.internal.ssl.SSLSocketImpl.performInitialHandshake(SSLSocketImpl.java:1188)
		at com.sun.net.ssl.internal.ssl.SSLSocketImpl.writeRecord(SSLSocketImpl.java:654)
		at com.sun.net.ssl.internal.ssl.AppOutputStream.write(AppOutputStream.java:100)
		... 20 more
	Caused by: java.security.InvalidAlgorithmParameterException: the trustAnchors parameter must be non-empty
		at java.security.cert.PKIXParameters.setTrustAnchors(PKIXParameters.java:183)
		at java.security.cert.PKIXParameters.&lt;init&gt;(PKIXParameters.java:103)
		at java.security.cert.PKIXBuilderParameters.&lt;init&gt;(PKIXBuilderParameters.java:87)
		at sun.security.validator.PKIXValidator.&lt;init&gt;(PKIXValidator.java:55)
		... 32 more
</code></pre>
</div>

<p>####Conditional stack trace</p>

<p>The stack trace below indicates that one of the following conditions is true:</p>

<ul>
  <li>The username you specified does not exist.</li>
  <li>The password you specified is incorrect.</li>
  <li>
    <p>The credentials field is not an Object array containing the username as a String in the array’s first slot and the password as a char[] in the array’s second slot.</p>

    <div class="highlighter-rouge"><pre class="highlight"><code>  Exception in thread "main" java.lang.SecurityException: Username and/or password is not valid!
      at com.tc.management.EnterpriseL2Management$1.authenticate(EnterpriseL2Management.java:202)
      at javax.management.remote.rmi.RMIServerImpl.doNewClient(RMIServerImpl.java:213)
      at javax.management.remote.rmi.RMIServerImpl.newClient(RMIServerImpl.java:180)
      at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
      at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
      at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
      at java.lang.reflect.Method.invoke(Method.java:597)
      at sun.rmi.server.UnicastServerRef.dispatch(UnicastServerRef.java:303)
      at sun.rmi.transport.Transport$1.run(Transport.java:159)
      at java.security.AccessController.doPrivileged(Native Method)
      at sun.rmi.transport.Transport.serviceCall(Transport.java:155)
      at sun.rmi.transport.tcp.TCPTransport.handleMessages(TCPTransport.java:535)
      at sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run0(TCPTransport.java:790)
      at sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run(TCPTransport.java:649)
      at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:895)
      at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:918)
      at java.lang.Thread.run(Thread.java:680)
      at sun.rmi.transport.StreamRemoteCall.exceptionReceivedFromServer(StreamRemoteCall.java:255)
      at sun.rmi.transport.StreamRemoteCall.executeCall(StreamRemoteCall.java:233)
      at sun.rmi.server.UnicastRef.invoke(UnicastRef.java:142)
      at javax.management.remote.rmi.RMIServerImpl_Stub.newClient(Unknown Source)
      at javax.management.remote.rmi.RMIConnector.getConnection(RMIConnector.java:2327)
      at javax.management.remote.rmi.RMIConnector.connect(RMIConnector.java:277)
      at javax.management.remote.JMXConnectorFactory.connect(JMXConnectorFactory.java:248)
      at Main.main(Main.java:31)
      at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
      at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
      at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
      at java.lang.reflect.Method.invoke(Method.java:597)
      at com.intellij.rt.execution.application.AppMain.main(AppMain.java:120)
</code></pre>
    </div>
  </li>
</ul>

      </article>
    </div>

  </div>

</div>

      </div>
    </div>

    <br/>
<footer class="site-footer">

  <div class="container">

    <div class="footer-col-wrapper">
      <div class="footer-col footer-col-1">
        Related Projects:<br/>
        <a href="http://www.ehcache.org"><img src="/images/ehcache.png" style=""></a><br/><br/>
        <a href="http://www.quartz-scheduler.org"><img src="/images/logo-quartz-scheduler.png" style="max-height: 32px;"></a>

        <!--
        <ul class="contact-list">
          <li>Terracotta</li>
          <li><a href="mailto:tc-oss@softwareag.com">tc-oss@softwareag.com</a></li>
        </ul>
      -->
      </div>

      <div class="footer-col  footer-col-2">
        <ul class="social-media-list">
          
          <li>
            <a href="https://github.com/terracotta-oss">
              <i class="fa fa-github"></i> GitHub
            </a>
          </li>
          

          
          <li>
            <a href="https://twitter.com/terracottatech">
              <i class="fa fa-twitter"></i> Twitter
            </a>
          </li>
          

          
          <li>
            <a href="http://www.facebook.com/Terracotta">
              <i class="fa fa-facebook"></i> Facebook
            </a>
          </li>
          

          
          <li>
            <a href="http://www.linkedin.com/company/terracotta">
              <i class="fa fa-linkedin"></i> LinkedIn
            </a>
          </li>
          

          <li>
            <a href="/feed.xml" title="Atom/RSS Feed">
              <i class="fa fa-rss-square"></i> Atom/RSS Feed
            </a>
          </li>
        </ul>
      </div>

    <div class="footer-col  footer-col-3">
      <a href="/downloads/"><i class="fa fa-download"></i> Download Now</a>
      <br/>
      <a href="/documentation/"><i class="fa fa-book"></i> Documentation</a>
      <br/>
      <a href="/resources/"><i class="fa fa-external-link-square"></i> Resources</a>
      <br/>
      <a href="/blog/"><i class="fa fa-rss-square"></i> Terracotat Blog</a>
      <br/>
      <a href="/community/"><i class="fa fa-users"></i> Join the Community</a>
    </div>

    </div>

    <div class="container-fluid">
        <hr/>
        <a class="SAG-Logo" href="http://www.softwareag.com/corporate/products/terracotta"><img src="/images/SAG_Logo.png" style="height:1.5em;width:9em;"/></a>
        <div class="footer-text">
          <em class="copyleft">Terracotta is Open Source and freely available under the Terracotta Public License 2.0</em>
          <br/>
          <em class="copyright">&copy; Terracotta, Inc., a wholly-owned subsidiary of Software AG USA, Inc. All rights reserved.</em>
        </div>
    </div>
  </div>

</footer>

<!-- Bootstrap core JavaScript
================================================== -->
<!-- Placed at the end of the document so the pages load faster -->
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/js/bootstrap.min.js"></script>
<!-- IE10 viewport hack for Surface/desktop Windows 8 bug -->
<script src="https://maxcdn.bootstrapcdn.com/js/ie10-viewport-bug-workaround.js"></script>

<!--  <script type="text/javascript" src="http://cdnjs.cloudflare.com/ajax/libs/jquery-scrollTo/2.1.0/jquery.scrollTo.min.js"/> -->

<script type="text/javascript">
        $('#').addClass("active");
        $('#').addClass("active");
</script>


  </body>

</html>
